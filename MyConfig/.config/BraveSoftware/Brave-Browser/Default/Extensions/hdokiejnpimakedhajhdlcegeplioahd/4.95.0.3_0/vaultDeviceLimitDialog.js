var VaultDeviceLimitDialog=function(e){Dialog.call(this,e,{additionalHeaderClasses:[],dynamicHeight:!0,buttonsInsideContent:!0,closeButtonEnabled:!1,hidePreviousDialogs:!0,overlayDialog:!0,blurOverlay:!0})};VaultDeviceLimitDialog.prototype=Object.create(Dialog.prototype),(VaultDeviceLimitDialog.prototype.constructor=VaultDeviceLimitDialog).prototype.initialize=function(e){Dialog.prototype.initialize.apply(this,arguments),function(t){if("/acctsiframe.php"!==location.pathname){var i=document.querySelector("#vaultDeviceLimitDialog .media__figure img"),r=document.querySelector("#vaultDeviceLimitDialog .message"),n=document.querySelector("#vaultDeviceLimitDialog .title"),s=document.getElementById("switchingYourDeviceLink"),a=document.getElementById("lastPassPremiumLink"),o=document.getElementById("setDevice"),l=document.getElementById("paywallUpgradeButton"),c=document.querySelector("#vaultDeviceLimitDialog .device__type"),u=Number(bg.get("g_primary_device_switches_left")),m="Vault Pop Up",g="Desktop";try{localStorage.setItem(bg.get("g_username_hash")+"LPUserHasMetVaultDeviceLimitRestriction",bg.get("g_is_restricted"))}catch(e){}var e=function(){var e=bg.get("g_username_hash")+"LPNotificationSuccessMessage",t;2<u&&(t=Strings.translateString("You switched to computer: %s switches left",u-1)),2===u&&(t=Strings.translateString("You switched to computer: 1 switch left")),1===u&&(t=Strings.translateString("You made the final switch to computer"));try{t&&localStorage.setItem(e,t)}catch(e){}},d=function(){1===u?bg.sendLpImprove("mdpw_last_switch_confirmation_clicked",{Action:"Confirm",CurrentDevice:g,Source:m}):bg.sendLpImprove("mdpw_paywall_clicked",{Action:"Switch",CurrentDevice:g,Source:m,SwitchesLeft:u}),document.getElementById("spinner").classList.remove("is-hidden"),bg.setPrimaryDevice(function(){LPProxy.refreshSites(),e(),location.reload()},function(){document.getElementById("spinner").classList.add("is-hidden"),t.close(),Notifications.displayErrorMessage(Strings.translateString("Something went wrong. We couldn’t switch your device type. Please try again."))})},p=new Date(2021,4,6,23,59,59,0).getTime()>(new Date).getTime(),y=function(){var e;reduxApp&&LPProxy.isExpiredFamiliesPurchaseFlowEnabled()&&LPProxy.isExpiredFamilyUser()?(t.close(),reduxApp.setExpiredFamiliesPurchaseFlowType(LPProxy.getFamilyMemberType(),"Multi Device Paywall")):(e=p?LPProxy.getBaseURL()+"buy-premium?cp=LPP2021-DT-25Sw":LPProxy.getBaseURL()+"premium/payment",bg.sendLpImprove("mdpw_paywall_clicked",{Action:"Go Premium",CurrentDevice:g,Source:m,SwitchesLeft:u}),LPPlatform.openURL(e))},h=function(){bg.sendLpImprove("mdpw_paywall_clicked",{Action:"Dismiss",CurrentDevice:g,Source:m,SwitchesLeft:u}),t.close(),P(u),bg.get("g_display_premium_retrial_offer")&&setTimeout(function(){LPVault.openRetrialDialog()},1500)};s.style.display="block",a.style.display="none",l.innerText=p?Strings.translateString("Go Premium for only $2.25/month"):Strings.translateString("Go Premium for only $3/month"),l.addEventListener("click",y),o.innerText=Strings.translateString("Switch to computer"),o.addEventListener("click",d),document.getElementById("closeDialog").addEventListener("click",h);var S=function(){P(-1)},P=function(e){switch(c.style.display="block",e){case 0:n.innerText=Strings.translateString("%s device switches left",0),r.innerHTML=Strings.translateString("%sGo Premium%s for unlimited access on both mobile and computer.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-device-icon-red-light.png",a.style.display="block",s.style.display="none",l.innerText=Strings.translateString("Cancel"),o.innerText=p?Strings.translateString("Go Premium for only $2.25/month"):Strings.translateString("Go Premium for only $3/month"),l.removeEventListener("click",y),l.addEventListener("click",h),o.removeEventListener("click",d),o.addEventListener("click",y),reduxApp&&LPProxy.isExpiredFamiliesPurchaseFlowEnabled()&&LPProxy.isExpiredFamilyUser()&&(r.innerHTML=Strings.translateString("%sUpgrade to Families or Premium%s for unlimited access on both mobile and computer.","<b>","</b>"),o.innerText=Strings.translateString("Upgrade now"));break;case 1:n.innerText=Strings.translateString("1 device switch left"),reduxApp&&LPProxy.isExpiredFamiliesPurchaseFlowEnabled()&&LPProxy.isExpiredFamilyUser()?(r.innerHTML=Strings.translateString("Please take a minute to %sthink about how you use LastPass.%s This is your last switch. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>","<b>","</b>"),l.innerText=Strings.translateString("Upgrade now")):r.innerHTML=Strings.translateString("Please take a minute to %sthink about how you use LastPass.%s This is your last switch. Go Premium for unlimited access.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-device-icon-yellow-light.png",o.removeEventListener("click",d),o.addEventListener("click",S);break;case-1:t.close(),setTimeout(function(){t.open()},250),n.innerText=Strings.translateString("Switch to computer only?"),reduxApp&&LPProxy.isExpiredFamiliesPurchaseFlowEnabled()&&LPProxy.isExpiredFamilyUser()?(c.style.display="none",r.innerHTML=Strings.translateString("%sThis is your last opportunity to switch!%s After this switch, you’ll be able to use LastPass for free on computers, but not on mobile devices. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>","<b>","</b>"),l.innerText=Strings.translateString("Upgrade now")):r.innerHTML=Strings.translateString("%sThis is your last opportunity to switch!%s After this switch, you’ll be able to use LastPass for free on computers, but not on mobile devices.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-illustration.png",o.innerText=Strings.translateString("Yes, make the final switch"),o.removeEventListener("click",S),o.addEventListener("click",d);break;case 2:n.innerText=Strings.translateString("%s device switches left",2),reduxApp&&LPProxy.isExpiredFamiliesPurchaseFlowEnabled()&&LPProxy.isExpiredFamilyUser()?(r.innerHTML=Strings.translateString("You can switch your device type %s2 more times%s to find the right option for you. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>","<b>","</b>"),l.innerText=Strings.translateString("Upgrade now")):r.innerHTML=Strings.translateString("You can switch your device type %s2 more times%s to find the right option for you. Go Premium for unlimited access.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-device-icon-blue-light.png";break;default:n.innerText=Strings.translateString("%s device switches left",u),reduxApp&&LPProxy.isExpiredFamiliesPurchaseFlowEnabled()&&LPProxy.isExpiredFamilyUser()?(r.innerHTML=Strings.translateString("You can only use LastPass for free %son one device type%s. Switch up to %s times to find the right option for you. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>",u,"<b>","</b>"),l.innerText=Strings.translateString("Upgrade now")):r.innerHTML=Strings.translateString("You can only use LastPass for free on %sone type of device.%s Switch up to %s times to find the right option for you.","<span>","</span>",u),i.src="images/vault_4.0/paywall/switch-device-icon-blue-light.png"}};P(u)}}(this)};