var IntroTour=function(o,i,e,t,s,u){"use strict";var a,c;function l(){c.laterThisTour(),u.save(c.getOptions())}function T(){c.neverThisTour(),u.save(c.getOptions())}function b(){c.takeThisTour(),u.save(c.getOptions())}function r(){u.save(null)}function n(){c.makeLaterNowTours(),u.save(c.getOptions())}function A(){a&&(a.closeCurrentStep(),a.unSubscribeAction("later"),a.unSubscribeAction("never"),a.unSubscribeAction("start"),a.unSubscribeAction("close"),a.cleanup(),a=null)}function f(e){s.get(s.CLEAR_DATA).subscribeFirst(function(){e&&e.cleanup&&e.cleanup()})}function v(e,t){var r=this,n;if(A(),u.migrateOldPrefs(),e)(n=(c=new o).getAvailableTour(e))&&(a=new i(n),f(r),a.startFlow(e),t&&b());else{if(c=new o(u.retrieve()),u.save(c.getOptions()),n=c.getAvailableTour(),LPFeatures.isFamiliesAsABenefitWelcomeDialogEnabled()&&n&&"familyOnboardingTour"===n.name)return reduxApp.openWelcomeFamiliesAsABenefitDialog(),void b();n?((a=new i(n)).subscribeToAction("later",l),a.subscribeToAction("never",T),a.subscribeToAction("start",b),a.subscribeToAction("close",A),f(r),a.startFlow(e)):s.get(s.INTRO_TOURS_LOADED).publish()}}return{start:v,cleanup:A,neverThisTour:T,laterThisTour:l,takeThisTour:b,resetAllTours:r,makeLaterNowTours:n}}(IntroTourQueue,IntroTourFlow,IntroTourData,LPProxy,Topics,IntroTourPreferences);