SiteLaunchObserver=function(i){function r(){this.acc=null,this.launchedSite=!1,this.formSubmitted=!1,this.userInteraction=!1,this.hasFormWithPassword=!1,this.formData=null,this.formDisappeared=!1,this.timeout=null,this.timedout=!1}var o={},e=!1;function t(t,a){t(reduxApp.getState().user.launchSiteTrackingEnabled)}function a(t,a){u(t,a,15),o[t].launchedSite=!0,D(o[t].acc,"Launched")}function n(t,a){u(t,a,15),D(o[t].acc,"Filled")}function u(a,t,e){o[a]&&!o[a].launchedSite&&(clearTimeout(o[a].timeout),delete o[a]),o[a]=new r,o[a].acc=t,o[a].timeout=setTimeout(function(){var t=o[a];t&&(t.formSubmitted?(t.formDisappeared=!0,m(a,"Form disappeared")):(t.timedout=!0,m(a,"Timeout")))},1e3*e)}function m(t,a){var e=o[t];e&&(e.launchedSite?i("SiteLaunchAttempt",{FORM_FOUND:e.hasFormWithPassword,FORM_SUBMITTED:e.formSubmitted,USER_SUBMIT:e.userInteraction,FORM_DISAPPEARED:e.formDisappeared,TIMEDOUT:e.timedout}):i("infield_login_attempt",{form_found:e.hasFormWithPassword,form_submitted:e.formSubmitted,form_disappeared:e.formDisappeared,timedout:e.timedout}),c(e),clearTimeout(e.timeout),delete o[t])}function c(t){t.hasFormWithPassword=!!t.formData||t.hasFormWithPassword,D(t.acc," Tracking Results:"),D(t.acc," FormFound: "+t.hasFormWithPassword),D(t.acc," FormSubmitted: "+t.formSubmitted),D(t.acc," FormDisappeared: "+t.formDisappeared),D(t.acc," UserInteraction: "+t.userInteraction),D(t.acc," TimedOut: "+t.timedout)}function s(t,a){for(var e=0;e<a.length;e++)for(var i in a[e])if(a[e][i]===t[i]&&a[e].hasOwnProperty(i)&&""!=a[e][i])return!0;return!1}function d(t,a){if(o[a.tabID]){o[a.tabID].formData=t,o[a.tabID].formSubmitted=!0,o[a.tabID].userInteraction=t.userSubmit,h(a);var e=t.id?t.id:t.name;D(o[a.tabID].acc,"Form("+e+") submitted.")}}function f(t,a){t(o[a.tabID]&&o[a.tabID].formSubmitted)}function h(e){var i=o[e.tabID],t;i&&LPTabs.get({tabID:e.tabID}).forEachWindow({each:function(t,a){return t.LaunchTracking.formExists(i.formData,function(t){t&&m(e.tabID,"Form still on page!")})}})}function b(t){var a=o[t.tabID];a&&a.formSubmitted&&h(t)}function l(t){o[t.tabID]&&(o[t.tabID].hasFormWithPassword=!0,D(o[t.tabID].acc,"Form with password input found"))}function D(t,a){e&&console.log("%cApp: "+t.name+"%c "+a,"color: white; background: green","color: blue")}return{isFeatureEnabled:t,startLaunchSite:a,startFillTracking:n,formSubmitted:d,getSubmitState:f,initiateFormExists:b,hasFormWithPassword:l}}(sendLpImprove);