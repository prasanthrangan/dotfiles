/*! For license information please see popup.bundle.js.LICENSE.txt */
(()=>{"use strict";var e,t={2921:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),a=o(9526),n=o(7497),r=o(4719),l=o(292),d=s.__importDefault(o(6397)),c=s.__importDefault(o(6749)),u=s.__importDefault(o(8289)),g=s.__importDefault(o(5144)),p=o(7190);class b{constructor(){this.cookieCount=0,this.tab=void 0,this.storeId="default"}}class m extends a.Component{constructor(){super(...arguments),this.state=new b,this.port=null}componentDidMount(){return s.__awaiter(this,void 0,void 0,(function*(){document.documentElement.style.fontSize=`${this.props.state.settings.sizePopup.value||16}px`,l.isChrome(this.props.state.cache)&&(document.documentElement.style.minWidth=430+35*((this.props.state.settings.sizePopup.value||16)-10)+"px");const e=yield browser.tabs.query({active:!0,currentWindow:!0});this.setState({storeId:l.parseCookieStoreId(this.props.contextualIdentities,e[0].cookieStoreId),tab:e[0]})}))}componentWillUnmount(){this.port&&(this.port.disconnect(),this.port=null)}setPopupCookieCount(){return s.__awaiter(this,void 0,void 0,(function*(){const{state:e}=this.props,{tab:t}=this.state;if(!t||!t.url)return;const o=yield l.getAllCookiesForDomain(e,t);this.setState({cookieCount:o?o.length-o.filter((e=>e.name===l.CADCOOKIENAME)).length:0})}))}render(){const{tab:e,storeId:t}=this.state;if(!e)return"Loading";const{onNewExpression:o,onCookieCleanup:s,onUpdateSetting:a,contextualIdentities:n,state:r}=this.props,{cache:b,settings:m}=r,v=l.getHostname(e.url),x=l.extractMainDomain(v),f=[v===x?void 0:`*.${x}`,v].filter(Boolean);return""===v||l.isAnIP(e.url)||v.startsWith("file:")||f.push(`*.${v}`),this.port||v&&(this.port=browser.runtime.connect({name:`popupCAD_${v},${t.replace(",","-")}`}),this.port.onMessage.addListener((e=>{const t=e;void 0!==t.cookieUpdated&&t.cookieUpdated&&this.setPopupCookieCount()})),this.port.onDisconnect.addListener((e=>{e.error&&console.error(`Disconnected due to an error: ${browser.runtime.lastError}`),this.port=null}))),i.jsxs("div",Object.assign({id:"cadPopup",className:"container-fluid",style:{overflow:"auto"},onClick:e=>{const t=e.target,o=document.getElementById("cleanCollapse");if(!o||!o.classList.contains("show"))return;const s=t.attributes.getNamedItem("data-target");s&&"#cleanCollapse"===s.value||o.classList.remove("show")}},{children:[i.jsxs("div",Object.assign({className:"row pt-2",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",justifyContent:"center"}},{children:[i.jsx("span",Object.assign({id:"CADTitle"},{children:browser.i18n.getMessage("extensionName")}),void 0)," ",i.jsx("span",Object.assign({id:"CADVersion",style:{fontWeight:"bold"}},{children:browser.runtime.getManifest().version}),void 0)]}),void 0),i.jsxs("div",Object.assign({className:"row justify-content-center p-1",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"}},{children:[i.jsx(c.default,{iconName:"power-off",className:`btn-${m.activeMode.value?"success":"danger"} m-1`,onClick:()=>a(Object.assign(Object.assign({},m.activeMode),{value:!m.activeMode.value})),title:m.activeMode.value?browser.i18n.getMessage("disableAutoDeleteText"):browser.i18n.getMessage("enableAutoDeleteText"),text:m.activeMode.value?browser.i18n.getMessage("autoDeleteEnabledText"):browser.i18n.getMessage("autoDeleteDisabledText")},void 0),i.jsx(c.default,{iconName:m.showNotificationAfterCleanup.value?"bell":"bell-slash",className:`btn-${m.showNotificationAfterCleanup.value?"success":"danger"} m-1`,onClick:()=>a(Object.assign(Object.assign({},m.showNotificationAfterCleanup),{value:!m.showNotificationAfterCleanup.value})),title:browser.i18n.getMessage("toggleNotificationText"),text:m.showNotificationAfterCleanup.value?browser.i18n.getMessage("notificationEnabledText"):browser.i18n.getMessage("notificationDisabledText")},void 0),i.jsxs("div",Object.assign({id:"cleanButtonContainer",className:"btn-group m-1",role:"group","aria-label":"Clean Actions Group"},{children:[i.jsx(c.default,{iconName:"eraser",className:"btn-warning",type:"button",onClick:()=>{s({greyCleanup:!1,ignoreOpenTabs:!1}),p.animateFlash(document.getElementById("cleanButtonContainer"),!0)},title:browser.i18n.getMessage("cookieCleanupText"),text:browser.i18n.getMessage("cleanText")},void 0),i.jsx("button",Object.assign({"aria-controls":"cleanCollapse","aria-expanded":"false",className:"btn btn-warning dropdown-toggle dropdown-toggle-split","data-disabled":"true","data-target":"#cleanCollapse","data-toggle":"collapse",role:"button",style:{borderLeftColor:"rgb(176, 132, 0)",transform:"translate3d(-3px, 0px, 0px)"}},{children:i.jsx("span",Object.assign({className:"sr-only"},{children:browser.i18n.getMessage("dropdownAdditionalCleaningOptions")}),void 0)}),void 0)]}),void 0),i.jsx(c.default,{iconName:"cog",className:"btn-info m-1",onClick:()=>{l.isFirefoxNotAndroid(b)?browser.tabs.create({cookieStoreId:e.cookieStoreId,index:e.index+1,url:"/settings/settings.html#tabSettings"}):browser.tabs.create({index:e.index+1,url:"/settings/settings.html#tabSettings"}),window.close()},title:browser.i18n.getMessage("preferencesText"),text:browser.i18n.getMessage("preferencesText")},void 0)]}),void 0),i.jsx(u.default,{hostname:v||"",tab:e},void 0),i.jsxs("div",Object.assign({className:"row no-gutters",style:{alignItems:"center",margin:"8px 0"}},{children:[e.favIconUrl&&!e.favIconUrl.startsWith("chrome:")&&i.jsx("img",{alt:"favIcon",src:e.favIconUrl,style:{height:"20px",marginRight:"7px",verticalAlign:"middle",width:"20px"}},void 0),i.jsx("div",Object.assign({className:"col"},{children:i.jsx("span",Object.assign({style:{fontSize:"1.25em",marginRight:"8px",verticalAlign:"middle"}},{children:`${v}${n&&void 0!==b[t]?` (${b[t]})`:""}`}),void 0)}),void 0),i.jsxs("div",Object.assign({className:"col-3",style:{fontSize:"1.1em",textAlign:"center"}},{children:[i.jsx("span",Object.assign({id:"CADCookieText"},{children:browser.i18n.getMessage("popupCookieCountText")}),void 0),": ",i.jsx("span",Object.assign({id:"CADCookieCount",style:{fontWeight:"bold"}},{children:this.state.cookieCount}),void 0)]}),void 0)]}),void 0),f.map((e=>i.jsxs("div",Object.assign({style:{alignItems:"center",display:"flex",margin:"8px 0"},className:"row"},{children:[i.jsx("div",Object.assign({style:{flex:1}},{children:e}),void 0),i.jsxs("div",Object.assign({className:"btn-group",style:{marginLeft:"8px"}},{children:[i.jsx(c.default,{className:"btn-secondary",onClick:()=>{o({expression:l.localFileToRegex(e),listType:"GREY",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toGreyListText"),text:browser.i18n.getMessage("greyListWordText")},void 0),i.jsx(c.default,{className:"btn-primary",onClick:()=>{o({expression:l.localFileToRegex(e),listType:"WHITE",storeId:t})},iconName:"plus",title:browser.i18n.getMessage("toWhiteListText"),text:browser.i18n.getMessage("whiteListWordText")},void 0)]}),void 0)]}),e))),i.jsx("div",Object.assign({className:"row",style:{margin:"8px 0"}},{children:i.jsx(g.default,{url:v,storeId:t},void 0)}),void 0),i.jsx(d.default,{numberToShow:3,decisionFilter:1},void 0)]}),void 0)}}t.default=n.connect((e=>({contextualIdentities:l.getSetting(e,"contextualIdentities"),state:e})),(e=>({onUpdateSetting(t){e(r.updateSetting(t))},onNewExpression(t){e(r.addExpressionUI(t))},onCookieCleanup(t){e(r.cookieCleanupUI(t))}})))(m)},8289:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),a=o(7497),n=o(4719),r=o(7459),l=s.__importDefault(o(753));t.default=a.connect((e=>({state:e})),(e=>({onCookieCleanup(t){e(n.cookieCleanupUI(t))}})))((e=>{const{hostname:t,tab:o,state:a,onCookieCleanup:n}=e;return i.jsx("div",Object.assign({className:"row justify-content-center collapse",id:"cleanCollapse",role:"group",style:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",padding:"4px 4px 8px 4px"}},{children:i.jsxs("div",Object.assign({className:"btn-group-vertical"},{children:[i.jsx(l.default,{btnColor:"btn-warning",onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){return n({greyCleanup:!1,ignoreOpenTabs:!0}),!0})),title:browser.i18n.getMessage("cookieCleanupIgnoreOpenTabsText"),text:browser.i18n.getMessage("cleanIgnoringOpenTabsText")},void 0),i.jsx("button",Object.assign({"aria-disabled":!0,className:"px-2 btn btn-light btn-block text-danger font-weight-bold",disabled:!0,type:"button"},{children:browser.i18n.getMessage("cleanupActionsBypass")}),void 0),i.jsx(l.default,{siteData:"All",hostname:t,tab:o},void 0),i.jsx(l.default,{altColor:!0,siteData:"Cache",hostname:t},void 0),i.jsx(l.default,{onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){return yield r.clearCookiesForThisDomain(a,o)})),title:browser.i18n.getMessage("manualCleanSiteDataCookiesDomain",[t]),text:browser.i18n.getMessage("manualCleanSiteDataCookies")},void 0),i.jsx(l.default,{altColor:!0,siteData:"IndexedDB",hostname:t},void 0),i.jsx(l.default,{onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){return yield r.clearLocalStorageForThisDomain(a,o)})),siteData:"LocalStorage",hostname:t},void 0),i.jsx(l.default,{altColor:!0,siteData:"PluginData",hostname:t},void 0),i.jsx(l.default,{siteData:"ServiceWorkers",hostname:t},void 0)]}),void 0)}),void 0)}))},753:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),a=o(7497),n=o(7459),r=o(7190);t.default=a.connect((e=>({state:e})))((e=>{const{altColor:t,btnColor:o,hostname:a,onClick:l,siteData:d,state:c,tab:u,title:g,text:p}=e,b=s.__rest(e,["altColor","btnColor","hostname","onClick","siteData","state","tab","title","text"]);return i.jsx("button",Object.assign({"aria-controls":"cleanCollapse","aria-expanded":"false",className:`btn ${o||"btn-"+(t?"secondary":"primary")} btn-block px-2 mt-1`,"data-target":"#cleanCollapse","data-toggle":"collapse",onClick:()=>s.__awaiter(void 0,void 0,void 0,(function*(){let e=!0;l?e=yield l.apply(this):c&&d&&a&&(e=yield((e,t,o,i)=>s.__awaiter(void 0,void 0,void 0,(function*(){if(!o)return!1;let s=yield n.clearSiteDataForThisDomain(e,t,o);if("All"===t){if(!i)return!1;const t=yield n.clearCookiesForThisDomain(e,i);s=s||t}return s})))(c,d,a,u)),r.animateFlash(document.getElementById("cleanButtonContainer"),e)})),title:g||d&&a&&browser.i18n.getMessage(`manualCleanSiteData${d}Domain`,[a])||"",type:"button"},b,{children:p||browser.i18n.getMessage(`manualCleanSiteData${d}`)}),void 0)}))},5144:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=o(3940),i=o(7557),a=o(7497),n=o(292),r=s.__importDefault(o(3382));t.default=a.connect(((e,t)=>({expressions:n.getMatchedExpressions(e.lists,t.storeId,t.url)})))((e=>{const{expressions:t,storeId:o}=e;return i.jsx(r.default,{expressionColumnTitle:browser.i18n.getMessage("matchedDomainExpressionText"),expressions:t,storeId:o,emptyElement:i.jsx("span",Object.assign({style:{fontStyle:"italic",width:"100%"}},{children:i.jsx("div",Object.assign({className:"alert alert-primary",role:"alert",style:{marginBottom:0}},{children:i.jsx("i",{children:browser.i18n.getMessage("noRulesText")},void 0)}),void 0)}),void 0)},void 0)}))},7325:(e,t,o)=>{const s=o(3940),i=o(7557),a=s.__importDefault(o(3961)),n=o(7497),r=o(9477),l=o(292),d=s.__importDefault(o(877)),c=s.__importDefault(o(5461)),u=s.__importDefault(o(2921));c.default(),function(){s.__awaiter(this,void 0,void 0,(function*(){let e=yield r.createUIStore();for(;!e.getState();)yield l.sleep(250),e=yield r.createUIStore();const t=document.createElement("div");document.body.appendChild(t),l.isChrome(e.getState().cache)&&(yield new Promise((e=>setTimeout(e,100)))),a.default.render(i.jsx(n.Provider,Object.assign({store:e},{children:i.jsx(d.default,{children:i.jsx(u.default,{},void 0)},void 0)}),void 0),t)}))}()},7190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.animateFlash=void 0,t.animateFlash=(e,t)=>{if(e)try{const o=(t?"success":"failure")+"Animated";e.classList.add(o),setTimeout((()=>{e.classList.remove(o)}),1500)}catch(e){}}},9477:e=>{e.exports=ReduxWebExt}},o={};function s(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={exports:{}};return t[e].call(a.exports,a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,o,i,a)=>{if(!o){var n=1/0;for(c=0;c<e.length;c++){for(var[o,i,a]=e[c],r=!0,l=0;l<o.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((e=>s.O[e](o[l])))?o.splice(l--,1):(r=!1,a<n&&(n=a));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={42:0,352:0,314:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var i,a,[n,r,l]=o,d=0;if(n.some((t=>0!==e[t]))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var c=l(s)}for(t&&t(o);d<n.length;d++)a=n[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},o=self.webpackChunkcookie_autodelete=self.webpackChunkcookie_autodelete||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=s.O(void 0,[481,94],(()=>s(7325)));i=s.O(i)})();