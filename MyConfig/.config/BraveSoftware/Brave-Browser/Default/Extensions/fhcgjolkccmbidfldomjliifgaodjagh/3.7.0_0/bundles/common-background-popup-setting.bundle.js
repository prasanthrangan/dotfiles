/*! For license information please see common-background-popup-setting.bundle.js.LICENSE.txt */
(self.webpackChunkcookie_autodelete=self.webpackChunkcookie_autodelete||[]).push([[481],{398:function(e){!function(t){"use strict";const o="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${o}\\.${o}\\.${o}\\.${o}$`,"i"),threeOctet:new RegExp(`^${o}\\.${o}\\.${o}$`,"i"),twoOctet:new RegExp(`^${o}\\.${o}$`,"i"),longValue:new RegExp(`^${o}$`,"i")},n=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),a="%[0-9a-z]{1,}",s="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(a,"i"),native:new RegExp(`^(::)?(${s})?([0-9a-f]+)?(::)?(${a})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${o}\\.${o}\\.${o}\\.${o}(${a})?)$`,"i"),transitional:new RegExp(`^((?:${s})|(?:::)(?:${s})?)${o}\\.${o}\\.${o}\\.${o}(${a})?$`,"i")};function l(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;let o,r,n=0,i=-1,a=(e.match(c.zoneIndex)||[])[0];for(a&&(a=a.substring(1),e=e.replace(/%.+$/,""));(i=e.indexOf(":",i+1))>=0;)n++;if("::"===e.substr(0,2)&&n--,"::"===e.substr(-2,2)&&n--,n>t)return null;for(r=t-n,o=":";r--;)o+="0:";return":"===(e=e.replace("::",o))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){const t=e.split(":"),o=[];for(let e=0;e<t.length;e++)o.push(parseInt(t[e],16));return o}(),zoneId:a}}function u(e,t,o,r){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let n,i=0;for(;r>0;){if(n=o-r,n<0&&(n=0),e[i]>>n!=t[i]>>n)return!1;r-=o,i+=1}return!0}function d(e){if(i.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(n.test(e))return parseInt(e,8);throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function p(e,t){for(;e.length<t;)e=`0${e}`;return e}const f={};f.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");let t,o;for(t=0;t<e.length;t++)if(o=e[t],!(0<=o&&o<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){let o;if(void 0===t&&(o=e,e=o[0],t=o[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const o={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let r,n,i;for(r=3;r>=0;r-=1){if(n=this.octets[r],!(n in o))return null;if(i=o[n],t&&0!==i)return null;8!==i&&(t=!0),e+=i}return 32-e},e.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return f.IPv6.parse(`::ffff:${this.toString()}`)},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),f.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),o=t[0].toByteArray(),r=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),n=[];let i=0;for(;i<4;)n.push(parseInt(o[i],10)|255^parseInt(r[i],10)),i++;return new this(n)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.isIPv4=function(e){return null!==this.parser(e)},f.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(e){return!1}},f.IPv4.isValidFourPartDecimal=function(e){return!(!f.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},f.IPv4.networkAddressFromCIDR=function(e){let t,o,r,n,i;try{for(t=this.parseCIDR(e),r=t[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),n=[],o=0;o<4;)n.push(parseInt(r[o],10)&parseInt(i[o],10)),o++;return new this(n)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.parse=function(e){const t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},f.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const o=[this.parse(t[1]),e];return Object.defineProperty(o,"toString",{value:function(){return this.join("/")}}),o}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},f.IPv4.parser=function(e){let t,o,n;if(t=e.match(r.fourOctet))return function(){const e=t.slice(1,6),r=[];for(let t=0;t<e.length;t++)o=e[t],r.push(d(o));return r}();if(t=e.match(r.longValue)){if(n=d(t[1]),n>4294967295||n<0)throw new Error("ipaddr: address outside defined range");return function(){const e=[];let t;for(t=0;t<=24;t+=8)e.push(n>>t&255);return e}().reverse()}return(t=e.match(r.twoOctet))?function(){const e=t.slice(1,4),o=[];if(n=d(e[1]),n>16777215||n<0)throw new Error("ipaddr: address outside defined range");return o.push(d(e[0])),o.push(n>>16&255),o.push(n>>8&255),o.push(255&n),o}():(t=e.match(r.threeOctet))?function(){const e=t.slice(1,5),o=[];if(n=d(e[2]),n>65535||n<0)throw new Error("ipaddr: address outside defined range");return o.push(d(e[0])),o.push(d(e[1])),o.push(n>>8&255),o.push(255&n),o}():null},f.IPv4.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");const t=[0,0,0,0];let o=0;const r=Math.floor(e/8);for(;o<r;)t[o]=255,o++;return r<4&&(t[r]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},f.IPv6=function(){function e(e,t){let o,r;if(16===e.length)for(this.parts=[],o=0;o<=14;o+=2)this.parts.push(e[o]<<8|e[o+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(o=0;o<this.parts.length;o++)if(r=this.parts[o],!(0<=r&&r<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){let o;if(void 0===t&&(o=e,e=o[0],t=o[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const o={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let r,n;for(let i=7;i>=0;i-=1){if(r=this.parts[i],!(r in o))return null;if(n=o[r],t&&0!==n)return null;16!==n&&(t=!0),e+=n}return 128-e},e.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){let e;const t=[],o=this.parts;for(let r=0;r<o.length;r++)e=o[r],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(p(this.parts[t].toString(16),4));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const e=this.parts.slice(-2),t=e[0],o=e[1];return new f.IPv4([t>>8,255&t,o>>8,255&o])},e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g,t=this.toNormalizedString();let o,r=0,n=-1;for(;o=e.exec(t);)o[0].length>n&&(r=o.index,n=o[0].length);return n<0?t:`${t.substring(0,r)}::${t.substring(r+n)}`},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),f.IPv6.isIPv6=function(e){return null!==this.parser(e)},f.IPv6.isValid=function(e){if("string"==typeof e&&-1===e.indexOf(":"))return!1;try{const t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(e){return!1}},f.IPv6.parse=function(e){const t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},f.IPv6.parseCIDR=function(e){let t,o,r;if((o=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(o[2]),t>=0&&t<=128))return r=[this.parse(o[1]),t],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},f.IPv6.parser=function(e){let t,o,r,n,i,a;if(r=e.match(c.deprecatedTransitional))return this.parser(`::ffff:${r[1]}`);if(c.native.test(e))return l(e,8);if((r=e.match(c.transitional))&&(a=r[6]||"",t=l(r[1].slice(0,-1)+a,6),t.parts)){for(i=[parseInt(r[2]),parseInt(r[3]),parseInt(r[4]),parseInt(r[5])],o=0;o<i.length;o++)if(n=i[o],!(0<=n&&n<=255))return null;return t.parts.push(i[0]<<8|i[1]),t.parts.push(i[2]<<8|i[3]),{parts:t.parts,zoneId:t.zoneId}}return null},f.fromByteArray=function(e){const t=e.length;if(4===t)return new f.IPv4(e);if(16===t)return new f.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},f.isValid=function(e){return f.IPv6.isValid(e)||f.IPv4.isValid(e)},f.parse=function(e){if(f.IPv6.isValid(e))return f.IPv6.parse(e);if(f.IPv4.isValid(e))return f.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},f.parseCIDR=function(e){try{return f.IPv6.parseCIDR(e)}catch(t){try{return f.IPv4.parseCIDR(e)}catch(e){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},f.process=function(e){const t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},f.subnetMatch=function(e,t,o){let r,n,i,a;for(n in null==o&&(o="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,n))for(i=t[n],!i[0]||i[0]instanceof Array||(i=[i]),r=0;r<i.length;r++)if(a=i[r],e.kind()===a[0].kind()&&e.match.apply(e,a))return n;return o},e.exports?e.exports=f:t.ipaddr=f}(this)},9618:e=>{e.exports=function(e,t,o){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,n=Math.ceil(1.6*r*o/t.length),i="";;)for(var a=n,s=e(a);a--;)if((i+=t[s[a]&r]||"").length===+o)return i}},3987:(e,t,o)=>{"use strict";e.exports=o(9183)},5575:(e,t,o)=>{"use strict";var r,n,i,a=o(6530),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function c(){i=!1}function l(e){if(e){if(e!==r){if(e.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,o){return t!==o.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,c()}}else r!==s&&(r=s,c())}function u(){return i||(i=function(){r||l(s);for(var e,t=r.split(""),o=[],n=a.nextValue();t.length>0;)n=a.nextValue(),e=Math.floor(n*t.length),o.push(t.splice(e,1)[0]);return o.join("")}())}e.exports={get:function(){return r||s},characters:function(e){return l(e),r},seed:function(e){a.seed(e),n!==e&&(c(),n=e)},lookup:function(e){return u()[e]},shuffled:u}},2321:(e,t,o)=>{"use strict";var r,n,i=o(1154);o(5575),e.exports=function(e){var t="",o=Math.floor(.001*(Date.now()-1567752802062));return o===n?r++:(r=0,n=o),t+=i(7),t+=i(e),r>0&&(t+=i(r)),t+i(o)}},1154:(e,t,o)=>{"use strict";var r=o(5575),n=o(1171),i=o(9618);e.exports=function(e){for(var t,o=0,a="";!t;)a+=i(n,r.get(),1),t=e<Math.pow(16,o+1),o++;return a}},9183:(e,t,o)=>{"use strict";var r=o(5575),n=o(2321),i=o(2612),a=o(9594)||0;function s(){return n(a)}e.exports=s,e.exports.generate=s,e.exports.seed=function(t){return r.seed(t),e.exports},e.exports.worker=function(t){return a=t,e.exports},e.exports.characters=function(e){return void 0!==e&&r.characters(e),r.shuffled()},e.exports.isValid=i},2612:(e,t,o)=>{"use strict";var r=o(5575);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},1171:e=>{"use strict";var t,o="object"==typeof window&&(window.crypto||window.msCrypto);t=o&&o.getRandomValues?function(e){return o.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],o=0;o<e;o++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},6530:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},9594:e=>{"use strict";e.exports=0},3940:(e,t,o)=>{"use strict";o.r(t),o.d(t,{__assign:()=>i,__asyncDelegator:()=>y,__asyncGenerator:()=>v,__asyncValues:()=>C,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>x,__classPrivateFieldSet:()=>k,__createBinding:()=>p,__decorate:()=>s,__exportStar:()=>f,__extends:()=>n,__generator:()=>d,__importDefault:()=>D,__importStar:()=>I,__makeTemplateObject:()=>S,__metadata:()=>l,__param:()=>c,__read:()=>h,__rest:()=>a,__spread:()=>m,__spreadArrays:()=>w,__values:()=>g});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},r(e,t)};function n(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var i=function(){return i=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};function a(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}function s(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a}function c(e,t){return function(o,r){t(o,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,o,r){return new(o||(o=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var o,r,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function p(e,t,o,r){void 0===r&&(r=o),e[r]=t[o]}function f(e,t){for(var o in e)"default"===o||t.hasOwnProperty(o)||(t[o]=e[o])}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function w(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,n++)r[n]=i[a];return r}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=o.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(o,r){i.push([e,t,o,r])>1||s(e,t)}))})}function s(e,t){try{(o=n[e](t)).value instanceof b?Promise.resolve(o.value.v).then(c,l):u(i[0][2],o)}catch(e){u(i[0][3],e)}var o}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function y(e){var t,o;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,n){t[r]=e[r]?function(t){return(o=!o)?{value:b(e[r](t)),done:"return"===r}:n?n(t):t}:n}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,o=e[Symbol.asyncIterator];return o?o.call(e):(e=g(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(t){return new Promise((function(r,n){!function(e,t,o,r){Promise.resolve(r).then((function(t){e({value:t,done:o})}),t)}(r,n,(t=e[o](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function D(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function k(e,t,o){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,o),o}},4719:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cookieCleanup=t.cookieCleanupUI=t.validateSettings=t.resetAll=t.resetSettings=t.updateSetting=t.resetCookieDeletedCounter=t.incrementCookieDeletedCounter=t.removeActivity=t.clearActivities=t.addActivity=t.removeList=t.updateExpression=t.removeExpression=t.clearExpressions=t.addExpression=t.removeListUI=t.updateExpressionUI=t.removeExpressionUI=t.clearExpressionsUI=t.addExpressionUI=void 0;const r=o(3940),n=o(3185),i=o(7459),a=o(292),s=o(3555);t.addExpressionUI=e=>({payload:e,type:"ADD_EXPRESSION"}),t.clearExpressionsUI=e=>({payload:e,type:"CLEAR_EXPRESSIONS"}),t.removeExpressionUI=e=>({payload:e,type:"REMOVE_EXPRESSION"}),t.updateExpressionUI=e=>({payload:e,type:"UPDATE_EXPRESSION"}),t.removeListUI=e=>({payload:e,type:"REMOVE_LIST"}),t.addExpression=e=>(t,o)=>{const r=a.getStoreId(o(),e.storeId),i=a.getContainerExpressionDefault(o(),r,e.listType);t({payload:Object.assign(Object.assign({},e),{cleanAllCookies:void 0!==e.cleanAllCookies?e.cleanAllCookies:i.cleanAllCookies,cleanSiteData:e.cleanSiteData?e.cleanSiteData:i.cleanSiteData||[],storeId:r}),type:"ADD_EXPRESSION"}),n.checkIfProtected(o())},t.clearExpressions=e=>(t,o)=>{t({payload:e,type:"CLEAR_EXPRESSIONS"}),n.checkIfProtected(o())},t.removeExpression=e=>(t,o)=>{t({payload:Object.assign(Object.assign({},e),{storeId:a.getStoreId(o(),e.storeId)}),type:"REMOVE_EXPRESSION"}),n.checkIfProtected(o())},t.updateExpression=e=>(t,o)=>{const r=a.getStoreId(o(),e.storeId);t({payload:Object.assign(Object.assign({},e),{storeId:r}),type:"UPDATE_EXPRESSION"}),e.expression===`_Default:${e.listType}`&&"default"===r&&e.cleanSiteData&&(e.cleanSiteData.includes("LocalStorage")?a.getSetting(o(),`${e.listType.toLowerCase()}CleanLocalstorage`)||t({payload:{name:`${e.listType.toLowerCase()}CleanLocalstorage`,value:!0},type:"UPDATE_SETTING"}):a.getSetting(o(),`${e.listType.toLowerCase()}CleanLocalstorage`)&&t({payload:{name:`${e.listType.toLowerCase()}CleanLocalstorage`,value:!1},type:"UPDATE_SETTING"})),n.checkIfProtected(o())},t.removeList=e=>(t,o)=>{t({payload:e,type:"REMOVE_LIST"}),n.checkIfProtected(o())},t.addActivity=e=>({payload:e,type:"ADD_ACTIVITY_LOG"}),t.clearActivities=()=>({type:"CLEAR_ACTIVITY_LOG"}),t.removeActivity=e=>({payload:e,type:"REMOVE_ACTIVITY_LOG"}),t.incrementCookieDeletedCounter=e=>({payload:e,type:"INCREMENT_COOKIE_DELETED_COUNTER"}),t.resetCookieDeletedCounter=()=>({type:"RESET_COOKIE_DELETED_COUNTER"}),t.updateSetting=e=>({payload:e,type:"UPDATE_SETTING"}),t.resetSettings=()=>({type:"RESET_SETTINGS"}),t.resetAll=()=>({type:"RESET_ALL"}),t.validateSettings=()=>(e,t)=>{const{cache:o,settings:r}=t(),n=s.initialState.settings,i=Object.keys(r),c=Object.keys(n);function l(t){t&&t.value&&e({payload:Object.assign(Object.assign({},t),{value:!1}),type:"UPDATE_SETTING"})}i.forEach((t=>{void 0!==n[t]&&Object.keys(r[t]).length!==Object.keys(n[t]).length&&e({payload:Object.assign(Object.assign({},n[t]),{value:r[t].value}),type:"UPDATE_SETTING"})})),i.length!==c.length&&c.forEach((t=>{void 0===r[t]&&e({payload:n[t],type:"UPDATE_SETTING"})})),a.isChrome(o)&&l(r.contextualIdentities),a.isFirefoxAndroid(o)&&(l(r.showNumOfCookiesInIcon),l(r.localstorageCleanup),l(r.localStorageCleanup),l(r.contextualIdentities),l(r.contextMenus)),r.delayBeforeClean.value<1&&e({payload:{name:"delayBeforeClean",value:1},type:"UPDATE_SETTING"}),r.delayBeforeClean.value>2147483&&e({payload:{name:"delayBeforeClean",value:2147483},type:"UPDATE_SETTING"}),!r.showNumOfCookiesInIcon.value&&r.keepDefaultIcon.value&&l(r.keepDefaultIcon)},t.cookieCleanupUI=e=>({payload:e,type:"COOKIE_CLEANUP"}),t.cookieCleanup=(e={greyCleanup:!1,ignoreOpenTabs:!1})=>(o,n)=>r.__awaiter(void 0,void 0,void 0,(function*(){const r=yield i.cleanCookiesOperation(n(),e);if(!r)return;const{setOfDeletedDomainCookies:s,cachedResults:c}=r,{browsingDataCleanup:l,recentlyCleaned:u,siteDataCleaned:d}=c;if(0!==u&&a.getSetting(n(),"statLogging")&&o(t.incrementCookieDeletedCounter(u)),(0!==u||d)&&a.getSetting(n(),"statLogging")&&o(t.addActivity(c)),a.getSetting(n(),"showNotificationAfterCleanup")){const e=new Set;Object.values(c.storeIds).forEach((t=>{t.forEach((t=>e.add(t.cookie.hostname)))}));const t=new Set;if(l){for(const e of Object.values(l))e&&0!==e.length&&e.forEach((e=>t.add(e)));t.forEach((t=>e.add(t)))}if(s.length>0){const t=browser.i18n.getMessage("notificationContent",[u.toString(),e.size.toString(),s.slice(0,5).join(", ")]);a.showNotification({duration:a.getSetting(n(),"notificationOnScreen"),msg:`${t} ...`,title:browser.i18n.getMessage("notificationTitle")}),yield a.sleep(750)}d&&l&&t.size>0&&(yield a.showNotification({duration:a.getSetting(n(),"notificationOnScreen"),msg:browser.i18n.getMessage("activityLogSiteDataDomainsText",[browser.i18n.getMessage("siteDataText"),Array.from(t).join(", ")]),title:browser.i18n.getMessage("notificationTitleSiteData")}))}}))},3555:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0,t.initialState={lists:{},cookieDeletedCounterTotal:0,cookieDeletedCounterSession:0,settings:{activeMode:{name:"activeMode",value:!1},cacheCleanup:{name:"cacheCleanup",value:!1},cleanCookiesFromOpenTabsOnStartup:{name:"cleanCookiesFromOpenTabsOnStartup",value:!1},cleanExpiredCookies:{name:"cleanExpiredCookies",value:!1},contextMenus:{name:"contextMenus",value:!0},contextualIdentities:{name:"contextualIdentities",value:!1},contextualIdentitiesAutoRemove:{name:"contextualIdentitiesAutoRemove",value:!0},debugMode:{name:"debugMode",value:!1},delayBeforeClean:{name:"delayBeforeClean",value:15},discardedCleanup:{name:"discardedCleanup",value:!1},domainChangeCleanup:{name:"domainChangeCleanup",value:!1},enableGreyListCleanup:{name:"enableGreyListCleanup",value:!0},enableNewVersionPopup:{name:"enableNewVersionPopup",value:!1},greyCleanLocalstorage:{id:"DEPRECATED - use default expressions",name:"greyCleanLocalstorage",value:!1},indexedDBCleanup:{name:"indexedDBCleanup",value:!1},keepDefaultIcon:{name:"keepDefaultIcon",value:!1},localstorageCleanup:{id:"DEPRECATED - use localStorageCleanup",name:"localstorageCleanup",value:!1},localStorageCleanup:{name:"localStorageCleanup",value:!1},manualNotifications:{name:"manualNotifications",value:!0},notificationOnScreen:{name:"notificationOnScreen",value:3},pluginDataCleanup:{name:"pluginDataCleanup",value:!1},serviceWorkersCleanup:{name:"serviceWorkersCleanup",value:!1},showNotificationAfterCleanup:{name:"showNotificationAfterCleanup",value:!0},showNumOfCookiesInIcon:{name:"showNumOfCookiesInIcon",value:!0},sizePopup:{name:"sizePopup",value:16},sizeSetting:{name:"sizeSetting",value:16},statLogging:{name:"statLogging",value:!0},whiteCleanLocalstorage:{id:"DEPRECATED - use default expressions",name:"whiteCleanLocalstorage",value:!1}},activityLog:[],cache:{}}},3185:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIfProtected=t.setGlobalIcon=t.showNumberOfCookiesInTitle=t.showNumberOfCookiesInIcon=void 0;const r=o(3940),n=o(292);t.showNumberOfCookiesInIcon=(e,t)=>{browser.browserAction.setBadgeText&&browser.browserAction.setBadgeText({tabId:e.id,text:`${0===t?"":t.toString()}`}),browser.browserAction.setBadgeTextColor&&browser.browserAction.setBadgeTextColor({color:"white",tabId:e.id})},t.showNumberOfCookiesInTitle=(e,t)=>r.__awaiter(void 0,void 0,void 0,(function*(){const o=browser.runtime.getManifest(),r=`${"android"===t.platformOS?"CAD":o.name} ${o.version}`,n=/\[(.*)] \((\d*)\)/.exec(yield browser.browserAction.getTitle({tabId:e.id})),i=t.cookieLength||n&&n[2]||0,a=t.listType||n&&n[1]||"NO LIST";browser.browserAction.setTitle({tabId:e.id,title:`${r} [${a}] (${i})`})}));const i=(e,t="default")=>{browser.browserAction.setBadgeBackgroundColor&&browser.browserAction.setBadgeBackgroundColor({color:{default:"blue",red:"red",yellow:"#e6a32e"}[t],tabId:e.id})},a=(e,t=!1,o="default")=>{browser.browserAction.setIcon&&browser.browserAction.setIcon({path:{48:`icons/icon_48${t||"default"===o?"":`_${o}`}.png`},tabId:e.id}),i(e,o)};t.setGlobalIcon=e=>r.__awaiter(void 0,void 0,void 0,(function*(){if(browser.browserAction.setIcon){yield browser.browserAction.setIcon({path:{48:`icons/icon_48${e?"":"_greyscale"}.png`}});const t=yield browser.tabs.query({windowType:"normal"});for(const o of t)o.id!==browser.tabs.TAB_ID_NONE&&(yield browser.browserAction.setIcon({path:{48:`icons/icon_48${e?"":"_greyscale"}.png`},tabId:o.id}))}})),t.checkIfProtected=(e,o,s)=>r.__awaiter(void 0,void 0,void 0,(function*(){const r=e.settings.activeMode.value;let c=[];o?c.push(o):c=yield browser.tabs.query({active:!0,windowType:"normal"}),c.forEach((o=>{const c=n.returnMatchedExpressionObject(e,o.cookieStoreId||"default",n.getHostname(o.url||""));if(c?t.showNumberOfCookiesInTitle(o,{platformOS:e.cache.platformOs,listType:c.listType,cookieLength:s}):t.showNumberOfCookiesInTitle(o,{platformOS:e.cache.platformOs,listType:"NO LIST",cookieLength:s}),!e.cache.platformOs||"android"!==e.cache.platformOs)if(c)switch(c.listType){case"WHITE":r?a(o):i(o);break;case"GREY":r?a(o,e.settings.keepDefaultIcon.value,"yellow"):i(o,"yellow");break;default:r?a(o,e.settings.keepDefaultIcon.value,"red"):i(o,"red")}else void 0!==s&&0===s?r?a(o):i(o):r?a(o,e.settings.keepDefaultIcon.value,"red"):i(o,"red")}))}))},7459:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanCookiesOperation=t.returnContainersOfOpenTabDomains=t.filterSiteData=t.parseCleanSiteData=t.cleanSiteData=t.otherBrowsingDataCleanup=t.removeSiteData=t.clearSiteDataForThisDomain=t.clearLocalStorageForThisDomain=t.clearCookiesForThisDomain=t.cleanCookies=t.isSafeToClean=t.prepareCookie=void 0;const r=o(3940),n=o(292);t.prepareCookie=(e,t=!1)=>{const o=Object.assign(Object.assign({},e),{hostname:"",mainDomain:"",preparedCookieDomain:n.prepareCookieDomain(e)});return o.preparedCookieDomain.startsWith("file:")?(o.hostname=o.preparedCookieDomain,o.mainDomain=o.preparedCookieDomain):(o.hostname=n.getHostname(o.preparedCookieDomain),o.mainDomain=n.extractMainDomain(o.hostname)),n.cadLog({msg:"CleanupService.prepareCookie: results",x:{domain:e.domain,path:e.path,preparedCookieDomain:o.preparedCookieDomain,mainDomain:o.mainDomain,hostname:o.hostname}},t),o},t.isSafeToClean=(e,t,o)=>{const r=n.getSetting(e,"debugMode"),{mainDomain:i,storeId:a,hostname:s,name:c,expirationDate:l,firstPartyDomain:u,session:d}=t,p={mainDomain:i,storeId:a,hostname:s,name:c,expirationDate:l,firstPartyDomain:u,session:d},{greyCleanup:f,openTabDomains:g,ignoreOpenTabs:h}=o,m=h?"reasonTabsWereIgnored":"reasonTabsWereNotIgnored";if(n.cadLog({msg:"CleanupService.isSafeToClean:  Properties Debug",x:{partialCookieInfo:p,cleanupProperties:o,openTabStatus:m}},r),n.getSetting(e,"cleanExpiredCookies")){const e=Math.ceil(Date.now()/1e3);if(l&&l<e)return n.cadLog({msg:`CleanupService.isSafeToClean:  Cookie Expired since ${l}.  Date.now is ${e}`,x:p},r),{cached:!1,cleanCookie:!0,cookie:t,openTabStatus:m,reason:"reasonCleanCookieExpired"}}if(g[a]&&g[a].includes(i))return n.cadLog({msg:`CleanupService.isSafeToClean:  mainDomain found in openTabsDomain[${a}] - not cleaning.`,x:{partialCookieInfo:p,openTabsInStoreId:g[a]}},r),{cached:!1,cleanCookie:!1,cookie:t,openTabStatus:m,reason:"reasonKeepOpenTab"};const w=n.returnMatchedExpressionObject(e,a,s);return w&&t.name===n.CADCOOKIENAME&&("WHITE"===w.listType||"GREY"===w.listType&&(f||w.cleanSiteData&&0!==w.cleanSiteData.length))?(n.cadLog({msg:"CleanupService.isSafeToClean:  Internal CAD Cookie.  Removing Cookie to trigger browsingData cleanups.",x:{partialCookieInfo:p,cleanSiteData:w.cleanSiteData}},r),{cached:!1,cleanCookie:!0,cookie:t,expression:w,openTabStatus:m,reason:f?"reasonCADSiteDataCookieRestart":"reasonCADSiteDataCookie"}):f&&!w?(n.cadLog({msg:"CleanupService.isSafeToClean:  unmatched and greyCleanup.  Safe to Clean",x:p},r),{cached:!1,cleanCookie:!0,cookie:t,openTabStatus:m,reason:"reasonCleanStartupNoList"}):f&&w&&"GREY"===w.listType&&(n.undefinedIsTrue(w.cleanAllCookies)||w.cookieNames&&!w.cookieNames.includes(t.name))?(n.cadLog({msg:"CleanupService.isSafeToClean:  greyCleanup - matching Expression and cookie name was unchecked.  Safe to Clean.",x:{partialCookieInfo:p,matchedExpression:w}},r),{cached:!1,cleanCookie:!0,cookie:t,expression:w,openTabStatus:m,reason:"reasonCleanGreyList"}):w?w&&!n.undefinedIsTrue(w.cleanAllCookies)&&w.cookieNames&&!w.cookieNames.includes(t.name)?(n.cadLog({msg:"CleanupService.isSafeToClean:  matched Expression but unchecked cookie name.  Safe to Clean.",x:{partialCookieInfo:p,matchedExpression:w}},r),{cached:!1,cleanCookie:!0,cookie:t,expression:w,openTabStatus:m,reason:"reasonCleanCookieName"}):(n.cadLog({msg:"CleanupService.isSafeToClean:  Matched Expression and cookie name.  Cookie stays!",x:{partialCookieInfo:p,matchedExpression:w}},r),{cached:!1,cleanCookie:!1,cookie:t,expression:w,openTabStatus:m,reason:"reasonKeep"}):(n.cadLog({msg:"CleanupService.isSafeToClean:  unmatched Expression.  Safe to Clean.",x:p},r),{cached:!1,cleanCookie:!0,cookie:t,openTabStatus:m,reason:"reasonCleanNoList"})},t.cleanCookies=(e,t)=>r.__awaiter(void 0,void 0,void 0,(function*(){const o=[];t.forEach((t=>{const r=t.cookie,i=n.returnOptionalCookieAPIAttributes(e,{firstPartyDomain:r.firstPartyDomain,storeId:r.storeId}),a=Object.assign(Object.assign({},i),{name:r.name,url:r.preparedCookieDomain});n.cadLog({msg:"CleanupService.cleanCookies: Cookie being removed through browser.cookies.remove via Promises:",x:a},n.getSetting(e,"debugMode"));const s=browser.cookies.remove(a);o.push(s)})),yield Promise.all(o).catch((e=>{throw e}))})),t.clearCookiesForThisDomain=(e,t)=>r.__awaiter(void 0,void 0,void 0,(function*(){const o=n.getHostname(t.url),r=(yield browser.cookies.getAll(n.returnOptionalCookieAPIAttributes(e,{domain:o,storeId:t.cookieStoreId}))).filter((e=>e.name!==n.CADCOOKIENAME));if(r.length>0){let t=0;for(const o of r)(yield browser.cookies.remove(n.returnOptionalCookieAPIAttributes(e,{firstPartyDomain:o.firstPartyDomain,name:o.name,storeId:o.storeId,url:n.prepareCookieDomain(o)})))&&(t+=1);return n.showNotification({duration:n.getSetting(e,"notificationOnScreen"),msg:`${browser.i18n.getMessage("manualCleanSuccess",[browser.i18n.getMessage("cookiesText"),o])}\n${browser.i18n.getMessage("manualCleanRemoved",[t.toString(),r.length.toString()])}`},n.getSetting(e,"manualNotifications")),t>0}return n.showNotification({duration:n.getSetting(e,"notificationOnScreen"),msg:`${browser.i18n.getMessage("manualCleanNothing",[browser.i18n.getMessage("cookiesText"),o])}`},n.getSetting(e,"manualNotifications")),r.length>0})),t.clearLocalStorageForThisDomain=(e,t)=>r.__awaiter(void 0,void 0,void 0,(function*(){try{let o=0,r=0;return(yield browser.tabs.executeScript(void 0,{code:"var cad_r = {local: window.localStorage.length, session: window.sessionStorage.length};window.localStorage.clear();window.sessionStorage.clear();cad_r;"})).forEach((e=>{o+=e.local,r+=e.session})),n.showNotification({duration:n.getSetting(e,"notificationOnScreen"),msg:`${browser.i18n.getMessage("manualCleanSuccess",[browser.i18n.getMessage("localStorageText"),n.getHostname(t.url)])}\n${browser.i18n.getMessage("removeStorageCount",[o.toString(),browser.i18n.getMessage("localStorageText")])}\n${browser.i18n.getMessage("removeStorageCount",[r.toString(),browser.i18n.getMessage("sessionStorageText")])}`},n.getSetting(e,"manualNotifications")),!0}catch(o){return o instanceof Error&&n.throwErrorNotification(o,n.getSetting(e,"notificationOnScreen")),yield n.sleep(750),n.showNotification({duration:n.getSetting(e,"notificationOnScreen"),msg:`${browser.i18n.getMessage("manualCleanNothing",[browser.i18n.getMessage("localStorageText"),n.getHostname(t.url)])}`}),!1}})),t.clearSiteDataForThisDomain=(e,o,i)=>r.__awaiter(void 0,void 0,void 0,(function*(){if(""===i.trim())return!1;const r=n.getSetting(e,"debugMode");n.cadLog({msg:`CleanupService.clearSiteDataForThisDomain: Received ${o} clean request for ${i}.`},r);const a=n.prepareCleanupDomains(i,e.cache.browserDetect);if("All"===o){const o=[];for(const i of n.SITEDATATYPES)yield t.removeSiteData(e,i,e.cache.browserDetect,a,r,!1),o.push(browser.i18n.getMessage(`${n.siteDataToBrowser(i)}Text`));n.showNotification({duration:n.getSetting(e,"notificationOnScreen"),msg:browser.i18n.getMessage("activityLogSiteDataDomainsText",[o.join(", "),a.join(", ")]),title:browser.i18n.getMessage("notificationTitleSiteData")},n.getSetting(e,"manualNotifications"))}else yield t.removeSiteData(e,o,e.cache.browserDetect,a,r,!0);return!0})),t.removeSiteData=(e,t,o=browserDetect(),i,a,s=!1)=>r.__awaiter(void 0,void 0,void 0,(function*(){const r=(e=>{switch(e){case"Chrome":case"Opera":return"origins";default:return"hostnames"}})(o),c=n.siteDataToBrowser(t);n.cadLog({msg:`CleanupService.removeSiteData: Cleanup of ${r} in ${o} for ${c}:`,x:i},a);try{return yield browser.browsingData.remove({[r]:i},{[c]:!0}),n.showNotification({duration:n.getSetting(e,"notificationOnScreen"),msg:browser.i18n.getMessage("activityLogSiteDataDomainsText",[browser.i18n.getMessage(`${c}Text`),i.join(", ")]),title:browser.i18n.getMessage("notificationTitleSiteData")},s&&n.getSetting(e,"manualNotifications")),!0}catch(t){return n.cadLog({msg:`CleanupService.removeSiteData:  browser.browsingData.remove of ${r} for ${c} returned an error:`,type:"error",x:t},a),t instanceof Error&&n.throwErrorNotification(t,n.getSetting(e,"notificationOnScreen")),!1}})),t.otherBrowsingDataCleanup=(e,o)=>r.__awaiter(void 0,void 0,void 0,(function*(){const r=n.isChrome(e.cache),i=n.getSetting(e,"debugMode"),a={},s=Number.parseInt(e.cache.browserVersion);return n.getSetting(e,"cacheCleanup")&&(n.isFirefoxNotAndroid(e.cache)&&s>=78||r)&&(a.Cache=yield t.cleanSiteData(e,"Cache",o,e.cache.browserDetect,i)),n.getSetting(e,"indexedDBCleanup")&&(n.isFirefoxNotAndroid(e.cache)&&s>=77||r)&&(a.IndexedDB=yield t.cleanSiteData(e,"IndexedDB",o,e.cache.browserDetect,i)),n.getSetting(e,"localStorageCleanup")&&(n.isFirefoxNotAndroid(e.cache)&&s>=58||r)&&(a.LocalStorage=yield t.cleanSiteData(e,"LocalStorage",o,e.cache.browserDetect,i)),n.getSetting(e,"pluginDataCleanup")&&(n.isFirefoxNotAndroid(e.cache)&&s>=78||r)&&(a.PluginData=yield t.cleanSiteData(e,"PluginData",o,e.cache.browserDetect,i)),n.getSetting(e,"serviceWorkersCleanup")&&(n.isFirefoxNotAndroid(e.cache)&&s>=77||r)&&(a.ServiceWorkers=yield t.cleanSiteData(e,"ServiceWorkers",o,e.cache.browserDetect,i)),a})),t.cleanSiteData=(e,o,i,a=browserDetect(),s)=>r.__awaiter(void 0,void 0,void 0,(function*(){const r=i.filter((e=>t.filterSiteData(e,o,s))).map((e=>e.cookie.domain)).filter((e=>""!==e.trim())),c=[];for(const e of r)c.push(...n.prepareCleanupDomains(e,a));return c.length>0&&(yield t.removeSiteData(e,o,a,[...new Set(c)],s,!1))?r:[]})),t.parseCleanSiteData=e=>void 0!==e&&e,t.filterSiteData=(e,o,r=!1)=>{var i,a;const s="reasonKeepOpenTab"!==e.reason,c="reasonCleanNoList"===e.reason||"reasonCleanStartupNoList"===e.reason,l=""!==e.cookie.hostname.trim(),u=t.parseCleanSiteData(null===(a=null===(i=e.expression)||void 0===i?void 0:i.cleanSiteData)||void 0===a?void 0:a.includes(o)),d="reasonCADSiteDataCookieRestart"===e.reason||"reasonCleanGreyList"===e.reason,p=u||d,f=Object.assign(Object.assign({},e),{cookie:Object.assign(Object.assign({},e.cookie),{value:r?"***":e.cookie.value})});n.cadLog({msg:"CleanupService.filterSiteData: debug data.",x:{notProtectedByOpenTab:s,notInAnyLists:c,siteData:o,cleanSiteDataInExpression:u,isRestartCleanup:d,canCleanSiteData:p,nonBlankCookieHostName:l,notOpenTabAndCanClean:s&&p,CleanReasonObject:f}},r);const g=(c||s&&p)&&l;return n.cadLog({msg:`CleanupService.filterSiteData: ${o} cleanup returned ${g} for ${f.cookie.hostname}`},r),g},t.returnContainersOfOpenTabDomains=(e,t)=>r.__awaiter(void 0,void 0,void 0,(function*(){if(e)return{};const o=yield browser.tabs.query({windowType:"normal"}),r={};for(const e of o)if(n.isAWebpage(e.url)&&(!t||!e.discarded)){const t=e.cookieStoreId||(e.incognito?"1":"0");r[t]||(r[t]=new Set),r[t].add(n.extractMainDomain(n.getHostname(e.url)))}const i={};for(const e of Object.keys(r))i[e]=Array.from(r[e]);return i})),t.cleanCookiesOperation=(e,o={greyCleanup:!1,ignoreOpenTabs:!1})=>r.__awaiter(void 0,void 0,void 0,(function*(){const r=n.getSetting(e,"debugMode"),i={},a=new Set,s={dateTime:(new Date).toString(),recentlyCleaned:0,storeIds:{},browsingDataCleanup:{},siteDataCleaned:!1},c=["firefox-private","private","1"],l=yield t.returnContainersOfOpenTabDomains(o.ignoreOpenTabs,n.getSetting(e,"discardedCleanup")),u=Object.assign(Object.assign({},o),{openTabDomains:l}),d=new Set;switch(e.cache.browserDetect||browserDetect()){case"Firefox":d.add("default"),d.add("firefox-default"),(yield browser.extension.isAllowedIncognitoAccess())&&(d.add("firefox-private"),d.add("private"));break;case"Chrome":case"Opera":d.add("0"),(yield browser.extension.isAllowedIncognitoAccess())&&d.add("1")}if(n.getSetting(e,"contextualIdentities")){const e=yield browser.contextualIdentities.query({});for(const t of e)d.add(t.cookieStoreId)}const p=(yield browser.cookies.getAllCookieStores())||[];for(const t of p)!n.getSetting(e,"contextualIdentities")&&t.id.startsWith("firefox-container")||d.add(t.id);for(const o of d){let l=[];try{l=yield browser.cookies.getAll(n.returnOptionalCookieAPIAttributes(e,{storeId:o}))}catch(e){e instanceof Error&&n.cadLog({msg:`CleanupService.cleanCookiesOperation:  browser.cookies.getAll for id: ${o} threw an error.`,type:"error",x:e.message},!0)}if(!l||0===l.length)continue;const d=l.map((o=>t.isSafeToClean(e,t.prepareCookie(o,r),u)));if(r){const e=d.map((e=>Object.assign(Object.assign({},e),{cookie:Object.assign(Object.assign({},e.cookie),{value:"***"})})));n.cadLog({msg:"CleanupService.cleanCookiesOperation:  isSafeToCleanObjects Result",x:e},r)}const p=d.filter((e=>{const t=e.cleanCookie&&""!==e.cookie.hostname.trim();return n.cadLog({msg:`CleanupService.cleanCookiesOperation: Clean Cookies returned ${t} for ${e.cookie.hostname}`},r),t}));if(r){const e=p.map((e=>Object.assign(Object.assign({},e),{cookie:Object.assign(Object.assign({},e.cookie),{value:"***"})})));n.cadLog({msg:"CleanupService.cleanCookiesOperation:  Cookies markedForDeletion Result",x:e},r)}try{yield t.cleanCookies(e,p)}catch(t){n.cadLog({type:"error",x:t},!0),t instanceof Error&&n.throwErrorNotification(t,n.getSetting(e,"notificationOnScreen"))}const f=p.filter((e=>e.cookie.name!==n.CADCOOKIENAME));0!==f.length&&(s.storeIds[o]=f),s.recentlyCleaned+=f.length,f.forEach((t=>{a.add(n.getSetting(e,"contextualIdentities")?`${t.cookie.hostname} (${e.cache[t.cookie.storeId]})`:t.cookie.hostname)}));const g=yield t.otherBrowsingDataCleanup(e,d);if(!c.includes(o)&&g)for(const e of n.SITEDATATYPES)(g[e]||[]).length>0&&(s.siteDataCleaned=!0,i[e]=(i[e]||[]).concat(g[e].map((e=>n.trimDot(e)))))}for(const e of n.SITEDATATYPES)s.browsingDataCleanup[e]=i[e]?Array.from(new Set(i[e])):[];for(const e of c)delete s.storeIds[e];return{cachedResults:s,setOfDeletedDomainCookies:Array.from(a)}}))},292:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateExpressionDomain=t.undefinedIsTrue=t.trimDot=t.throwErrorNotification=t.sleep=t.siteDataToBrowser=t.showNotification=t.returnOptionalCookieAPIAttributes=t.returnMatchedExpressionObject=t.prepareCookieDomain=t.prepareCleanupDomains=t.parseCookieStoreId=t.matchIPInExpression=t.localFileToRegex=t.isFirstPartyIsolate=t.isFirefoxNotAndroid=t.isFirefoxAndroid=t.isFirefox=t.isChrome=t.isAWebpage=t.isAnIP=t.globExpressionToRegExp=t.getStoreId=t.getSetting=t.getSearchResults=t.getMatchedExpressions=t.getHostname=t.getContainerExpressionDefault=t.getAllCookiesForDomain=t.extractMainDomain=t.eventListenerActions=t.convertVersionToNumber=t.createPartialTabInfo=t.cadLog=t.SITEDATATYPES=t.CADCOOKIENAME=void 0;const r=o(3940),n=r.__importDefault(o(398)),i=r.__importDefault(o(3987));t.CADCOOKIENAME="CookieAutoDeleteBrowsingDataCleanup",t.SITEDATATYPES=["Cache","IndexedDB","LocalStorage","PluginData","ServiceWorkers"],t.cadLog=(e,t)=>{if(!e.msg||""===e.msg.trim())return;if(!t)return;const o=`CAD_${browser.runtime.getManifest().version}`,r=[console.debug,console.error,console.info,console.log,console.warn],n=["debug","error","info","log","warn"];let i=(e.type||"debug").toLowerCase();n.includes(i)||(console.error(`${o} - Invalid Console Output Type given [ ${i} ].  Using [debug] instead.`),i="debug");const a=typeof e.x;let s="";switch(a){case"boolean":case"number":case"string":s=e.x.toString();break;case"undefined":break;case"object":s=JSON.stringify(e.x,null,2);break;default:console.warn(`${o} - Received unexpected typeof [ ${a} ].  Attempting to display it...`),s=e.x.toString()}r[n.indexOf(i)](`${o} - ${i} - ${e.msg}\n${s}`)},t.createPartialTabInfo=e=>({cookieStoreId:e.cookieStoreId,discarded:e.discarded,id:e.id,incognito:e.incognito,status:e.status,url:e.url,windowId:e.windowId}),t.convertVersionToNumber=e=>e?parseInt(e.replace(/[.]/g,""),10):-1,t.eventListenerActions=(e,t,o)=>{if(e&&e.hasListener)switch(o){case"ADD":e.hasListener(t)||e.addListener(t);break;case"REMOVE":e.hasListener(t)&&e.removeListener(t)}},t.extractMainDomain=e=>{if(""===e)return"";if(e.startsWith("file://")||n.default.isValid(e))return e;const o=e.endsWith("."),r=t.trimDot(e).split("."),i=r.length,a=r[i-2];return i>2&&(2===a.length||["biz","com","edu","gov","ltd","mod","net","org","police","school"].includes(a)&&2===r[i-1].length)?`${r.slice(i-3).join(".")}${o?".":""}`:`${r.slice(i-2).join(".")}${o?".":""}`},t.getAllCookiesForDomain=(e,o)=>r.__awaiter(void 0,void 0,void 0,(function*(){if(!o.url||""===o.url)return;if(o.url.startsWith("about:")||o.url.startsWith("chrome:"))return;const r=t.getSetting(e,"debugMode"),n=t.createPartialTabInfo(o),{cookieStoreId:i,url:a}=o,s=t.getHostname(a);if(""===s)return void t.cadLog({msg:"Libs.getAllCookiesForDomain:  hostname parsed empty for tab url.",x:{partialTabInfo:n,hostname:s}},r);const c=[],l=t.extractMainDomain(s);if(s.startsWith("file:")){const o=yield browser.cookies.getAll(t.returnOptionalCookieAPIAttributes(e,{storeId:i})),a=new RegExp(s.slice(7));t.cadLog({msg:"Libs.getAllCookiesForDomain:  Local File Regex to rest on cookie.path",x:{partialTabInfo:n,hostname:s,regExp:a.toString()}},r),o.filter((e=>""===e.domain&&a.test(e.path))).forEach((e=>c.push(e)))}else if(yield t.isFirstPartyIsolate()){t.cadLog({msg:"Libs.getAllCookiesForDomain:  browser.cookies.getAll for domain (firstPartyIsolation).",x:{partialTabInfo:n,domain:s,firstPartyDomain:l}},r),(yield browser.cookies.getAll(t.returnOptionalCookieAPIAttributes(e,{domain:s,firstPartyDomain:l,storeId:i}))).forEach((e=>c.push(e)));const o=new URL(a),u=o.protocol.replace(":","");t.cadLog({msg:"Libs.getAllCookiesForDomain:  browser.cookies.getAll for domain (FirstPartyIsolation - use_site).",x:{partialTabInfo:n,domain:s,firstPartyDomain:`(${u},${l})`}},r),(yield browser.cookies.getAll(t.returnOptionalCookieAPIAttributes(e,{domain:s,firstPartyDomain:`(${u},${l})`,storeId:i}))).forEach((e=>c.push(e))),o.port&&(t.cadLog({msg:"Libs.getAllCookiesForDomain:  browser.cookies.getAll for domain (FirstPartyIsolation - use_site + port).",x:{partialTabInfo:n,domain:s,firstPartyDomain:`(${u},${l},${o.port})`}},r),(yield browser.cookies.getAll(t.returnOptionalCookieAPIAttributes(e,{domain:s,firstPartyDomain:`(${u},${l},${o.port})`,storeId:i}))).forEach((e=>c.push(e))))}else t.cadLog({msg:"Libs.getAllCookiesForDomain:  browser.cookies.getAll for domain.",x:{partialTabInfo:n,domain:s}},r),(yield browser.cookies.getAll(t.returnOptionalCookieAPIAttributes(e,{domain:s,storeId:i}))).forEach((e=>c.push(e)));return t.cadLog({msg:"Libs.getAllCookiesForDomain:  Filtered Cookie Count",x:{partialTabInfo:n,tabURL:o.url,hostname:s,cookieCount:c.length}},r),c})),t.getContainerExpressionDefault=(e,o,r)=>{const n=t=>e.lists[t]?e.lists[t].find((e=>e.listType===r&&e.expression===`_Default:${r}`)):void 0,i="default"!==o&&t.getSetting(e,"contextualIdentities")&&n("default")||{expression:"",listType:"WHITE",storeId:""};return n(o)||i},t.getHostname=e=>{if(!e)return"";if(e.startsWith("file:"))return e.slice(0,e.lastIndexOf("/"));try{const t=new URL(e).hostname.replace(/^www[a-z0-9]?\./,"");return t.startsWith("[")&&t.endsWith("]")?t.slice(1,-1):t}catch(e){return""}},t.getMatchedExpressions=(e,o,r,i=!1)=>{const a=e[o]||[];if(0===a.length||!r||0==r.trim().length)return a;let s=n.default.isValid(r)?n.default.process(r):void 0;return s&&"ipv4"==s.kind()&&!n.default.IPv4.isValidFourPartDecimal(r)&&(s=void 0),a.filter((e=>{const o=e.expression;if(s){const e=t.matchIPInExpression(o,s);if(void 0!==e)return e}return i?t.getSearchResults(o,r):new RegExp(t.globExpressionToRegExp(o)).test(r)}))},t.getSearchResults=(e,o)=>{try{const r=t.globExpressionToRegExp(o).slice(0,-1).toLowerCase(),n=e.toLowerCase(),i=n.slice(n.startsWith("*.")?2:0);return new RegExp(t.globExpressionToRegExp(e),"i").test(o)||new RegExp(t.globExpressionToRegExp(o),"i").test(e)||new RegExp(r,"i").test(e)||n.startsWith(r)||n.startsWith(o)||i.startsWith(o)||i.startsWith(r)||n.endsWith(r)||n.endsWith(o)||n.includes(r)}catch(e){return!1}},t.getSetting=(e,t)=>e.settings[t].value,t.getStoreId=(e,o)=>"firefox-default"===o||!t.getSetting(e,"contextualIdentities")&&"firefox-private"!==o&&t.isFirefox(e.cache)||t.isChrome(e.cache)&&"0"===o||"Opera"===e.cache.browserDetect&&"0"===o?"default":t.isChrome(e.cache)&&"1"===o?"private":o,t.globExpressionToRegExp=e=>{const t=e.trim();if("/"===t.slice(0,1)&&"/"===t.slice(-1))return t.slice(1,-1);const o=t.startsWith("*.");return`${`${o?"(^|.)":"^"}${t.slice(o?2:0)}`.replace(/[[\]\\/.]/g,"\\$&").replace(/\*/g,".*")}$`},t.isAnIP=e=>{if(!e)return!1;const o=t.getHostname(e);return n.default.isValid(o)},t.isAWebpage=e=>!!e&&!!(e.match(/^http:/)||e.match(/^https:/)||e.match(/^file:/)),t.isChrome=e=>Object.prototype.hasOwnProperty.call(e,"browserDetect")&&"Chrome"===e.browserDetect,t.isFirefox=e=>Object.prototype.hasOwnProperty.call(e,"browserDetect")&&"Firefox"===e.browserDetect,t.isFirefoxAndroid=e=>t.isFirefox(e)&&Object.prototype.hasOwnProperty.call(e,"platformOs")&&"android"===e.platformOs,t.isFirefoxNotAndroid=e=>t.isFirefox(e)&&Object.prototype.hasOwnProperty.call(e,"platformOs")&&"android"!==e.platformOs,t.isFirstPartyIsolate=()=>r.__awaiter(void 0,void 0,void 0,(function*(){return browser.cookies.getAll({domain:""}).then((()=>Promise.resolve(!1))).catch((e=>Promise.resolve(-1!==e.message.indexOf("firstPartyDomain"))))})),t.localFileToRegex=e=>""===e?"":e.startsWith("file:")||0===e.indexOf("/")?e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"):e,t.matchIPInExpression=(e,t)=>{if(n.default.isValid(e)){const o=n.default.process(e);if(t.kind()!==o.kind())return!1;let r=0;switch(o.kind()){case"ipv4":r=32;break;case"ipv6":r=128}return o.match(t,r)}const o=e.split("/");if(2===o.length&&n.default.isValid(o[0]))try{return t.match(n.default.parseCIDR(e))}catch(e){return!1}},t.parseCookieStoreId=(e,t)=>!e||t&&"firefox-default"===t?"default":t||"default",t.prepareCleanupDomains=(e,t=browserDetect())=>{if(""===e.trim())return[];const o=new RegExp(/^www[0-9a-z]?\./i),r=new RegExp(/^\./);let n=e.trim();const i=new Set;if(r.test(n)&&(n=n.slice(1)),i.add(n),i.add(`.${n}`),o.test(n)||(i.add(`www.${n}`),i.add(`.www.${n}`)),"Chrome"===t||"Opera"===t){const e=[];for(const t of i)e.push(`http://${t}`),e.push(`https://${t}`);return e}return Array.from(i)},t.prepareCookieDomain=e=>{let t=e.domain.trim();if(0===t.length&&0!==e.path.trim().length)return`file://${e.path}`;/^[0-9a-f]*:[0-9a-f:]+$/i.test(t)&&(t=`[${t}]`);const o=t.startsWith(".")?1:0;return`http${e.secure?"s":""}://${t.slice(o)}${e.path}`},t.returnMatchedExpressionObject=(e,o,r)=>t.getMatchedExpressions(e.lists,t.getStoreId(e,o),r)[0],t.returnOptionalCookieAPIAttributes=(e,o)=>{if(t.isFirefox(e.cache)&&!Object.prototype.hasOwnProperty.call(o,"firstPartyDomain"))return Object.assign(Object.assign({},o),{firstPartyDomain:void 0});if(!t.isFirefox(e.cache)){const{firstPartyDomain:e}=o;return r.__rest(o,["firstPartyDomain"])}return o},t.showNotification=(e,t=!0)=>{if(!t)return;const o=`CAD-notification-${i.default.generate()}`;browser.notifications.create(o,{iconUrl:browser.runtime.getURL("icons/icon_48.png"),message:e.msg,title:`CAD ${browser.runtime.getManifest().version} - ${e.title?e.title:browser.i18n.getMessage("manualActionNotification")}`,type:"basic"}),setTimeout((()=>{browser.notifications.clear(o)}),1e3*e.duration)},t.siteDataToBrowser=e=>`${e[0].toLowerCase()}${e.slice(1)}`,t.sleep=e=>new Promise((t=>setTimeout(t,e<250?250:e>2147483500?2147483500:e))),t.throwErrorNotification=(e,t)=>{const o=`CAD-notification-failed-${i.default.generate()}`;browser.notifications.create(o,{iconUrl:browser.runtime.getURL("icons/icon_red_48.png"),message:e.message,title:browser.i18n.getMessage("errorText"),type:"basic"}),setTimeout((()=>{browser.notifications.clear(o)}),1e3*t)},t.trimDot=e=>e.replace(/^[.]+|[.]+$/g,""),t.undefinedIsTrue=e=>void 0===e||e,t.validateExpressionDomain=e=>{const t=e.trim();if(!t)return browser.i18n.getMessage("inputErrorEmpty");if(t.startsWith("/")&&t.endsWith("/"))try{new RegExp(t.slice(1,-1))}catch(e){return browser.i18n.getMessage("inputErrorRegExp",[`${e}`])}else{if(t.startsWith("/"))return browser.i18n.getMessage("inputErrorSlashStartMissingEnd");if(t.endsWith("/"))return browser.i18n.getMessage("inputErrorSlashEndMissingStart");if(-1!==t.indexOf(","))return browser.i18n.getMessage("inputErrorComma")}return-1!==t.indexOf(" ")?browser.i18n.getMessage("inputErrorSpace"):""}}}]);