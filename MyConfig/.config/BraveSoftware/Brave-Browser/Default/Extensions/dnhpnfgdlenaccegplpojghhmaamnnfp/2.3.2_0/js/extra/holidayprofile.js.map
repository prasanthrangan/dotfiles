{"version":3,"file":"js/extra/holidayprofile.js","mappings":"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","sources":["webpack:///./src/js/Steam/holidayprofile.js"],"sourcesContent":["/* globals ANIMATION_TICK_RATE:writable, CAnimation:writable, $J */\r\n\r\nconst animationDefaults = {\r\n    \"height\": 130,\r\n    \"width\": 130,\r\n    \"fps\": 30\r\n};\r\n\r\nconst animations = [\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/ball_blink_1170_9_69.png\",\r\n        \"cols\": 9,\r\n        \"frames\": 69\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/ball_jump_650_5_25.png\",\r\n        \"cols\": 5,\r\n        \"frames\": 25\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/ball_wave_1170_9_78.png\",\r\n        \"cols\": 9,\r\n        \"frames\": 78\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/cupcake_blink_1040_8_60.png\",\r\n        \"cols\": 8,\r\n        \"frames\": 60\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/cupcake_jump_650_5_25.png\",\r\n        \"cols\": 5,\r\n        \"frames\": 25\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/cupcake_wave_1040_8_54.png\",\r\n        \"cols\": 8,\r\n        \"frames\": 54\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/monte_blink_1040_8_62.png\",\r\n        \"cols\": 8,\r\n        \"frames\": 62\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/monte_wave_1040_8_57.png\",\r\n        \"cols\": 8,\r\n        \"frames\": 57\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/runner_blink_1170_9_72.png\",\r\n        \"cols\": 9,\r\n        \"frames\": 72\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/runner_present_1170_9_79.png\",\r\n        \"cols\": 9,\r\n        \"frames\": 79\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/runner_wave_1170_9_68.png\",\r\n        \"cols\": 9,\r\n        \"frames\": 68\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/zippy_blink_1040_8_59.png\",\r\n        \"cols\": 8,\r\n        \"frames\": 59\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/zippy_shiv_910_7_46.png\",\r\n        \"cols\": 7,\r\n        \"frames\": 46\r\n    },\r\n    {\r\n        \"image\": \"https://steamcommunity-a.akamaihd.net/public/images/profile/holidayprofile/sprite_sheets/crushed/zippy_wave_910_7_45.png\",\r\n        \"cols\": 7,\r\n        \"frames\": 45\r\n    }\r\n];\r\n\r\nANIMATION_TICK_RATE = 11;\r\n\r\nCAnimation = class {\r\n\r\n    constructor(animation, parent, x, y) {\r\n        this._animation = $J.extend({}, animationDefaults, animation);\r\n        this._x = x;\r\n        this._y = y;\r\n\r\n        this._element = $J(\"<div/>\", {\"class\": \"holidayprofile_animation\"});\r\n        this._element.css(\"height\", `${this._animation.height}px`);\r\n        this._element.css(\"width\", `${this._animation.width}px`);\r\n        this._element.css(\"background\", `url( '${this._animation.image}') no-repeat`);\r\n        this._element.appendTo(parent);\r\n        this._element.offset({\"left\": x, \"top\": y});\r\n        this._element.show();\r\n\r\n        this._frame = 0;\r\n        this._start = 0;\r\n        this._rate = 1000 / this._animation.fps;\r\n\r\n        this._interval = 0;\r\n    }\r\n\r\n    start() {\r\n        this._start = $J.now();\r\n        this._interval = window.setInterval($J.proxy(this.tick, this), ANIMATION_TICK_RATE);\r\n        CAnimation.animationsRunning++;\r\n    }\r\n\r\n    tick() {\r\n        const sElapsed = $J.now() - this._start;\r\n        const iCurFrame = Math.floor(sElapsed / this._rate);\r\n        if (iCurFrame !== this._frame) {\r\n            this._frame = iCurFrame;\r\n            if (this._frame <= this._animation.frames) {\r\n                const nBackgroundX = (this._frame % this._animation.cols) * this._animation.width;\r\n                const nBackgroundY = Math.floor(this._frame / this._animation.cols) * this._animation.height;\r\n                this._element.css(\"background-position\", `-${nBackgroundX}px -${nBackgroundY}px`);\r\n            } else {\r\n                this.destroy();\r\n            }\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        if (this._interval) { window.clearInterval(this._interval); }\r\n        this._element.remove();\r\n        CAnimation.animationsRunning--;\r\n    }\r\n};\r\n\r\nCAnimation.animationsRunning = 0;\r\n\r\nfunction animationForShowcase($Showcase) {\r\n    const nAnimation = Math.floor(Math.random() * animations.length);\r\n    const pos = $Showcase.offset();\r\n    const xpad = 100;\r\n    const x = Math.floor(Math.random() * ($Showcase.width() - (2 * xpad))) + (xpad / 2);\r\n    const Animation = new CAnimation(animations[nAnimation], $Showcase, pos.left + x, pos.top - 120);\r\n    Animation.start();\r\n}\r\n\r\nfunction startAnimation() {\r\n    const $Showcases = $J(\".profile_customization:not(.none_selected)\");\r\n    if (!$Showcases.length) { return; }\r\n\r\n    animationForShowcase($J($Showcases[0]));\r\n\r\n    $Showcases.click(function() {\r\n        // eslint-disable-next-line no-invalid-this -- this is the HTML element\r\n        animationForShowcase($J(this));\r\n    });\r\n\r\n    window.setInterval(() => {\r\n        if (CAnimation.animationsRunning === 0 && Math.random() < 0.25) {\r\n            const nScrollY = window.scrollY;\r\n            const nWindowHeight = $J(window).height();\r\n            const $VisibleShowcases = $Showcases.filter(function() {\r\n                // eslint-disable-next-line no-invalid-this -- this is the HTML element\r\n                const $Showcase = $J(this);\r\n                const nShowcaseTop = $Showcase.offset().top;\r\n                return nShowcaseTop >= nScrollY + 100 && nShowcaseTop < (nScrollY + nWindowHeight);\r\n            });\r\n            if ($VisibleShowcases.length) {\r\n                const nShowcase = Math.floor(Math.random() * $VisibleShowcases.length);\r\n                animationForShowcase($J($VisibleShowcases[nShowcase]));\r\n            }\r\n        }\r\n    }, 1500);\r\n}\r\n\r\nstartAnimation();\r\n"],"names":["animationDefaults","animations","animationForShowcase","$Showcase","nAnimation","Math","floor","random","length","pos","offset","x","width","CAnimation","left","top","start","ANIMATION_TICK_RATE","constructor","animation","parent","y","this","_animation","$J","extend","_x","_y","_element","css","height","image","appendTo","show","_frame","_start","_rate","fps","_interval","now","window","setInterval","proxy","tick","animationsRunning","sElapsed","iCurFrame","frames","nBackgroundX","cols","nBackgroundY","destroy","clearInterval","remove","$Showcases","click","nScrollY","scrollY","nWindowHeight","$VisibleShowcases","filter","nShowcaseTop","nShowcase","startAnimation"],"sourceRoot":""}