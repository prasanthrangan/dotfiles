{"version":3,"file":"js/options.js","mappings":"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gBACN,GAAM,mBACN,GAAM,8BACN,GAAM,QACN,GAAM,SACN,GAAM,UACN,GAAM,UACN,GAAM,QACN,GAAM,YACN,GAAM,SACN,GAAM,YACN,GAAM,UACN,GAAM,aACN,GAAM,OACN,GAAM,YACN,GAAM,WACN,GAAM,SACN,GAAM,gBACN,GAAM,SACN,GAAM,QACN,GAAM,oCACN,GAAM,WACN,GAAM,sBACN,GAAM,UACN,GAAM,UACN,GAAM,QACN,GAAM,YACN,GAAM,OACN,GAAM,OACN,GAAM,UACN,GAAM,cACN,GAAM,SACN,GAAM,QACN,GAAM,UACN,GAAM,QACN,GAAM,SACN,GAAM,SACN,GAAM,aACN,GAAM,QACN,GAAM,WACN,GAAM,SACN,GAAM,aACN,GAAM,OACN,GAAM,SACN,GAAM,UACN,GAAM,UACN,GAAM,UACN,GAAM,QACN,GAAM,gBACN,GAAM,YACN,GAAM,aACN,GAAM,kBACN,GAAM,YACN,GAAM,aACN,GAAM,SACN,GAAM,WACN,GAAM,WACN,GAAM,OACN,GAAM,QACN,GAAM,mBACN,GAAM,aACN,GAAM,aACN,GAAM,YACN,GAAM,UACN,GAAM,SACN,GAAM,aACN,GAAM,UACN,GAAM,SACN,GAAM,WACN,GAAM,aACN,GAAM,aACN,GAAM,UACN,GAAM,aACN,GAAM,kBACN,GAAM,UACN,GAAM,QACN,GAAM,QACN,GAAM,cACN,GAAM,uBACN,GAAM,gBACN,GAAM,cACN,GAAM,YACN,GAAM,QACN,GAAM,UACN,GAAM,OACN,GAAM,iBACN,GAAM,cACN,GAAM,2BACN,GAAM,SACN,GAAM,OACN,GAAM,WACN,GAAM,QACN,GAAM,0BACN,GAAM,SACN,GAAM,mBACN,GAAM,WACN,GAAM,OACN,GAAM,cACN,GAAM,mBACN,GAAM,SACN,GAAM,WACN,GAAM,cACN,GAAM,QACN,GAAM,UACN,GAAM,SACN,GAAM,SACN,GAAM,UACN,GAAM,eACN,GAAM,wBACN,GAAM,cACN,GAAM,4BACN,GAAM,mCACN,GAAM,QACN,GAAM,aACN,GAAM,eACN,GAAM,UACN,GAAM,SACN,GAAM,aACN,GAAM,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","sources":["webpack:///./src/js/Core/ExtensionResources.js","webpack:///./src/js/Core/Html/Html.js","webpack:///./src/js/Options/Modules/ChangelogBuilder.js","webpack:///./src/js/Core/Errors/Errors.js","webpack:///./src/js/Core/Storage/CookieStorage.js","webpack:///./src/js/Core/Environment.js","webpack:///./src/js/Core/Localization/Language.js","webpack:///./src/js/Core/BackgroundSimple.js","webpack:///./src/js/Core/Storage/Storage.js","webpack:///./src/js/Core/Info.js","webpack:///./src/js/Core/Storage/SyncedStorage.js","webpack:///./src/js/Core/Localization/Localization.js","webpack:///./src/js/Core/Storage/LocalStorage.js","webpack:///./src/js/Core/Utils/TimeUtils.js","webpack:///./src/js/Core/Permissions.js","webpack:///./src/js/Options/Modules/Fader.js","webpack:///./src/js/Options/Modules/SaveIndicator.js","webpack:///./src/js/Options/Modules/CustomLinks.js","webpack:///./src/js/Options/Modules/ITADConnectionManager.js","webpack:///./src/js/Options/Modules/Data/LocaleCredits.js","webpack:///./src/js/Options/Modules/LocaleCreditsBuilder.js","webpack:///./src/js/Options/Modules/Data/OptionsSetup.js","webpack:///./src/js/Options/Modules/OptionsTranslator.js","webpack:///./src/js/Options/Modules/Data/CountryList.js","webpack:///./src/js/Options/Modules/Region.js","webpack:///./src/js/Options/Modules/Sidebar.js","webpack:///./src/js/Options/Modules/Data/StoreList.js","webpack:///./src/js/Background/Modules/ContextMenu.js","webpack:///./src/js/Core/Storage/UserNotesAdapter.js","webpack:///./src/js/Options/options.js","webpack:///./src/js/Core/Downloader.js","webpack:///./src/js/Options/Modules/OptionsBuilder.js"],"sourcesContent":["\r\nclass ExtensionResources {\r\n\r\n    static getURL(pathname) {\r\n        return browser.runtime.getURL(pathname);\r\n    }\r\n\r\n    static get(pathname) {\r\n        return fetch(ExtensionResources.getURL(pathname));\r\n    }\r\n\r\n    static getJSON(pathname) {\r\n        return ExtensionResources.get(pathname).then(r => r.json());\r\n    }\r\n\r\n    static getText(pathname) {\r\n        return ExtensionResources.get(pathname).then(r => r.text());\r\n    }\r\n}\r\n\r\nexport {ExtensionResources};\r\n","// TODO Accept NodeLists to insert HTML for every node in the list\r\nclass HTML {\r\n\r\n    static escape(str) {\r\n\r\n        // @see https://stackoverflow.com/a/4835406\r\n        const map = {\r\n            \"&\": \"&amp;\",\r\n            \"<\": \"&lt;\",\r\n            \">\": \"&gt;\",\r\n            '\"': \"&quot;\",\r\n            \"'\": \"&#039;\"\r\n        };\r\n\r\n        return str.replace(/[&<>\"']/g, (m) => { return map[m]; });\r\n    }\r\n\r\n    static fragment(html) {\r\n        const template = document.createElement(\"template\");\r\n        template.innerHTML = DOMPurify.sanitize(html);\r\n        return template.content;\r\n    }\r\n\r\n    static element(html) {\r\n        return HTML.fragment(html).firstElementChild;\r\n    }\r\n\r\n    static _getNode(node) {\r\n        let _node = node;\r\n\r\n        if (typeof _node == \"undefined\" || _node === null) {\r\n            console.warn(`${_node} is not an Element.`);\r\n            return null;\r\n        }\r\n        if (typeof _node == \"string\") {\r\n            _node = document.querySelector(_node);\r\n        }\r\n        if (!(_node instanceof Element)) {\r\n            console.warn(`${_node} is not an Element.`);\r\n            return null;\r\n        }\r\n\r\n        return _node;\r\n    }\r\n\r\n    static inner(node, html) {\r\n        const _node = HTML._getNode(node);\r\n\r\n        if (_node) {\r\n            _node.innerHTML = DOMPurify.sanitize(html);\r\n        }\r\n        return _node;\r\n    }\r\n\r\n    static replace(node, html) {\r\n        const _node = HTML._getNode(node);\r\n\r\n        if (_node) {\r\n            _node.outerHTML = DOMPurify.sanitize(html);\r\n        }\r\n        return _node;\r\n    }\r\n\r\n    static wrap(wrapper, startEl, endEl = startEl) {\r\n        const _startEl = HTML._getNode(startEl);\r\n\r\n        if (!_startEl) { return null; }\r\n\r\n        const _endEl = endEl === null ? _startEl.parentElement.lastElementChild : HTML._getNode(endEl);\r\n\r\n        const wrappedNodes = [_startEl];\r\n        for (let cur = _startEl; cur.nextElementSibling !== null && cur !== _endEl; cur = cur.nextElementSibling) {\r\n            wrappedNodes.push(cur.nextElementSibling);\r\n        }\r\n\r\n        const _wrapper = HTML.element(wrapper);\r\n        _startEl.replaceWith(_wrapper);\r\n        _wrapper.append(...wrappedNodes);\r\n        return _wrapper;\r\n    }\r\n\r\n    static adjacent(node, position, html) {\r\n        const _node = HTML._getNode(node);\r\n\r\n        if (_node) {\r\n            _node.insertAdjacentHTML(position, DOMPurify.sanitize(html));\r\n        }\r\n        return _node;\r\n    }\r\n\r\n    static beforeBegin(node, html) {\r\n        HTML.adjacent(node, \"beforebegin\", html);\r\n    }\r\n\r\n    static afterBegin(node, html) {\r\n        HTML.adjacent(node, \"afterbegin\", html);\r\n    }\r\n\r\n    static beforeEnd(node, html) {\r\n        HTML.adjacent(node, \"beforeend\", html);\r\n    }\r\n\r\n    static afterEnd(node, html) {\r\n        HTML.adjacent(node, \"afterend\", html);\r\n    }\r\n}\r\n\r\nexport {HTML};\r\n","import {ExtensionResources} from \"../../Core/ExtensionResources\";\r\nimport {HTML} from \"../../Core/Html/Html\";\r\n\r\nclass ChangelogBuilder {\r\n\r\n    async build() {\r\n        const data = await ExtensionResources.getJSON(\"changelog.json\");\r\n\r\n        let html = \"\";\r\n        for (const [version, logHtml] of Object.entries(data)) {\r\n\r\n            html += `\r\n                <div class=\"changelog__release\">\r\n                    <h2 class=\"changelog__version\">${version}</h2>\r\n                    <div class=\"changelog__log\">${logHtml}</div>                \r\n                </div>\r\n            `;\r\n        }\r\n\r\n        HTML.inner(\r\n            document.querySelector(\".js-changelog\"),\r\n            html\r\n        );\r\n    }\r\n}\r\n\r\nexport {ChangelogBuilder};\r\n","\r\nclass LoginError extends Error {\r\n    constructor(type) {\r\n        super(type);\r\n        this.name = \"LoginError\";\r\n    }\r\n}\r\n\r\nclass ServerOutageError extends Error {\r\n    constructor(msg) {\r\n        super(msg);\r\n        this.name = \"ServerOutageError\";\r\n    }\r\n}\r\n\r\nclass HTTPError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n    }\r\n}\r\n\r\n\r\nclass FeatureDependencyError extends Error {\r\n    constructor(msg, featureName) {\r\n        super(msg);\r\n        this.featureName = featureName;\r\n    }\r\n}\r\n\r\nconst Errors = {\r\n    \"LoginError\": LoginError,\r\n    \"ServerOutageError\": ServerOutageError,\r\n    \"HTTPError\": HTTPError,\r\n    \"FeatureDependencyError\": FeatureDependencyError\r\n};\r\n\r\nexport {Errors};\r\n","\r\nclass CookieStorage {\r\n\r\n    static get(name, defaultValue) {\r\n        const _name = name.trim();\r\n\r\n        if (!CookieStorage.cache.has(_name)) {\r\n            return defaultValue;\r\n        }\r\n        return CookieStorage.cache.get(_name);\r\n    }\r\n\r\n    static set(name, val, ttl = 60 * 60 * 24 * 365) {\r\n        let _name = name.trim();\r\n        let _val = val.trim();\r\n\r\n        CookieStorage.cache.set(_name, _val);\r\n\r\n        _name = encodeURIComponent(_name);\r\n        _val = encodeURIComponent(_val);\r\n        document.cookie = `${_name}=${_val}; max-age=${ttl}`;\r\n    }\r\n\r\n    static remove(name) {\r\n        let _name = name.trim();\r\n        CookieStorage.cache.delete(_name);\r\n        _name = encodeURIComponent(_name);\r\n        document.cookie = `${_name}; expires=Thu, 01 Jan 1970 00:00:00 GMT`;\r\n    }\r\n\r\n    static init() {\r\n        CookieStorage.cache = new Map();\r\n        for (let [key, val] of document.cookie.split(\";\").map(kv => kv.split(\"=\"))) {\r\n            key = key.trim();\r\n            CookieStorage.cache.set(key, decodeURIComponent(val));\r\n        }\r\n    }\r\n}\r\n\r\nCookieStorage.init();\r\n\r\nexport {CookieStorage};\r\n","\r\nconst ContextType = Object.freeze({\r\n    \"BACKGROUND\": 1,\r\n    \"CONTENT_SCRIPT\": 2,\r\n    \"OPTIONS\": 3,\r\n});\r\n\r\nlet currentContext;\r\nif (browser.extension.getBackgroundPage) {\r\n    const bgPage = browser.extension.getBackgroundPage();\r\n\r\n    currentContext = (bgPage === window)\r\n        ? ContextType.BACKGROUND\r\n        : ContextType.OPTIONS;\r\n} else {\r\n    currentContext = ContextType.CONTENT_SCRIPT;\r\n}\r\n\r\nclass Environment {\r\n\r\n    static isBackgroundScript() {\r\n        return currentContext === ContextType.BACKGROUND;\r\n    }\r\n\r\n    static isContentScript() {\r\n        return currentContext === ContextType.CONTENT_SCRIPT;\r\n    }\r\n\r\n    static isOptions() {\r\n        return currentContext === ContextType.OPTIONS;\r\n    }\r\n}\r\n\r\nexport {Environment};\r\n","import {CookieStorage} from \"../Storage/CookieStorage\";\r\nimport {Environment} from \"../Environment\";\r\n\r\nclass Language {\r\n\r\n    static getCurrentSteamLanguage() {\r\n        if (this._currentSteamLanguage !== null) {\r\n            return this._currentSteamLanguage;\r\n        }\r\n\r\n        for (const script of document.querySelectorAll(\"script[src]\")) {\r\n            const language = new URL(script.src).searchParams.get(\"l\");\r\n            if (language) {\r\n                Language._currentSteamLanguage = language;\r\n                return this._currentSteamLanguage;\r\n            }\r\n        }\r\n\r\n        // In a Content Context, we can check for a cookie\r\n        if (Environment.isContentScript()) {\r\n            Language._currentSteamLanguage = CookieStorage.get(\"Steam_Language\") || null;\r\n        }\r\n\r\n        return this._currentSteamLanguage;\r\n    }\r\n\r\n    static getLanguageCode(language) {\r\n        const code = Language.languages[language];\r\n        return code || \"en\";\r\n    }\r\n\r\n    static isCurrentLanguageOneOf(array) {\r\n        return array.includes(Language.getCurrentSteamLanguage());\r\n    }\r\n}\r\n\r\nLanguage._currentSteamLanguage = null;\r\nLanguage.languages = {\r\n    \"english\": \"en\",\r\n    \"bulgarian\": \"bg\",\r\n    \"czech\": \"cs\",\r\n    \"danish\": \"da\",\r\n    \"dutch\": \"nl\",\r\n    \"finnish\": \"fi\",\r\n    \"french\": \"fr\",\r\n    \"greek\": \"el\",\r\n    \"german\": \"de\",\r\n    \"hungarian\": \"hu\",\r\n    \"italian\": \"it\",\r\n    \"japanese\": \"ja\",\r\n    \"koreana\": \"ko\",\r\n    \"norwegian\": \"no\",\r\n    \"polish\": \"pl\",\r\n    \"portuguese\": \"pt-PT\",\r\n    \"brazilian\": \"pt-BR\",\r\n    \"russian\": \"ru\",\r\n    \"romanian\": \"ro\",\r\n    \"schinese\": \"zh-CN\",\r\n    \"spanish\": \"es-ES\",\r\n    \"latam\": \"es-419\",\r\n    \"swedish\": \"sv-SE\",\r\n    \"tchinese\": \"zh-TW\",\r\n    \"thai\": \"th\",\r\n    \"turkish\": \"tr\",\r\n    \"ukrainian\": \"ua\",\r\n    \"vietnamese\": \"vi\",\r\n};\r\n\r\nexport {Language};\r\n","\r\nclass BackgroundSimple {\r\n    static message(message) {\r\n        return browser.runtime.sendMessage(message);\r\n    }\r\n\r\n    static action(requested, ...params) {\r\n        if (!params.length) { return this.message({\"action\": requested}); }\r\n        return this.message({\"action\": requested, \"params\": params});\r\n    }\r\n}\r\n\r\nexport {BackgroundSimple};\r\n","class Storage {\r\n\r\n    static has(key) {\r\n        return Object.prototype.hasOwnProperty.call(this.cache, key);\r\n    }\r\n\r\n    static get(key) {\r\n        if (typeof this.cache[key] !== \"undefined\" || typeof this.defaults === \"undefined\") {\r\n            return this.cache[key];\r\n        }\r\n        if (typeof this.defaults[key] === \"undefined\") {\r\n            console.warn('Unrecognized storage key \"%s\"', key);\r\n        }\r\n        return this.defaults[key];\r\n    }\r\n\r\n    static set(key, value) {\r\n        this.cache[key] = value;\r\n        return this._adapter.set({[key]: value});\r\n    }\r\n\r\n    static import(entries) {\r\n        for (const [key, value] of Object.entries(entries)) {\r\n            this.cache[key] = value;\r\n        }\r\n        return this._adapter.set(entries);\r\n    }\r\n\r\n    static remove(key) {\r\n        if (typeof this.cache[key] !== \"undefined\") {\r\n            delete this.cache[key];\r\n        }\r\n        return this._adapter.remove(key);\r\n    }\r\n\r\n    static keys(prefix = \"\") {\r\n        return Object.keys(this.cache).filter(k => k.startsWith(prefix));\r\n    }\r\n\r\n    static entries() {\r\n        return Object.entries(this.cache);\r\n    }\r\n\r\n    static async clear(force = false) {\r\n\r\n        let tmp;\r\n        if (!force) {\r\n            tmp = (this.persistent ?? []).reduce((acc, option) => {\r\n                acc[option] = this.cache[option];\r\n                return acc;\r\n            }, {});\r\n        }\r\n\r\n        await this._adapter.clear();\r\n        this.cache = {};\r\n\r\n        if (!force) {\r\n            await this.import(tmp);\r\n        }\r\n    }\r\n\r\n    // load whole storage and make local copy\r\n    static async init() {\r\n\r\n        const area = this._adapter === browser.storage.sync ? \"sync\" : \"local\";\r\n        const cache = Storage.caches[area];\r\n\r\n        if (typeof cache !== \"undefined\") {\r\n            this.cache = cache;\r\n            return this.cache;\r\n        }\r\n\r\n        Storage.caches[area] = {};\r\n        this.cache = Storage.caches[area];\r\n\r\n        browser.storage.onChanged.addListener((changes, eventArea) => {\r\n\r\n            if (area !== eventArea) { return; }\r\n\r\n            for (const [key, {\"newValue\": val}] of Object.entries(changes)) {\r\n                this.cache[key] = val;\r\n            }\r\n        });\r\n\r\n        return Object.assign(this.cache, await this._adapter.get(null));\r\n    }\r\n\r\n    static then(onDone, onCatch) {\r\n        const promise = this._initialized ? Promise.resolve(this.cache) : this.init();\r\n        this._initialized = true;\r\n        return promise.then(onDone, onCatch);\r\n    }\r\n\r\n    static toJson() {\r\n        return JSON.stringify(this.cache);\r\n    }\r\n}\r\n\r\nStorage.caches = {};\r\n\r\nexport {Storage};\r\n","\r\nconst Info = {\r\n    \"version\": browser.runtime.getManifest().version,\r\n    \"db_version\": 3,\r\n};\r\n\r\nexport {Info};\r\n","import {Storage} from \"./Storage\";\r\nimport {Info} from \"../Info\";\r\n\r\n/*\r\n * browser.storage.sync limits\r\n * QUOTA_BYTES = 102400 // 100KB\r\n * QUOTA_BYTES_PER_ITEM = 8192 // 8KB\r\n * MAX_ITEMS = 512\r\n * MAX_WRITE_OPERATIONS_PER_HOUR = 1800\r\n * MAX_WRITE_OPERATIONS_PER_MINUTE = 120\r\n */\r\nclass SyncedStorage extends Storage {}\r\n\r\nSyncedStorage._adapter = browser.storage.sync || browser.storage.local;\r\n\r\n/*\r\n * 8KiB is the limit for storage.sync https://chromium.googlesource.com/chromium/src/+/refs/heads/main/extensions/common/api/storage.json#227\r\n * 5MiB is the limit for storage.local (overall size) https://chromium.googlesource.com/chromium/src/+/refs/heads/main/extensions/common/api/storage.json#227\r\n * 2KiB are subtracted in order to save some space for other configuration options\r\n */\r\nSyncedStorage.QUOTA_BYTES_PER_ITEM = browser.storage.sync ? 8192 : 5242880 - 2048;\r\n\r\nSyncedStorage.defaults = Object.freeze({\r\n    \"language\": \"english\",\r\n\r\n    \"version\": Info.version,\r\n    \"version_show\": true,\r\n\r\n    \"highlight_owned_color\": \"#00ce67\",\r\n    \"highlight_wishlist_color\": \"#0491bf\",\r\n    \"highlight_coupon_color\": \"#a26426\",\r\n    \"highlight_inv_gift_color\": \"#800040\",\r\n    \"highlight_inv_guestpass_color\": \"#513c73\",\r\n    \"highlight_notinterested_color\": \"#4f4f4f\",\r\n    \"highlight_collection_color\": \"#856d0e\",\r\n    \"highlight_waitlist_color\": \"#4c7521\",\r\n\r\n    \"tag_owned_color\": \"#00b75b\",\r\n    \"tag_wishlist_color\": \"#0383b4\",\r\n    \"tag_coupon_color\": \"#c27120\",\r\n    \"tag_inv_gift_color\": \"#b10059\",\r\n    \"tag_inv_guestpass_color\": \"#65449a\",\r\n    \"tag_notinterested_color\": \"#4f4f4f\",\r\n    \"tag_collection_color\": \"#856d0e\",\r\n    \"tag_waitlist_color\": \"#4c7521\",\r\n\r\n    \"highlight_owned\": true,\r\n    \"highlight_wishlist\": true,\r\n    \"highlight_coupon\": false,\r\n    \"highlight_inv_gift\": false,\r\n    \"highlight_inv_guestpass\": false,\r\n    \"highlight_notinterested\": false,\r\n    \"highlight_excludef2p\": false,\r\n    \"highlight_collection\": true,\r\n    \"highlight_waitlist\": true,\r\n\r\n    \"tag_owned\": false,\r\n    \"tag_wishlist\": false,\r\n    \"tag_coupon\": false,\r\n    \"tag_inv_gift\": false,\r\n    \"tag_inv_guestpass\": false,\r\n    \"tag_notinterested\": true,\r\n    \"tag_collection\": false,\r\n    \"tag_waitlist\": false,\r\n    \"tag_short\": false,\r\n\r\n    \"hidetmsymbols\": false,\r\n\r\n    \"showlowestprice\": true,\r\n    \"showlowestprice_onwishlist\": true,\r\n    \"showlowestpricecoupon\": true,\r\n    \"showallstores\": true,\r\n    \"stores\": [],\r\n    \"override_price\": \"auto\",\r\n    \"showregionalprice\": \"mouse\",\r\n    \"regional_countries\": [\"us\", \"gb\", \"ru\", \"br\", \"au\", \"jp\"],\r\n\r\n    \"show_es_homepagetabs\": true,\r\n    \"showmarkettotal\": false,\r\n    \"showsteamrepapi\": true,\r\n    \"showmcus\": true,\r\n    \"showoc\": true,\r\n    \"showhltb\": true,\r\n    \"showyoutube\": true,\r\n    \"showtwitch\": true,\r\n    \"showpcgw\": true,\r\n    \"showcompletionistme\": false,\r\n    \"showprotondb\": false,\r\n    \"showviewinlibrary\": false,\r\n    \"showsteamcardexchange\": false,\r\n    \"showitadlinks\": true,\r\n    \"showsteamdb\": true,\r\n    \"showbartervg\": false,\r\n    \"showastatslink\": true,\r\n    \"showyoutubegameplay\": true,\r\n    \"showyoutubereviews\": true,\r\n    \"showwsgf\": true,\r\n    \"exfgls\": true,\r\n    \"app_custom_link\": [\r\n        {\r\n            \"enabled\": false,\r\n            \"name\": \"Google\",\r\n            \"url\": \"google.com/search?q=[ID]+[NAME]\",\r\n            \"icon\": \"www.google.com/images/branding/product/ico/googleg_lodp.ico\"\r\n        },\r\n    ],\r\n\r\n    \"customize_apppage\": {\r\n        \"recentupdates\": true,\r\n        \"reviews\": true,\r\n        \"about\": true,\r\n        \"contentwarning\": true,\r\n        \"steamchart\": true,\r\n        \"steamspy\": true,\r\n        \"surveys\": true,\r\n        \"sysreq\": true,\r\n        \"legal\": true,\r\n        \"morelikethis\": true,\r\n        \"recommendedbycurators\": true,\r\n        \"customerreviews\": true\r\n    },\r\n\r\n    \"customize_frontpage\": {\r\n        \"featuredrecommended\": true,\r\n        \"specialoffers\": true,\r\n        \"trendingamongfriends\": true,\r\n        \"discoveryqueue\": true,\r\n        \"browsesteam\": true,\r\n        \"curators\": true,\r\n        \"morecuratorrecommendations\": true,\r\n        \"recentlyupdated\": true,\r\n        \"fromdevelopersandpublishersthatyouknow\": true,\r\n        \"popularvrgames\": true,\r\n        \"homepagetabs\": true,\r\n        \"gamesstreamingnow\": true,\r\n        \"under\": true,\r\n        \"updatesandoffers\": true,\r\n        \"homepagesidebar\": true\r\n    },\r\n\r\n    // 'show_keylol_links': false, // not in use, option is commented out\r\n    \"show_package_info\": false,\r\n    \"show_steamchart_info\": true,\r\n    \"show_steamspy_info\": true,\r\n    \"show_early_access\": true,\r\n    \"show_alternative_linux_icon\": false,\r\n    \"show_itad_button\": false,\r\n    \"skip_got_steam\": false,\r\n\r\n    \"installsteam\": \"show\",\r\n    \"openinnewtab\": false,\r\n    \"keepssachecked\": false,\r\n    \"showemptywishlist\": true,\r\n    \"user_notes_app\": true,\r\n    \"user_notes_wishlist\": true,\r\n    \"showwishliststats\": true,\r\n    \"oneclickremovewl\": false,\r\n    \"user_notes\": {},\r\n    \"user_notes_adapter\": \"synced_storage\",\r\n    \"replaceaccountname\": true,\r\n    \"showlanguagewarning\": true,\r\n    \"showlanguagewarninglanguage\": \"english\",\r\n    \"homepage_tab_selection\": \"remember\",\r\n    \"homepage_tab_last\": null,\r\n    \"send_age_info\": true,\r\n    \"removebroadcasts\": false,\r\n    \"mp4video\": false,\r\n    \"horizontalscrolling\": true,\r\n    \"showsupportinfo\": true,\r\n    \"showdrm\": true,\r\n    \"regional_hideworld\": false,\r\n    \"showinvnav\": true,\r\n    \"quickinv\": true,\r\n    \"quickinv_diff\": -0.01,\r\n    \"community_default_tab\": \"\",\r\n    \"showallachievements\": false,\r\n    \"showallstats\": true,\r\n    \"replacecommunityhublinks\": false,\r\n    \"hideannouncementcomments\": false,\r\n    \"showachinstore\": true,\r\n    \"hideactivelistings\": false,\r\n    \"showlowestmarketprice\": true,\r\n    \"hidespamcomments\": false,\r\n    \"spamcommentregex\": \"[\\\\u2500-\\\\u25FF]\",\r\n    \"wlbuttoncommunityapp\": true,\r\n    \"removeguideslanguagefilter\": false,\r\n    \"disablelinkfilter\": false,\r\n    \"sortfriendsby\": \"default_ASC\",\r\n    \"sortreviewsby\": \"default_ASC\",\r\n    \"sortgroupsby\": \"default_ASC\",\r\n    \"show1clickgoo\": true,\r\n    \"show_profile_link_images\": \"gray\",\r\n    \"show_custom_themes\": true,\r\n    \"profile_pinned_bg\": false,\r\n    \"profile_steamrepcn\": true,\r\n    \"profile_steamgifts\": true,\r\n    \"profile_steamtrades\": true,\r\n    \"profile_bartervg\": true,\r\n    \"profile_steamrep\": true,\r\n    \"profile_steamdbcalc\": true,\r\n    \"profile_astats\": true,\r\n    \"profile_backpacktf\": true,\r\n    \"profile_astatsnl\": true,\r\n    \"profile_steamid\": true,\r\n    \"profile_custom_link\": [\r\n        {\r\n            \"enabled\": true,\r\n            \"name\": \"Google\",\r\n            \"url\": \"google.com/search?q=[ID]\",\r\n            \"icon\": \"www.google.com/images/branding/product/ico/googleg_lodp.ico\"\r\n        },\r\n    ],\r\n    \"fav_emoticons\": [],\r\n    \"group_steamgifts\": true,\r\n    \"steamcardexchange\": true,\r\n    \"purchase_dates\": true,\r\n    \"show_badge_progress\": true,\r\n    \"show_coupon\": true,\r\n    \"show_wishlist_link\": true,\r\n    \"show_wishlist_count\": true,\r\n    \"show_progressbar\": true,\r\n    \"show_backtotop\": false,\r\n\r\n    \"profile_showcase_twitch\": true,\r\n    \"profile_showcase_own_twitch\": false,\r\n    \"profile_showcase_twitch_profileonly\": false,\r\n\r\n    \"itad_import_library\": false,\r\n    \"itad_import_wishlist\": false,\r\n    \"add_to_waitlist\": false,\r\n\r\n    \"context_steam_store\": false,\r\n    \"context_steam_market\": false,\r\n    \"context_itad\": false,\r\n    \"context_bartervg\": false,\r\n    \"context_steamdb\": false,\r\n    \"context_steamdb_instant\": false,\r\n    \"context_steam_keys\": false,\r\n});\r\nSyncedStorage.persistent = [\r\n    \"user_notes\",\r\n    \"user_notes_adapter\",\r\n];\r\n\r\nexport {SyncedStorage};\r\n","import {BackgroundSimple} from \"../BackgroundSimple\";\r\nimport {ExtensionResources} from \"../ExtensionResources\";\r\nimport {Language} from \"./Language\";\r\nimport {SyncedStorage} from \"../Storage/SyncedStorage\";\r\n\r\n\r\nclass Localization {\r\n\r\n    static loadLocalization(code) {\r\n        return ExtensionResources.getJSON(`/localization/${code}.json`);\r\n    }\r\n\r\n    static init() {\r\n        if (Localization._promise) { return Localization._promise; }\r\n\r\n        let currentSteamLanguage = Language.getCurrentSteamLanguage();\r\n        const storedSteamLanguage = SyncedStorage.get(\"language\");\r\n        if (currentSteamLanguage === null) {\r\n            currentSteamLanguage = storedSteamLanguage;\r\n        } else if (currentSteamLanguage !== storedSteamLanguage) {\r\n            SyncedStorage.set(\"language\", currentSteamLanguage);\r\n            BackgroundSimple.action(\"clearpurchases\");\r\n        }\r\n\r\n        function deepAssign(target, source) {\r\n\r\n            // Object.assign() but deep-assigning objects recursively\r\n            for (const [key, val] of Object.entries(source)) {\r\n                if (typeof target[key] === \"undefined\") {\r\n                    console.warn(\"The key %s doesn't exist in the English localization file\", key);\r\n                    continue;\r\n                }\r\n                if (typeof val === \"object\") {\r\n                    deepAssign(target[key], val);\r\n                } else if (val !== \"\") {\r\n                    target[key] = val;\r\n                }\r\n            }\r\n            return target;\r\n        }\r\n\r\n        const local = Language.getLanguageCode(currentSteamLanguage);\r\n        const codes = [\"en\"];\r\n        if (local !== null && local !== \"en\") {\r\n            codes.push(local);\r\n        }\r\n        Localization._promise = Promise.all(\r\n            codes.map(lc => Localization.loadLocalization(lc))\r\n        ).then(([english, local]) => {\r\n            Localization.str = english;\r\n            if (local) {\r\n                deepAssign(Localization.str, local);\r\n            }\r\n            return Localization.str;\r\n        });\r\n        return Localization._promise;\r\n    }\r\n\r\n    static then(onDone, onCatch) {\r\n        return Localization.init().then(onDone, onCatch);\r\n    }\r\n\r\n    static getString(key) {\r\n\r\n        // Source: http://stackoverflow.com/a/24221895\r\n        const path = key.split(\".\").reverse();\r\n        let current = Localization.str;\r\n\r\n        while (path.length) {\r\n            if (typeof current !== \"object\") {\r\n                return null;\r\n            }\r\n            current = current[path.pop()];\r\n        }\r\n        return current;\r\n    }\r\n}\r\n\r\nLocalization._promise = null;\r\n\r\n\r\nexport {Localization};\r\n","\r\nimport {Storage} from \"./Storage\";\r\nimport {Environment} from \"../Environment\";\r\n\r\nclass LocalStorage extends Storage {\r\n\r\n    static async init() {\r\n        await super.init();\r\n\r\n        if (this === LocalStorage) {\r\n            // TODO Remove after some versions\r\n            return this.migrate();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static async migrate() {\r\n\r\n        const migrationDone = this.get(\"local_storage_migration\");\r\n\r\n        let type;\r\n\r\n        if (location.hostname === \"store.steampowered.com\") {\r\n            type = \"store\";\r\n        } else if (location.hostname === \"steamcommunity.com\") {\r\n            type = \"community\";\r\n        } else if (Environment.isContentScript()) {\r\n            return null;\r\n        } else {\r\n            type = \"extension\";\r\n        }\r\n\r\n        if (migrationDone[type]) { return null; }\r\n\r\n        await Promise.all(Object.keys(LocalStorage.defaults).map(async key => {\r\n\r\n            let value = localStorage.getItem(key);\r\n            if (value === null) { return; }\r\n\r\n            try {\r\n                value = JSON.parse(value);\r\n            } catch (err) {\r\n                console.error(\"Can't parse value\", value);\r\n                throw err;\r\n            }\r\n\r\n            await LocalStorage.set(key, value);\r\n            localStorage.removeItem(key);\r\n        }));\r\n\r\n        migrationDone[type] = true;\r\n        return LocalStorage.set(\"local_storage_migration\", migrationDone);\r\n    }\r\n}\r\n\r\nLocalStorage._adapter = browser.storage.local;\r\n\r\nLocalStorage.defaults = Object.freeze({\r\n    \"access_token\": null,\r\n    \"lastItadImport\": {\"from\": null, \"to\": null},\r\n    \"login\": {\"steamId\": null, \"profilePath\": null},\r\n    \"storeCountry\": null,\r\n    \"expand_slider\": false,\r\n    \"es_guide_tags\": {}, // TODO remove prefix\r\n    \"market_stats\": {\"startListing\": null, \"purchaseTotal\": 0, \"saleTotal\": 0},\r\n    \"popular_refresh\": false,\r\n    \"workshop_state\": \"\",\r\n    \"playback_hd\": false,\r\n    \"show_review_section\": true,\r\n    \"steampeek\": false,\r\n    \"support_info\": null,\r\n    \"hide_login_warn_store\": false,\r\n    \"hide_login_warn_community\": false,\r\n    \"review_filters\": {},\r\n    \"local_storage_migration\": {\"store\": false, \"community\": false, \"extension\": false},\r\n});\r\n\r\nexport {LocalStorage};\r\n","class Timer {\r\n\r\n    constructor(duration) {\r\n        this._promise = new Promise(resolve => {\r\n            this._id = setTimeout(() => { resolve(); }, duration);\r\n        });\r\n    }\r\n\r\n    then(onSuccess, onFail) {\r\n        if (this._promise) {\r\n            return this._promise.then(onSuccess, onFail);\r\n        }\r\n\r\n        throw new Error(\"Timer has been cleared before\");\r\n    }\r\n\r\n    clear() {\r\n        clearTimeout(this._id);\r\n        this._promise = null;\r\n    }\r\n}\r\n\r\nclass ResettableTimer {\r\n\r\n    constructor(onDone, duration) {\r\n        this.onDone = onDone;\r\n        this.duration = duration;\r\n\r\n        this.reset();\r\n    }\r\n\r\n    get running() { return this._running; }\r\n\r\n    reset() {\r\n        if (typeof this._id !== \"undefined\") {\r\n            clearTimeout(this._id);\r\n        }\r\n\r\n        this._id = setTimeout(async() => {\r\n            await this.onDone();\r\n            this._running = false;\r\n        }, this.duration);\r\n\r\n        this._running = true;\r\n    }\r\n}\r\n\r\nclass TimeUtils {\r\n\r\n    static timer(duration) {\r\n        return new Timer(duration);\r\n    }\r\n\r\n    static resettableTimer(onDone, duration) {\r\n        return new ResettableTimer(onDone, duration);\r\n    }\r\n\r\n    static now() {\r\n        return Math.trunc(Date.now() / 1000);\r\n    }\r\n}\r\n\r\nexport {TimeUtils};\r\n","import {SyncedStorage} from \"./Storage/SyncedStorage\";\r\n\r\nconst ctxPermissions = __BROWSER__ === \"firefox\" ? [] : [\"contextMenus\"];\r\n\r\nconst PermissionOptions = Object.freeze({\r\n    \"context_steam_store\": {\r\n        \"persistent\": true,\r\n        \"permissions\": ctxPermissions,\r\n    },\r\n    \"context_steam_market\": {\r\n        \"persistent\": true,\r\n        \"permissions\": ctxPermissions,\r\n    },\r\n    \"context_itad\": {\r\n        \"persistent\": true,\r\n        \"permissions\": ctxPermissions,\r\n    },\r\n    \"context_bartervg\": {\r\n        \"persistent\": true,\r\n        \"permissions\": ctxPermissions,\r\n    },\r\n    \"context_steamdb\": {\r\n        \"persistent\": true,\r\n        \"permissions\": ctxPermissions,\r\n    },\r\n    \"context_steamdb_instant\": {\r\n        \"persistent\": true,\r\n        \"permissions\": ctxPermissions,\r\n    },\r\n    \"context_steam_keys\": {\r\n        \"persistent\": true,\r\n        \"permissions\": ctxPermissions,\r\n    },\r\n});\r\n\r\nclass Permissions {\r\n\r\n    /**\r\n     * @return Promise\r\n     */\r\n    static contains(permissionList) {\r\n        return browser.permissions.contains({\"permissions\": permissionList});\r\n    }\r\n\r\n    /**\r\n     * @return Promise\r\n     */\r\n    static request(permissionList) {\r\n        return browser.permissions.request({\"permissions\": permissionList});\r\n    }\r\n\r\n    /**\r\n     * @return Promise\r\n     */\r\n    static remove(permissionList) {\r\n        if (permissionList.includes(\"contextMenus\")) {\r\n            browser.contextMenus.removeAll();\r\n        }\r\n        return browser.permissions.remove({\"permissions\": permissionList});\r\n    }\r\n\r\n    static async when(permission, onAdded, onRemoved) {\r\n        if (onAdded) {\r\n            if (await Permissions.contains([permission])) {\r\n                onAdded();\r\n            }\r\n\r\n            browser.permissions.onAdded.addListener(p => {\r\n                if (p.permissions.includes(permission)) {\r\n                    onAdded();\r\n                }\r\n            });\r\n        }\r\n\r\n        if (onRemoved) {\r\n            browser.permissions.onRemoved.addListener(p => {\r\n                if (p.permissions.includes(permission)) {\r\n                    onRemoved();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    static requestOption(option) {\r\n        return Permissions.request(PermissionOptions[option].permissions);\r\n    }\r\n\r\n    static removeOption(optionToRemove) {\r\n\r\n        // If any of the permissions is in use by another option, don't remove.\r\n        const unusedPermissions = Permissions._getUnusedPermissions(optionToRemove);\r\n        if (unusedPermissions.length === 0) {\r\n            return Promise.resolve(true);\r\n        }\r\n\r\n        return Permissions.remove(unusedPermissions);\r\n    }\r\n\r\n    static _getUnusedPermissions(option) {\r\n        const used = new Set();\r\n        for (const [key, setup] of Object.entries(PermissionOptions)) {\r\n            if (option === key || (setup.persistent && !SyncedStorage.get(key))) {\r\n                continue;\r\n            }\r\n\r\n            for (const p of setup.permissions) {\r\n                used.add(p);\r\n            }\r\n        }\r\n\r\n        const unused = new Set();\r\n        for (const p of PermissionOptions[option].permissions) {\r\n            if (!used.has(p)) {\r\n                unused.add(p);\r\n            }\r\n        }\r\n\r\n        return Array.from(unused.values());\r\n    }\r\n}\r\n\r\nexport {PermissionOptions, Permissions};\r\n","import {TimeUtils} from \"../../Core/Utils/TimeUtils\";\r\n\r\nclass Fader {\r\n\r\n    static async applyCSSTransition(node, property, initialValue, finalValue, durationMs) {\r\n        node.style.transition = \"\";\r\n        node.style[property] = initialValue;\r\n\r\n        await TimeUtils.timer(0);\r\n\r\n        node.style.transition = `${property} ${durationMs}ms`;\r\n        node.style[property] = finalValue;\r\n\r\n        return TimeUtils.timer(durationMs);\r\n    }\r\n\r\n    static fadeIn(node, duration = 400) {\r\n        return Fader.applyCSSTransition(node, \"opacity\", 0, 1, duration);\r\n    }\r\n\r\n    static async fadeOut(node, duration = 400) {\r\n        await Fader.applyCSSTransition(node, \"opacity\", 1, 0, duration);\r\n    }\r\n\r\n    static async fadeInFadeOut(node, fadeInDuration = 400, fadeOutDuration = 400, idleDuration = 600) {\r\n        const controlId = Date.now().toString();\r\n        node.dataset.fadeControl = controlId;\r\n\r\n        Fader.fadeIn(node, fadeInDuration);\r\n        await TimeUtils.timer(fadeInDuration + idleDuration);\r\n\r\n        if (node.dataset.fadeControl === controlId) {\r\n            Fader.fadeOut(node, fadeOutDuration);\r\n        }\r\n    }\r\n}\r\n\r\nexport {Fader};\r\n","import {TimeUtils} from \"../../Core/Utils/TimeUtils\";\r\nimport {Fader} from \"./Fader\";\r\n\r\nclass SaveIndicator {\r\n\r\n    static show() {\r\n        this.saving();\r\n        this.saved();\r\n    }\r\n\r\n    static saving() {\r\n        if (this._currentSaves++ > 0) { return; }\r\n\r\n        document.querySelector(\".js-options-saving\").classList.remove(\"is-hidden\");\r\n        document.querySelector(\".js-options-saved\").classList.add(\"is-hidden\");\r\n\r\n        this._promise = Fader.fadeIn(document.querySelector(\".js-options-save\"));\r\n    }\r\n\r\n    static async saved() {\r\n        if (--this._currentSaves > 0) { return; }\r\n\r\n        document.querySelector(\".js-options-saving\").classList.add(\"is-hidden\");\r\n        document.querySelector(\".js-options-saved\").classList.remove(\"is-hidden\");\r\n\r\n        await this._promise;\r\n        this._promise = null;\r\n        await TimeUtils.timer(this.displayTime);\r\n\r\n        if (this._promise !== null) { return; }\r\n\r\n        Fader.fadeOut(document.querySelector(\".js-options-save\"));\r\n    }\r\n\r\n}\r\n\r\nSaveIndicator.displayTime = 600;\r\n\r\nSaveIndicator._promise = null;\r\nSaveIndicator._currentSaves = 0;\r\n\r\nexport {SaveIndicator};\r\n","import {HTML, Localization, SyncedStorage} from \"../../modulesCore\";\r\nimport {SaveIndicator} from \"./SaveIndicator\";\r\n\r\nclass CustomLinks {\r\n\r\n    constructor(container) {\r\n        this._container = container;\r\n\r\n        this._type = container.dataset.type;\r\n    }\r\n\r\n    init() {\r\n        this._template = HTML.element(\r\n            `<div class=\"custom-link option js-custom-link\">\r\n                <input type=\"checkbox\" name=\"${this._type}_custom_enabled\">\r\n                <div>\r\n                    <div>\r\n                        <label class=\"custom-link__label\">${Localization.str.options.name}</label>\r\n                        <input class=\"custom-link__input\" type=\"text\" name=\"${this._type}_custom_name\" maxlength=\"30\">\r\n                    </div>\r\n                    <div>\r\n                        <label class=\"custom-link__label\">URL</label>\r\n                        <input class=\"custom-link__input\" type=\"text\" name=\"${this._type}_custom_url\">\r\n                    </div>\r\n                    <div>\r\n                        <label class=\"custom-link__label\">${Localization.str.options.icon}</label>\r\n                        <input class=\"custom-link__input\" type=\"text\" name=\"${this._type}_custom_icon\">\r\n                    </div>\r\n                </div>\r\n                <button class=\"custom-link__close js-custom-link-remove\"></button>\r\n            </div>`\r\n        );\r\n\r\n        this._container.addEventListener(\"click\", ({target}) => {\r\n            if (!target.classList || !target.classList.contains(\"js-custom-link-remove\")) { return; }\r\n            target.closest(\".js-custom-link\").remove();\r\n            this._save();\r\n        });\r\n\r\n        this._container.addEventListener(\"change\", ({target}) => {\r\n            if (!target.closest(\".js-custom-link\")) { return; }\r\n            this._save();\r\n        });\r\n\r\n        document.querySelector(`.js-${this._type}-custom-link-add`).addEventListener(\"click\", () => {\r\n            this._create(SyncedStorage.defaults[`${this._type}_custom_link`][0]);\r\n            this._save();\r\n        });\r\n    }\r\n\r\n    populate() {\r\n        HTML.inner(this._container, \"\");\r\n\r\n        const links = SyncedStorage.get(`${this._type}_custom_link`);\r\n        for (const link of links) {\r\n            this._create(link);\r\n        }\r\n    }\r\n\r\n    // TODO (KarlCastle?) Want to replace this with a CustomElement when the support is wider. CustomElements were added in FF63.\r\n    _create(link) {\r\n        const node = this._template.cloneNode(true);\r\n\r\n        node.querySelector(`[name=\"${this._type}_custom_enabled\"]`).checked = link.enabled;\r\n        node.querySelector(`[name=\"${this._type}_custom_name\"]`).value = link.name;\r\n        node.querySelector(`[name=\"${this._type}_custom_url\"]`).value = link.url;\r\n        node.querySelector(`[name=\"${this._type}_custom_icon\"]`).value = link.icon;\r\n\r\n        this._container.append(node);\r\n    }\r\n\r\n    _read(node) {\r\n        return {\r\n            \"enabled\": node.querySelector(`[name=\"${this._type}_custom_enabled\"]`).checked,\r\n            \"name\": node.querySelector(`[name=\"${this._type}_custom_name\"]`).value,\r\n            \"url\": node.querySelector(`[name=\"${this._type}_custom_url\"]`).value,\r\n            \"icon\": node.querySelector(`[name=\"${this._type}_custom_icon\"]`).value,\r\n        };\r\n    }\r\n\r\n    _save() {\r\n        const customLinks = this._container.querySelectorAll(\".js-custom-link\");\r\n        const links = [];\r\n        for (const row of customLinks) {\r\n            const link = this._read(row);\r\n            if (!link.enabled && !link.name && !link.url && !link.icon) {\r\n                continue;\r\n            }\r\n            links.push(link);\r\n        }\r\n\r\n        SyncedStorage.set(`${this._type}_custom_link`, links);\r\n        SaveIndicator.show();\r\n    }\r\n}\r\n\r\nexport {CustomLinks};\r\n","import {BackgroundSimple} from \"../../Core/BackgroundSimple\";\r\nimport {Localization} from \"../../Core/Localization/Localization\";\r\n\r\nclass ITADConnectionManager {\r\n\r\n    constructor() {\r\n        const [itadStatus, itadAction] = document.querySelectorAll(\".js-itad-status, .js-itad-action\");\r\n        this._itadStatus = itadStatus;\r\n        this._itadAction = itadAction;\r\n    }\r\n\r\n    async _clickHandler() {\r\n\r\n        const connect = this._itadStatus.classList.contains(\"itad-status--disconnected\");\r\n\r\n        if (connect) {\r\n            await BackgroundSimple.action(\"itad.authorize\");\r\n        } else {\r\n            await BackgroundSimple.action(\"itad.disconnect\");\r\n        }\r\n\r\n        this._itadStatus.textContent = connect ? Localization.str.connected : Localization.str.disconnected;\r\n        this._itadAction.textContent = connect ? Localization.str.disconnect : Localization.str.connect;\r\n\r\n        this._itadStatus.classList.toggle(\"itad-status--disconnected\", !connect);\r\n        this._itadStatus.classList.toggle(\"itad-status--connected\", connect);\r\n    }\r\n\r\n    async run() {\r\n\r\n        if (await BackgroundSimple.action(\"itad.isconnected\")) {\r\n            this._itadStatus.textContent = Localization.str.connected;\r\n            this._itadAction.textContent = Localization.str.disconnect;\r\n            this._itadStatus.classList.add(\"itad-status--connected\");\r\n        } else {\r\n            this._itadStatus.textContent = Localization.str.disconnected;\r\n            this._itadAction.textContent = Localization.str.connect;\r\n            this._itadStatus.classList.add(\"itad-status--disconnected\");\r\n        }\r\n\r\n        this._itadAction.addEventListener(\"click\", () => { this._clickHandler(); });\r\n    }\r\n}\r\n\r\nexport {ITADConnectionManager};\r\n","\r\nexport default {\r\n    \"brazilian\":\r\n        \"Berna, Mougevit, Ricci, Rubens Vincius, Scopel, Titoncio, Yachagon, xAranda\"\r\n        + \"(NO AUDIO),  Happy, Greg Strider, Lus, Matheus R., Rahone Marcelino\",\r\n\r\n    \"bulgarian\":\r\n        \"Castro Wilde, The Nominomicon, XepouH, sappy\",\r\n\r\n    \"czech\":\r\n        \"Arcane, Bezdak, Martin005[CZ], benetti32|cz, chriss01cz, dapil, xXx_P$0vcXVI_xXx\",\r\n\r\n    \"danish\":\r\n        \"Cake!, Chreddy, Mig_Mikkel [], Redzdaz, Saturate, SnoX, UltraSun, XDRosenheim, antim\",\r\n\r\n    \"dutch\":\r\n        \"AreUTalking2Meh, Bennievv, Boelens, Craven, Epicon, FooBar, HumanaSays, Justin, Nujj, Yeuxkes, Dylwan, Revadike\",\r\n\r\n    \"finnish\":\r\n        \"3ventic, Elekton, Hilloh, Lumppari, Mairo vain..., Major Parsnip, Master Indigo, Nightmare_182, \"\r\n        + \"NikoDaGreat, Tumpo, frozen.aerocrane, mkfin\",\r\n\r\n    \"french\":\r\n        \"Clockmaker, Nuator, Quaelor, Stumpokapow, Vardex, Yanuut, eucalyptux\",\r\n\r\n    \"german\":\r\n        \"Darkbird |, Edward Cullen, FuriousFry, Gatse, Incredipede, Invisi, MAGIC, Phenom, Pilzsuppe, \"\r\n        + \"Schnitzelfee, Son of Thor, addicT*, chrisli, dochris.2, larry_ @ DUAS NIMMA HALTEN, red, |ScReaM|,  Cookie Jar\",\r\n\r\n    \"greek\":\r\n        \"Coccinella, Pandorian, SeCTeen, Sub-Zero, George\",\r\n\r\n    \"hungarian\":\r\n        \"DonRoland, Mohariczozo_HUN, Noarpe, Sirpi, [T-A!] Underyx x 6, atomcsikk, french_salad, nArrow, VaHooK, Haewen\",\r\n\r\n    \"italian\":\r\n        \"Copons, Drake Fazuku, Rasin, Star1s3, ktber, Andrea Brandi, GiorgioBrux, Manfre\",\r\n\r\n    \"japanese\":\r\n        \"aoisensi, k725, sumannnala, Aufallinger\",\r\n\r\n    \"koreana\":\r\n        \"CanNaJun, Daum, Hirano, LJreal, RaWouk, Rasin, [GF]meyoung, fivestar, sunk,  Cookie Jar, \",\r\n\r\n    \"latam\":\r\n        \"Dilubar\",\r\n\r\n    \"norwegian\":\r\n        \"KappaHD, Lazberg, Morten242, Stian,  ChocolateShuvuu\",\r\n\r\n    \"polish\":\r\n        \"AciD, Bednar, Laserman//^^, Lordomus, Parseus, Xylo, Yobilat, Yocki, devLewy, mahon, skubi07, \"\r\n        + \"przemo20, BeWu, Przemysaw Siekiera\",\r\n\r\n    \"portuguese\":\r\n        \"Dr. Costa, Ex0tic, Matias G. H., MrAltamente, Reckoner, Sim, SupSuper, TheScientist, The_Monk, \"\r\n        + \"TilenoL, mgiovani\",\r\n\r\n    \"romanian\":\r\n        \"Stormania\",\r\n\r\n    \"russian\":\r\n        \"Engkariensis, Kosheyaka, M@gi$te Y0d@, Mechanic, Memfys, MrFreemanBBQ, Robin, Sh1fter, ShawNexT, \"\r\n        + \"The Freak, TheMrKochan, delfin_00, dragonsigh, Asscrab, maximmax42, Ryzhehvost, Vlad\",\r\n\r\n    \"schinese\":\r\n        \"Aslike2, Deparsoul, FelinaeEbony, Gold, Iuy, M@nkey, Mr. Error, MyLittleWarhammer, Rabbitism Bomb, Rasin, \"\r\n        + \"[CN]Johnson, i7killpii, mjy, ssenkrad, yuccatoo, deluxghost, Catt Crdls, Aufallinger, JackyTsu\",\r\n\r\n    \"spanish\":\r\n        \"#SG# Sharkiller, 00HiZaM, Alien8, Digmin3, ItsMarukka, Kharn Nete, MXX [PA-D], Profesor Pistacho, Robotnick, \"\r\n        + \"Silence, \\\\Vince, giraam, kalprestito, kulapik, p0tat0, wasakakero, xGreg, Eugenio \\\"Ryo567\\\" Martnez Segun, \"\r\n        + \"Ral, Vikandus\",\r\n\r\n    \"swedish\":\r\n        \"Chainsawkitten, Death King, Deques, Lumppari, [MG] Rubiin,  0x3 \",\r\n\r\n    \"tchinese\":\r\n        \"Atraveller, JD OwO, Lex Song, MoDMeR, Mr. Error, NOKIA SE, Rasin, omylist, tonyli1357, Revelation, \"\r\n        + \"Catt Crdls, Gaz, candela97, omylist\",\r\n\r\n    \"thai\":\r\n        \"Epicenter, Likecyber, Magnative, Radius, Rasin, [LPG] 7-elephant, [D-M-C]\",\r\n\r\n    \"turkish\":\r\n        \"Beedle, Dijkstra[TR], Eray, Gevanni, Grievous, Neadiatre[Trade] #SOMA, Sound of Night, Su1ciDe, eayurdaer, \"\r\n        + \"tyyaman, veteran, EK YALANCI, Mslm Bar Korkmazer, Serdar Salam, Volkangezer\",\r\n\r\n    \"ukrainian\":\r\n        \"Anakin Skywalker, BlackSwan, Dorimi, Gentleneer, GreK, MoDMeR, NutsUA, Peacefool Peopel, Smith M.D., \"\r\n        + \"Stakan, [BA]zekainhuman, Ryzhehvost, Taras\",\r\n\r\n    \"vietnamese\":\r\n        \"Connorn3794, Khanh Nguyen\",\r\n};\r\n","import {HTML} from \"../../Core/Html/Html\";\r\nimport {Language} from \"../../Core/Localization/Language\";\r\nimport {Localization} from \"../../Core/Localization/Localization\";\r\nimport LocaleCredits from \"./Data/LocaleCredits\";\r\n\r\nclass LocaleCreditsBuilder {\r\n\r\n    constructor() {\r\n        this._total = this._deepCount(Localization.str);\r\n    }\r\n\r\n    _deepCount(obj) {\r\n        let cnt = 0;\r\n        for (const key of Object.keys(obj)) {\r\n            if (!Localization.str[key]) { // don't count \"made up\" translations\r\n                continue;\r\n            }\r\n            if (typeof obj[key] === \"object\") {\r\n                cnt += this._deepCount(obj[key]);\r\n            } else if (obj[key] !== \"\") {\r\n                cnt++;\r\n            }\r\n        }\r\n        return cnt;\r\n    }\r\n\r\n    async _computeCoverage(lang) {\r\n        if (lang === \"english\") { return 100; }\r\n        const code = Language.languages[lang];\r\n        const locale = await Localization.loadLocalization(code);\r\n        const count = this._deepCount(locale);\r\n        return 100 * count / this._total;\r\n    }\r\n\r\n    async build() {\r\n\r\n        let html = \"\";\r\n        for (const [lang, credits] of Object.entries(LocaleCredits)) {\r\n\r\n            const coverage = await this._computeCoverage(lang);\r\n\r\n            html += `\r\n                <div class=\"lang js-lang\">\r\n                    <h2 class=\"lang__name\">${Localization.str.options.lang[lang]}</h2>\r\n                    <div class=\"lang__perc js-lang-perc\">${coverage.toFixed(1)}%</div>\r\n                    <div class=\"lang__credits\">${credits}</div>\r\n                </div>`;\r\n        }\r\n\r\n        HTML.inner(document.querySelector(\".js-credits-locale\"), html);\r\n    }\r\n}\r\n\r\nexport {LocaleCreditsBuilder};\r\n","\r\nexport default {\r\n    // general\r\n    \"show_progressbar\": \"show_progressbar\",\r\n    \"version_show\": \"options.version_show\",\r\n    \"replaceaccountname\": \"options.replace_account_name\",\r\n    \"show_backtotop\": \"options.show_backtotop\",\r\n    \"disablelinkfilter\": \"options.disablelinkfilter\",\r\n    \"send_age_info\": \"options.send_age_info\",\r\n    \"openinnewtab\": \"options.openinnewtab\",\r\n    \"installsteam\": [\r\n        \"options.install_steam_button\",\r\n        [\r\n            [\"show\", \"show\"],\r\n            [\"hide\", \"hide\"],\r\n            [\"replace\", \"options.replace_view_client\"]\r\n        ]\r\n    ],\r\n\r\n    // context menu\r\n    \"context_steam_store\": \"options.context_steam_store\",\r\n    \"context_steam_market\": \"options.context_steam_market\",\r\n    \"context_itad\": \"options.context_itad\",\r\n    \"context_bartervg\": \"options.context_bartervg\",\r\n    \"context_steamdb\": \"options.context_steamdb\",\r\n    \"context_steamdb_instant\": \"options.context_steamdb_instant\",\r\n    \"context_steam_keys\": \"options.context_steam_keys\",\r\n\r\n    // store\r\n    \"itad_import_library\": \"library_menu\",\r\n    \"itad_import_wishlist\": \"wishlist\",\r\n    \"add_to_waitlist\": \"options.add_to_waitlist\",\r\n\r\n    // highlight\r\n    \"highlight_owned\": \"options.owned\",\r\n    \"highlight_wishlist\": \"options.wishlist\",\r\n    \"highlight_coupon\": \"options.coupon\",\r\n    \"highlight_inv_gift\": \"options.gift\",\r\n    \"highlight_inv_guestpass\": \"options.guest\",\r\n    \"highlight_notinterested\": \"notinterested\",\r\n    \"highlight_collection\": \"options.collection\",\r\n    \"highlight_waitlist\": \"options.waitlist\",\r\n    \"highlight_excludef2p\": \"options.excludef2p\",\r\n\r\n    // tag\r\n    \"tag_owned\": \"options.owned\",\r\n    \"tag_wishlist\": \"options.wishlist\",\r\n    \"tag_coupon\": \"options.coupon\",\r\n    \"tag_inv_gift\": \"options.gift\",\r\n    \"tag_inv_guestpass\": \"options.guest\",\r\n    \"tag_notinterested\": \"notinterested\",\r\n    \"tag_collection\": \"options.collection\",\r\n    \"tag_waitlist\": \"options.waitlist\",\r\n    \"tag_short\": \"tag_short\",\r\n\r\n    // hide\r\n    \"hidetmsymbols\": \"options.hidetmsymbols\",\r\n\r\n    // store user notes\r\n    \"user_notes_app\": \"options.user_notes.app\",\r\n    \"user_notes_wishlist\": \"options.user_notes.wishlist\",\r\n    \"user_notes_adapter\": [\r\n        \"options.user_notes.loc\",\r\n        [\r\n            [\"synced_storage\", \"options.user_notes.synced_storage\"],\r\n            [\"idb\", \"options.user_notes.local\"],\r\n            // [\"itad\", \"options.user_notes.itad\"],\r\n        ],\r\n    ],\r\n\r\n    // store homepage\r\n    \"homepage_tab_selection\": [\r\n        \"options.homepage_default_tab\",\r\n        [\r\n            [\"remember\", \"options.homepage_default_tab_remember\"],\r\n            [\"tab_newreleases_content_trigger\", \"options.homepage_default_tab_newreleases\"],\r\n            [\"tab_topsellers_content_trigger\", \"options.homepage_default_tab_topsellers\"],\r\n            [\"tab_upcoming_content_trigger\", \"options.homepage_default_tab_upcoming\"],\r\n            [\"tab_specials_content_trigger\", \"options.homepage_default_tab_specials\"]\r\n        ]\r\n    ],\r\n\r\n    // store wishlist\r\n    \"showemptywishlist\": \"options.show_empty_wishlist\",\r\n    \"showwishliststats\": \"options.show_wishlist_stats\",\r\n    \"oneclickremovewl\": \"options.oneclickremovewl\",\r\n\r\n    // store app page\r\n    \"mp4video\": \"options.mp4video\",\r\n    \"showsupportinfo\": \"options.supportinfo\",\r\n    \"showdrm\": \"options.drm\",\r\n    \"showviewinlibrary\": \"options.show_view_in_library\",\r\n    \"show_package_info\": \"options.show_package_info\",\r\n    \"showachinstore\": \"achievements.option\",\r\n    \"purchase_dates\": \"options.purchase_dates\",\r\n    \"show_badge_progress\": \"options.show_badge_progress\",\r\n    \"show_coupon\": \"options.show_coupon\",\r\n    \"removebroadcasts\": \"options.removebroadcasts\",\r\n    \"exfgls\": \"options.exfgls\",\r\n    \"showmcus\": \"options.metacritic\",\r\n    \"showoc\": \"options.opencritic\",\r\n    \"showhltb\": \"options.hltb\",\r\n    \"showwsgf\": \"options.wsgf\",\r\n    \"show_steamchart_info\": \"options.show_steamchart_info\",\r\n    \"show_steamspy_info\": \"options.show_steamspy_info\",\r\n    \"showastatslink\": \"options.show_astatslink\",\r\n    \"showitadlinks\": \"options.itadlinks\",\r\n    \"showsteamdb\": \"options.steamdb\",\r\n    \"showbartervg\": \"options.showbartervg\",\r\n    \"showsteamcardexchange\": \"options.store_steamcards\",\r\n    \"showprotondb\": \"options.protondb\",\r\n    \"showcompletionistme\": \"options.completionistme\",\r\n    \"showpcgw\": \"options.pcgw\",\r\n    \"showtwitch\": \"options.twitch\",\r\n    \"showyoutube\": \"options.youtube\",\r\n    \"showyoutubegameplay\": \"options.show_youtubegameplay\",\r\n    \"showyoutubereviews\": \"options.show_youtubereviews\",\r\n\r\n    // store general\r\n    \"horizontalscrolling\": \"options.horizontalscrolling\",\r\n    \"show_early_access\": \"options.show_early_access\",\r\n    \"show_alternative_linux_icon\": \"options.show_alternative_linux_icon\",\r\n    \"skip_got_steam\": \"options.skip_got_steam\",\r\n\r\n    // price\r\n    \"showlowestprice\": \"options.lowestprice\",\r\n    \"showlowestprice_onwishlist\": \"options.lowestprice_onwishlist\",\r\n    \"showlowestpricecoupon\": \"options.lowestprice_coupon\",\r\n    \"showallstores\": \"options.stores_all\",\r\n\r\n    // regional price\r\n    \"regional_hideworld\": \"options.regional_hideworld\",\r\n    \"showregionalprice\": [\r\n        \"options.regional_price_on\",\r\n        [\r\n            [\"mouse\", \"options.regional_price_mouse\"],\r\n            [\"always\", \"always\"],\r\n            [\"off\", \"never\"]\r\n        ]\r\n    ],\r\n\r\n    // market\r\n    \"showmarkettotal\": \"options.market_total\",\r\n    \"hideactivelistings\": \"options.hideactivelistings\",\r\n    \"showlowestmarketprice\": \"options.showlowestmarketprice\",\r\n\r\n    // community\r\n    \"quickinv\": \"options.quickinv\",\r\n    \"show1clickgoo\": \"options.show1clickgoo\",\r\n    \"showinvnav\": \"options.inventory_nav_text\",\r\n\r\n    // profile\r\n    \"show_custom_themes\": \"options.show_custom_themes\",\r\n    \"profile_pinned_bg\": \"options.profile_pinned_bg\",\r\n    \"show_wishlist_link\": \"options.show_wishlist_link\",\r\n    \"show_wishlist_count\": \"options.show_wishlist_count\",\r\n    \"showsteamrepapi\": \"options.steamrepapi\",\r\n    \"profile_steamid\": \"options.profile_steamid\",\r\n    \"profile_showcase_twitch\": \"options.profile_showcase_twitch\",\r\n    \"profile_showcase_own_twitch\": \"options.profile_showcase_own_twitch\",\r\n    \"profile_showcase_twitch_profileonly\": \"options.profile_showcase_twitch_profileonly\",\r\n\r\n    // friend activity\r\n    \"replacecommunityhublinks\": \"options.replacecommunityhublinks\",\r\n    \"hideannouncementcomments\": \"options.hideannouncementcomments\",\r\n\r\n    // community general\r\n    \"show_profile_link_images\": [\r\n        \"options.profile_link_images\",\r\n        [\r\n            [\"gray\", \"options.profile_link_images_gray\"],\r\n            [\"color\", \"options.profile_link_images_color\"],\r\n            [\"none\", \"options.profile_link_images_none\"]\r\n        ]\r\n    ],\r\n    \"community_default_tab\": [\r\n        \"options.community_default_tab\",\r\n        [\r\n            [\"\", \"all\"],\r\n            [\"discussions\", \"discussions\"],\r\n            [\"screenshots\", \"options.screenshots\"],\r\n            [\"images\", \"options.artwork\"],\r\n            [\"broadcasts\", \"options.broadcasts\"],\r\n            [\"videos\", \"options.videos\"],\r\n            [\"workshop\", \"workshop.workshop\"],\r\n            [\"allnews\", \"news\"],\r\n            [\"guides\", \"guides\"],\r\n            [\"reviews\", \"reviews\"],\r\n        ]\r\n    ],\r\n    \"showallachievements\": \"options.showallachievements\",\r\n    \"showallstats\": \"options.showallstats\",\r\n    \"hidespamcomments\": \"options.hidespamcomments\",\r\n    \"steamcardexchange\": \"options.steamcardexchange\",\r\n    \"wlbuttoncommunityapp\": \"options.wlbuttoncommunityapp\",\r\n    \"removeguideslanguagefilter\": \"options.removeguideslanguagefilter\",\r\n};\r\n","import {HTML} from \"../../Core/Html/Html\";\r\nimport {Localization} from \"../../Core/Localization/Localization\";\r\n\r\nclass OptionsTranslator {\r\n\r\n    static getTranslation(key) {\r\n        let translation = Localization.getString(key);\r\n        if (!translation) {\r\n            console.error(\"Missing translation for %s\", key);\r\n            return null;\r\n        }\r\n        if (key.startsWith(\"options.context_\")) {\r\n            translation = translation.replace(\"__query__\", \"...\");\r\n        }\r\n        return translation;\r\n    }\r\n\r\n    static _localizeText() {\r\n        const nodes = document.querySelectorAll(\"[data-locale-text]\");\r\n        for (const node of nodes) {\r\n            const translation = this.getTranslation(node.dataset.localeText);\r\n            if (translation) {\r\n                node.textContent = translation;\r\n            }\r\n        }\r\n    }\r\n\r\n    static _localizeHtml() {\r\n        const nodes = document.querySelectorAll(\"[data-locale-html]\");\r\n        for (const node of nodes) {\r\n            const translation = this.getTranslation(node.dataset.localeHtml);\r\n            if (translation) {\r\n                HTML.inner(node, translation);\r\n            }\r\n        }\r\n    }\r\n\r\n    static _localizeLanguageOptions() {\r\n        const nodes = document.querySelectorAll(\"#warning_language option\");\r\n        for (const node of nodes) {\r\n            const lang = node.textContent;\r\n            const langTrl = Localization.str.options.lang[node.value.toLowerCase()];\r\n            if (lang !== langTrl) {\r\n                node.textContent = `${lang} (${langTrl})`;\r\n            }\r\n        }\r\n    }\r\n\r\n    static translate() {\r\n\r\n        document.title = `Augmented Steam ${Localization.str.thewordoptions}`;\r\n        this._localizeText();\r\n        this._localizeHtml();\r\n        this._localizeLanguageOptions();\r\n\r\n        // this is not very clean, but I can't figure out better solution right now, having it in-place would be nicer\r\n        const url = \"https://github.com/IsThereAnyDeal/AugmentedSteam/graphs/contributors\";\r\n        HTML.inner(\r\n            document.querySelector(\".js-contributors-text\"),\r\n            Localization.getString(\"options.with_help_of\")\r\n                .replace(\r\n                    \"__contributors__\",\r\n                    `<a href='${url}'>${Localization.getString(\"options.contributors\")}</a>`\r\n                )\r\n        );\r\n    }\r\n}\r\n\r\nexport {OptionsTranslator};\r\n","export const CountryList = {\r\n    \"\": \"None\",\r\n    \"af\": \"Afghanistan\",\r\n    \"al\": \"Albania\",\r\n    \"dz\": \"Algeria\",\r\n    \"as\": \"American Samoa\",\r\n    \"ad\": \"Andorra\",\r\n    \"ao\": \"Angola\",\r\n    \"ai\": \"Anguilla\",\r\n    \"ag\": \"Antigua and Barbuda\",\r\n    \"ar\": \"Argentina\",\r\n    \"am\": \"Armenia\",\r\n    \"aw\": \"Aruba\",\r\n    \"au\": \"Australia\",\r\n    \"at\": \"Austria\",\r\n    \"az\": \"Azerbaijan\",\r\n    \"bs\": \"Bahamas\",\r\n    \"bh\": \"Bahrain\",\r\n    \"bd\": \"Bangladesh\",\r\n    \"bb\": \"Barbados\",\r\n    \"by\": \"Belarus\",\r\n    \"be\": \"Belgium\",\r\n    \"bz\": \"Belize\",\r\n    \"bj\": \"Benin\",\r\n    \"bm\": \"Bermuda\",\r\n    \"bt\": \"Bhutan\",\r\n    \"bo\": \"Bolivia\",\r\n    \"ba\": \"Bosnia and Herzegovina\",\r\n    \"bw\": \"Botswana\",\r\n    \"bv\": \"Bouvet Island\",\r\n    \"br\": \"Brazil\",\r\n    \"io\": \"British Indian Ocean Territory\",\r\n    \"vg\": \"British Virgin Islands\",\r\n    \"bn\": \"Brunei\",\r\n    \"bg\": \"Bulgaria\",\r\n    \"bf\": \"Burkina Faso\",\r\n    \"bi\": \"Burundi\",\r\n    \"kh\": \"Cambodia\",\r\n    \"cm\": \"Cameroon\",\r\n    \"ca\": \"Canada\",\r\n    \"cv\": \"Cape Verde\",\r\n    \"ky\": \"Cayman Islands\",\r\n    \"cf\": \"Central African Republic\",\r\n    \"td\": \"Chad\",\r\n    \"cl\": \"Chile\",\r\n    \"cn\": \"China\",\r\n    \"co\": \"Colombia\",\r\n    \"km\": \"Comoros\",\r\n    \"cg\": \"Congo - Brazzaville\",\r\n    \"cd\": \"Congo - Kinshasa\",\r\n    \"ck\": \"Cook Islands\",\r\n    \"cr\": \"Costa Rica\",\r\n    \"hr\": \"Croatia\",\r\n    \"cu\": \"Cuba\",\r\n    \"cy\": \"Cyprus\",\r\n    \"cz\": \"Czech Republic\",\r\n    \"ci\": \"Cte dIvoire\",\r\n    \"dk\": \"Denmark\",\r\n    \"dj\": \"Djibouti\",\r\n    \"dm\": \"Dominica\",\r\n    \"do\": \"Dominican Republic\",\r\n    \"ec\": \"Ecuador\",\r\n    \"eg\": \"Egypt\",\r\n    \"sv\": \"El Salvador\",\r\n    \"gq\": \"Equatorial Guinea\",\r\n    \"er\": \"Eritrea\",\r\n    \"ee\": \"Estonia\",\r\n    \"et\": \"Ethiopia\",\r\n    \"fk\": \"Falkland Islands\",\r\n    \"fo\": \"Faroe Islands\",\r\n    \"fj\": \"Fiji\",\r\n    \"fi\": \"Finland\",\r\n    \"fr\": \"France\",\r\n    \"gf\": \"French Guiana\",\r\n    \"pf\": \"French Polynesia\",\r\n    \"tf\": \"French Southern Territories\",\r\n    \"ga\": \"Gabon\",\r\n    \"gm\": \"Gambia\",\r\n    \"ge\": \"Georgia\",\r\n    \"de\": \"Germany\",\r\n    \"gh\": \"Ghana\",\r\n    \"gi\": \"Gibraltar\",\r\n    \"gr\": \"Greece\",\r\n    \"gl\": \"Greenland\",\r\n    \"gd\": \"Grenada\",\r\n    \"gp\": \"Guadeloupe\",\r\n    \"gu\": \"Guam\",\r\n    \"gt\": \"Guatemala\",\r\n    \"gg\": \"Guernsey\",\r\n    \"gn\": \"Guinea\",\r\n    \"gw\": \"Guinea-Bissau\",\r\n    \"gy\": \"Guyana\",\r\n    \"ht\": \"Haiti\",\r\n    \"hm\": \"Heard Island and McDonald Islands\",\r\n    \"hn\": \"Honduras\",\r\n    \"hk\": \"Hong Kong SAR China\",\r\n    \"hu\": \"Hungary\",\r\n    \"is\": \"Iceland\",\r\n    \"in\": \"India\",\r\n    \"id\": \"Indonesia\",\r\n    \"ir\": \"Iran\",\r\n    \"iq\": \"Iraq\",\r\n    \"ie\": \"Ireland\",\r\n    \"im\": \"Isle of Man\",\r\n    \"il\": \"Israel\",\r\n    \"it\": \"Italy\",\r\n    \"jm\": \"Jamaica\",\r\n    \"jp\": \"Japan\",\r\n    \"je\": \"Jersey\",\r\n    \"jo\": \"Jordan\",\r\n    \"kz\": \"Kazakhstan\",\r\n    \"ke\": \"Kenya\",\r\n    \"ki\": \"Kiribati\",\r\n    \"kw\": \"Kuwait\",\r\n    \"kg\": \"Kyrgyzstan\",\r\n    \"la\": \"Laos\",\r\n    \"lv\": \"Latvia\",\r\n    \"lb\": \"Lebanon\",\r\n    \"ls\": \"Lesotho\",\r\n    \"lr\": \"Liberia\",\r\n    \"ly\": \"Libya\",\r\n    \"li\": \"Liechtenstein\",\r\n    \"lt\": \"Lithuania\",\r\n    \"lu\": \"Luxembourg\",\r\n    \"mo\": \"Macau SAR China\",\r\n    \"mk\": \"Macedonia\",\r\n    \"mg\": \"Madagascar\",\r\n    \"mw\": \"Malawi\",\r\n    \"my\": \"Malaysia\",\r\n    \"mv\": \"Maldives\",\r\n    \"ml\": \"Mali\",\r\n    \"mt\": \"Malta\",\r\n    \"mh\": \"Marshall Islands\",\r\n    \"mq\": \"Martinique\",\r\n    \"mr\": \"Mauritania\",\r\n    \"mu\": \"Mauritius\",\r\n    \"yt\": \"Mayotte\",\r\n    \"mx\": \"Mexico\",\r\n    \"fm\": \"Micronesia\",\r\n    \"md\": \"Moldova\",\r\n    \"mc\": \"Monaco\",\r\n    \"mn\": \"Mongolia\",\r\n    \"ME\": \"Montenegro\",\r\n    \"MS\": \"Montserrat\",\r\n    \"MA\": \"Morocco\",\r\n    \"MZ\": \"Mozambique\",\r\n    \"MM\": \"Myanmar [Burma]\",\r\n    \"NA\": \"Namibia\",\r\n    \"NR\": \"Nauru\",\r\n    \"NP\": \"Nepal\",\r\n    \"NL\": \"Netherlands\",\r\n    \"AN\": \"Netherlands Antilles\",\r\n    \"NC\": \"New Caledonia\",\r\n    \"NZ\": \"New Zealand\",\r\n    \"NI\": \"Nicaragua\",\r\n    \"NE\": \"Niger\",\r\n    \"NG\": \"Nigeria\",\r\n    \"NU\": \"Niue\",\r\n    \"NF\": \"Norfolk Island\",\r\n    \"KP\": \"North Korea\",\r\n    \"MP\": \"Northern Mariana Islands\",\r\n    \"NO\": \"Norway\",\r\n    \"OM\": \"Oman\",\r\n    \"PK\": \"Pakistan\",\r\n    \"PW\": \"Palau\",\r\n    \"PS\": \"Palestinian Territories\",\r\n    \"PA\": \"Panama\",\r\n    \"PG\": \"Papua New Guinea\",\r\n    \"PY\": \"Paraguay\",\r\n    \"PE\": \"Peru\",\r\n    \"PH\": \"Philippines\",\r\n    \"PN\": \"Pitcairn Islands\",\r\n    \"PL\": \"Poland\",\r\n    \"PT\": \"Portugal\",\r\n    \"PR\": \"Puerto Rico\",\r\n    \"QA\": \"Qatar\",\r\n    \"RO\": \"Romania\",\r\n    \"RU\": \"Russia\",\r\n    \"RW\": \"Rwanda\",\r\n    \"RE\": \"Runion\",\r\n    \"SH\": \"Saint Helena\",\r\n    \"KN\": \"Saint Kitts and Nevis\",\r\n    \"LC\": \"Saint Lucia\",\r\n    \"PM\": \"Saint Pierre and Miquelon\",\r\n    \"VC\": \"Saint Vincent and the Grenadines\",\r\n    \"WS\": \"Samoa\",\r\n    \"SM\": \"San Marino\",\r\n    \"SA\": \"Saudi Arabia\",\r\n    \"SN\": \"Senegal\",\r\n    \"RS\": \"Serbia\",\r\n    \"SC\": \"Seychelles\",\r\n    \"SL\": \"Sierra Leone\",\r\n    \"SG\": \"Singapore\",\r\n    \"SK\": \"Slovakia\",\r\n    \"SI\": \"Slovenia\",\r\n    \"SB\": \"Solomon Islands\",\r\n    \"SO\": \"Somalia\",\r\n    \"ZA\": \"South Africa\",\r\n    \"GS\": \"South Georgia\",\r\n    \"KR\": \"South Korea\",\r\n    \"ES\": \"Spain\",\r\n    \"LK\": \"Sri Lanka\",\r\n    \"SD\": \"Sudan\",\r\n    \"SR\": \"Suriname\",\r\n    \"SZ\": \"Swaziland\",\r\n    \"SE\": \"Sweden\",\r\n    \"CH\": \"Switzerland\",\r\n    \"SY\": \"Syria\",\r\n    \"ST\": \"So Tom and Prncipe\",\r\n    \"TW\": \"Taiwan\",\r\n    \"TJ\": \"Tajikistan\",\r\n    \"TZ\": \"Tanzania\",\r\n    \"TH\": \"Thailand\",\r\n    \"TL\": \"Timor-Leste\",\r\n    \"TG\": \"Togo\",\r\n    \"TK\": \"Tokelau\",\r\n    \"TO\": \"Tonga\",\r\n    \"TT\": \"Trinidad and Tobago\",\r\n    \"TN\": \"Tunisia\",\r\n    \"TR\": \"Turkey\",\r\n    \"TM\": \"Turkmenistan\",\r\n    \"TC\": \"Turks and Caicos Islands\",\r\n    \"TV\": \"Tuvalu\",\r\n    \"UM\": \"U.S. Minor Outlying Islands\",\r\n    \"VI\": \"U.S. Virgin Islands\",\r\n    \"UG\": \"Uganda\",\r\n    \"UA\": \"Ukraine\",\r\n    \"AE\": \"United Arab Emirates\",\r\n    \"GB\": \"United Kingdom\",\r\n    \"US\": \"United States\",\r\n    \"UY\": \"Uruguay\",\r\n    \"UZ\": \"Uzbekistan\",\r\n    \"VU\": \"Vanuatu\",\r\n    \"VA\": \"Vatican City\",\r\n    \"VE\": \"Venezuela\",\r\n    \"VN\": \"Vietnam\",\r\n    \"WF\": \"Wallis and Futuna\",\r\n    \"EH\": \"Western Sahara\",\r\n    \"YE\": \"Yemen\",\r\n    \"ZM\": \"Zambia\",\r\n    \"ZW\": \"Zimbabwe\"\r\n};\r\n","import {HTML} from \"../../Core/Html/Html\";\r\nimport {SyncedStorage} from \"../../Core/Storage/SyncedStorage\";\r\nimport {CountryList} from \"./Data/CountryList\";\r\nimport {SaveIndicator} from \"./SaveIndicator\";\r\n\r\nclass Region {\r\n\r\n    static init() {\r\n        this._container = document.querySelector(\".js-regions\");\r\n\r\n        this._container\r\n            .addEventListener(\"click\", e => { Region._removeHandler(e); });\r\n\r\n        this._container.addEventListener(\"change\", e => {\r\n            const node = e.target.closest(\".js-region-parent\");\r\n            if (node) {\r\n                Region._changeFlag(node.querySelector(\".es-flag\"), e.target);\r\n            }\r\n            this._save();\r\n        });\r\n\r\n        document.querySelector(\".js-region-add\")\r\n            .addEventListener(\"click\", () => {\r\n                Region._addRegionHtml(\"\");\r\n            });\r\n\r\n        document.querySelector(\".js-region-reset\")\r\n            .addEventListener(\"click\", () => {\r\n                Region.loadDefault();\r\n                Region._save();\r\n            });\r\n\r\n        document.querySelector(\".js-region-clear\")\r\n            .addEventListener(\"click\", () => {\r\n                Region._clear();\r\n                Region._save();\r\n            });\r\n    }\r\n\r\n    static loadDefault() {\r\n        this._clear();\r\n        SyncedStorage.remove(\"regional_countries\");\r\n        this.populate();\r\n    }\r\n\r\n    static _changeFlag(node, selectnode) {\r\n        node.className = \"\";\r\n        node.classList.add(`es-flag--${selectnode.value}`, \"es-flag\");\r\n    }\r\n\r\n    static _removeHandler(e) {\r\n        if (!e.target || !e.target.classList || !e.target.classList.contains(\"js-region-remove\")) { return; }\r\n        e.target.closest(\".js-region-parent\").remove();\r\n        this._save();\r\n    }\r\n\r\n    static _save() {\r\n        const value = [];\r\n        const nodes = document.querySelectorAll(\".js-region\");\r\n        for (const node of nodes) {\r\n            if (node.value && node.value !== \"\") {\r\n                value.push(node.value);\r\n            }\r\n        }\r\n\r\n        SyncedStorage.set(\"regional_countries\", value);\r\n        SaveIndicator.show();\r\n    }\r\n\r\n    static _clear() {\r\n        HTML.inner(this._container, \"\");\r\n    }\r\n\r\n    static _addRegionHtml(country) {\r\n        let options = \"\";\r\n        for (const cc in CountryList) {\r\n            const selected = (cc.toLowerCase() === country ? \" selected='selected'\" : \"\");\r\n            options += `<option value='${cc.toLowerCase()}'${selected}>${CountryList[cc]}</option>`;\r\n        }\r\n\r\n        let countryClass = \"\";\r\n        if (country) {\r\n            countryClass = `es-flag--${country}`;\r\n        }\r\n\r\n        const html\r\n            = ` <div class=\"option js-region-parent\">\r\n                    <span class='es-flag ${countryClass}'></span>\r\n                    <select class='option__region js-region'>${options}</select>\r\n                    <button type=\"button\" class=\"custom-link__close js-region-remove\"></button>\r\n                </div>`;\r\n\r\n        HTML.beforeEnd(this._container, html);\r\n    }\r\n\r\n    static populate() {\r\n        this._clear();\r\n        const countries = SyncedStorage.get(\"regional_countries\");\r\n        for (const country of countries) {\r\n            this._addRegionHtml(country);\r\n        }\r\n    }\r\n}\r\n\r\nexport {Region};\r\n","import {HTML} from \"../../Core/Html/Html\";\r\nimport {Localization} from \"../../Core/Localization/Localization\";\r\nimport {TimeUtils} from \"../../modulesCore\";\r\n\r\nclass Sidebar {\r\n\r\n    static _scrollTo(node) {\r\n        if (!node) { return; }\r\n        const topOffset = window.scrollY + node.getBoundingClientRect().top - 50;\r\n        window.scrollTo({\"top\": topOffset, \"left\": 0, \"behavior\": \"smooth\"});\r\n    }\r\n\r\n    static _highlight(contentNode, sidebarNode) {\r\n        const currentSelected = document.querySelector(\".js-sb-sec.is-selected\");\r\n\r\n        if (currentSelected === sidebarNode) {\r\n            return;\r\n        } else if (currentSelected) {\r\n            currentSelected.classList.remove(\"is-selected\");\r\n        }\r\n\r\n        sidebarNode.classList.add(\"is-selected\");\r\n\r\n        const currentHighlight = document.querySelector(\".js-section.is-highlighted\");\r\n        if (currentHighlight) {\r\n            currentHighlight.classList.remove(\"is-highlighted\");\r\n        }\r\n        contentNode.classList.add(\"is-highlighted\");\r\n    }\r\n\r\n    static _handleClick(e) {\r\n        Sidebar._handleCategoryClick(e);\r\n        Sidebar._handleSectionClick(e);\r\n    }\r\n\r\n    static _handleCategoryClick(e) {\r\n        const category = e.target.closest(\".js-sb-cat\");\r\n        if (category === null) {\r\n            return;\r\n        }\r\n\r\n        const contentId = category.dataset.id;\r\n        const newPage = document.querySelector(`.js-content[data-id='${contentId}']`).closest(\".js-page\");\r\n        const currentPage = document.querySelector(\".js-page.is-open\");\r\n\r\n        const group = category.closest(\".js-sb-grp\");\r\n        const hasSections = group.querySelector(\".js-sb-sections\");\r\n\r\n        if (newPage !== currentPage) {\r\n            currentPage.classList.remove(\"is-open\");\r\n            newPage.classList.add(\"is-open\");\r\n\r\n            const nodes = document.querySelectorAll(\".js-sb-grp.is-selected\");\r\n            for (const node of nodes) {\r\n                node.classList.remove(\"is-selected\");\r\n            }\r\n\r\n            // scroll only when changing content\r\n            if (hasSections) {\r\n                Sidebar._scrollTo(newPage);\r\n            } else {\r\n                window.scrollTo(0, 0);\r\n            }\r\n        }\r\n\r\n        group.classList.toggle(\"is-selected\");\r\n    }\r\n\r\n    static _handleSectionClick(e) {\r\n\r\n        const section = e.target.closest(\".js-sb-sec\");\r\n        if (!section) { return; }\r\n\r\n        const row = section.closest(\".js-sb-grp\");\r\n        if (!row) { return; }\r\n\r\n        for (const [contentNode, sidebarNode] of Sidebar._contentNodes) {\r\n            if (sidebarNode === section) {\r\n                Sidebar._scrollTo(contentNode);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    static _scrollHandler() {\r\n\r\n        if (!this._timer) {\r\n            this._timer = TimeUtils.resettableTimer(() => {\r\n                for (const [contentNode, sidebarNode] of Sidebar._contentNodes) {\r\n                    const rect = contentNode.getBoundingClientRect();\r\n\r\n                    if ((rect.top < 0 && rect.bottom > window.innerHeight) || rect.top > 0) {\r\n                        Sidebar._highlight(contentNode, sidebarNode);\r\n                        return;\r\n                    }\r\n                }\r\n            }, 100);\r\n        } else if (!this._timer.running) {\r\n            this._timer.reset();\r\n        }\r\n    }\r\n\r\n    static create() {\r\n\r\n        Sidebar._contentNodes = [];\r\n\r\n        const categories = [\r\n            [\"general\", \"options.general\"],\r\n            [\"store\", \"store\"],\r\n            [\"price\", \"price\"],\r\n            [\"community\", \"community\"],\r\n            [\"news\", \"news\"],\r\n            [\"about\", \"about\"],\r\n        ];\r\n\r\n        const sidebarEl = document.querySelector(\".js-sb\");\r\n\r\n        for (const [contentId, localeKey] of categories) {\r\n            const contentEl = document.querySelector(`.js-content[data-id='${contentId}']`);\r\n\r\n            let multiClass = \"\";\r\n            let sectionsNode = null;\r\n\r\n            if (contentEl) {\r\n\r\n                const sections = contentEl.querySelectorAll(\".js-section\");\r\n                if (sections.length > 0) {\r\n                    sectionsNode = document.createElement(\"ul\");\r\n                    sectionsNode.classList.add(\"sidebar__children\", \"js-sb-sections\");\r\n\r\n                    multiClass = \" sidebar__item--multi\";\r\n                    sections.forEach(section => {\r\n                        const sectionMenu = document.createElement(\"li\");\r\n                        sectionMenu.classList.add(\"sidebar__item\", \"sidebar__item--child\", \"js-sb-sec\");\r\n                        sectionMenu.innerText = section.querySelector(\".js-section-head\").textContent;\r\n\r\n                        sectionsNode.append(sectionMenu);\r\n                        Sidebar._contentNodes.push([section, sectionMenu]);\r\n                    });\r\n                }\r\n\r\n            } else {\r\n                console.warn(\"Content for sidebar entry not found\");\r\n            }\r\n\r\n            const groupNode = HTML.element(\r\n                `<div class=\"sidebar__group js-sb-grp\">\r\n                    <a class=\"sidebar__item sidebar__item--cat${multiClass} js-sb-cat\" data-id=\"${contentId}\">\r\n                        ${Localization.getString(localeKey)}\r\n                    </a>\r\n                </div>`\r\n            );\r\n\r\n            if (sectionsNode) {\r\n                groupNode.append(sectionsNode);\r\n            }\r\n\r\n            sidebarEl.append(groupNode);\r\n        }\r\n\r\n        sidebarEl.addEventListener(\"click\", Sidebar._handleClick);\r\n        document.addEventListener(\"scroll\", Sidebar._scrollHandler);\r\n        Sidebar._scrollHandler();\r\n    }\r\n\r\n}\r\n\r\nexport {Sidebar};\r\n","export const StoreList = [\r\n    {\r\n        \"id\": \"game2\",\r\n        \"title\": \"2game\",\r\n        \"color\": \"#523f95\"\r\n    },\r\n    {\r\n        \"id\": \"allyouplay\",\r\n        \"title\": \"AllYouPlay\",\r\n        \"color\": \"#e9267b\"\r\n    },\r\n    {\r\n        \"id\": \"amazonus\",\r\n        \"title\": \"Amazon\",\r\n        \"color\": \"#fcc588\"\r\n    },\r\n    {\r\n        \"id\": \"bistore\",\r\n        \"title\": \"BI Store\",\r\n        \"color\": \"#f74040\"\r\n    },\r\n    {\r\n        \"id\": \"battlenet\",\r\n        \"title\": \"Blizzard\",\r\n        \"color\": \"#00cbe6\"\r\n    },\r\n    {\r\n        \"id\": \"chrono\",\r\n        \"title\": \"Chrono.gg\",\r\n        \"color\": \"#59c4c5\"\r\n    },\r\n    {\r\n        \"id\": \"dlgamer\",\r\n        \"title\": \"DLGamer\",\r\n        \"color\": \"#f5fe94\"\r\n    },\r\n    {\r\n        \"id\": \"direct2drive\",\r\n        \"title\": \"Direct2Drive\",\r\n        \"color\": \"#1df884\"\r\n    },\r\n    {\r\n        \"id\": \"discord\",\r\n        \"title\": \"Discord Store\",\r\n        \"color\": \"#6f85d4\"\r\n    },\r\n    {\r\n        \"id\": \"dreamgame\",\r\n        \"title\": \"Dreamgame\",\r\n        \"color\": \"#497791\"\r\n    },\r\n    {\r\n        \"id\": \"epic\",\r\n        \"title\": \"Epic Game Store\",\r\n        \"color\": \"#0078f2\"\r\n    },\r\n    {\r\n        \"id\": \"bundlestars\",\r\n        \"title\": \"Fanatical\",\r\n        \"color\": \"#ff9800\"\r\n    },\r\n    {\r\n        \"id\": \"fireflower\",\r\n        \"title\": \"FireFlower\",\r\n        \"color\": \"#29698c\"\r\n    },\r\n    {\r\n        \"id\": \"gog\",\r\n        \"title\": \"GOG\",\r\n        \"color\": \"#f16421\"\r\n    },\r\n    {\r\n        \"id\": \"gamejolt\",\r\n        \"title\": \"Game Jolt\",\r\n        \"color\": \"#2f7f6f\"\r\n    },\r\n    {\r\n        \"id\": \"gamebillet\",\r\n        \"title\": \"GameBillet\",\r\n        \"color\": \"#f22f15\"\r\n    },\r\n    {\r\n        \"id\": \"impulse\",\r\n        \"title\": \"GameStop PC\",\r\n        \"color\": \"#c63f62\"\r\n    },\r\n    {\r\n        \"id\": \"gamersgate\",\r\n        \"title\": \"GamersGate\",\r\n        \"color\": \"#fc5d5d\"\r\n    },\r\n    {\r\n        \"id\": \"gamesplanetde\",\r\n        \"title\": \"GamesPlanet DE\",\r\n        \"color\": \"#f6a740\"\r\n    },\r\n    {\r\n        \"id\": \"gamesplanetfr\",\r\n        \"title\": \"GamesPlanet FR\",\r\n        \"color\": \"#f6a740\"\r\n    },\r\n    {\r\n        \"id\": \"gamesplanet\",\r\n        \"title\": \"GamesPlanet UK\",\r\n        \"color\": \"#f6a740\"\r\n    },\r\n    {\r\n        \"id\": \"gamesplanetus\",\r\n        \"title\": \"GamesPlanet US\",\r\n        \"color\": \"#f6a740\"\r\n    },\r\n    {\r\n        \"id\": \"gamesrepublic\",\r\n        \"title\": \"GamesRepublic\",\r\n        \"color\": \"#ef0e38\"\r\n    },\r\n    {\r\n        \"id\": \"gemly\",\r\n        \"title\": \"Gemly\",\r\n        \"color\": \"#ce2745\"\r\n    },\r\n    {\r\n        \"id\": \"greenmangaming\",\r\n        \"title\": \"GreenManGaming\",\r\n        \"color\": \"#21a930\"\r\n    },\r\n    {\r\n        \"id\": \"humblestore\",\r\n        \"title\": \"Humble Store\",\r\n        \"color\": \"#ff3e1b\"\r\n    },\r\n    {\r\n        \"id\": \"humblewidgets\",\r\n        \"title\": \"Humble Widgets\",\r\n        \"color\": \"#f8300c\"\r\n    },\r\n    {\r\n        \"id\": \"indiegalastore\",\r\n        \"title\": \"IndieGala Store\",\r\n        \"color\": \"#ffb4e0\"\r\n    },\r\n    {\r\n        \"id\": \"itchio\",\r\n        \"title\": \"Itch.io\",\r\n        \"color\": \"#fa5c5c\"\r\n    },\r\n    {\r\n        \"id\": \"lbostore\",\r\n        \"title\": \"LBOstore\",\r\n        \"color\": \"#005268\"\r\n    },\r\n    {\r\n        \"id\": \"macgamestore\",\r\n        \"title\": \"MacGameStore\",\r\n        \"color\": \"#0a5092\"\r\n    },\r\n    {\r\n        \"id\": \"microsoft\",\r\n        \"title\": \"Microsoft Store\",\r\n        \"color\": \"#ffd800\"\r\n    },\r\n    {\r\n        \"id\": \"newegg\",\r\n        \"title\": \"Newegg\",\r\n        \"color\": \"#f79328\"\r\n    },\r\n    {\r\n        \"id\": \"nuuvem\",\r\n        \"title\": \"Nuuvem\",\r\n        \"color\": \"#b5e0f4\"\r\n    },\r\n    {\r\n        \"id\": \"oculus\",\r\n        \"title\": \"Oculus Store\",\r\n        \"color\": \"#5161a6\"\r\n    },\r\n    {\r\n        \"id\": \"origin\",\r\n        \"title\": \"Origin\",\r\n        \"color\": \"#ddff1c\"\r\n    },\r\n    {\r\n        \"id\": \"playism\",\r\n        \"title\": \"Playism\",\r\n        \"color\": \"#b8934f\"\r\n    },\r\n    {\r\n        \"id\": \"razer\",\r\n        \"title\": \"Razer Game Store\",\r\n        \"color\": \"#00ff00\"\r\n    },\r\n    {\r\n        \"id\": \"savemi\",\r\n        \"title\": \"Savemi\",\r\n        \"color\": \"#01add3\"\r\n    },\r\n    {\r\n        \"id\": \"silagames\",\r\n        \"title\": \"SilaGames\",\r\n        \"color\": \"#f9cf6b\"\r\n    },\r\n    {\r\n        \"id\": \"squenix\",\r\n        \"title\": \"Square Enix\",\r\n        \"color\": \"#b41919\"\r\n    },\r\n    {\r\n        \"id\": \"steam\",\r\n        \"title\": \"Steam\",\r\n        \"color\": \"#9ffc3a\"\r\n    },\r\n    {\r\n        \"id\": \"uplay\",\r\n        \"title\": \"Ubisoft Store\",\r\n        \"color\": \"#01657a\"\r\n    },\r\n    {\r\n        \"id\": \"voidu\",\r\n        \"title\": \"Voidu\",\r\n        \"color\": \"#f47820\"\r\n    },\r\n    {\r\n        \"id\": \"wingamestore\",\r\n        \"title\": \"WinGameStore\",\r\n        \"color\": \"#0a5092\"\r\n    }\r\n];\r\n","import {Localization, Permissions, SyncedStorage} from \"../../modulesCore\";\r\n\r\nclass ContextMenu {\r\n\r\n    static onClick(info) {\r\n        const url = ContextMenu.queryLinks[info.menuItemId];\r\n        if (!url) { return; }\r\n\r\n        let query = info.selectionText.trim();\r\n\r\n        if (info.menuItemId === \"context_steam_keys\") {\r\n            const steamKeys = query.match(/[A-Z0-9]{5}(-[A-Z0-9]{5}){2}/g);\r\n\r\n            // Set the query to matched keys if any, otherwise display the selected text anyway\r\n            if (Array.isArray(steamKeys)) {\r\n                query = steamKeys.join(\",\");\r\n            }\r\n        }\r\n\r\n        browser.tabs.create({\"url\": url.replace(\"__query__\", encodeURIComponent(query))});\r\n    }\r\n\r\n    static async build() {\r\n        await SyncedStorage;\r\n        await Localization;\r\n\r\n        for (const option of Object.keys(ContextMenu.queryLinks)) {\r\n            if (!SyncedStorage.get(option)) { continue; }\r\n\r\n            browser.contextMenus.create({\r\n                \"id\": option,\r\n                \"title\": Localization.str.options[option].replace(\"__query__\", \"%s\"),\r\n                \"contexts\": [\"selection\"]\r\n            },\r\n\r\n            /*\r\n             * TODO don't recreate the context menu entries on each change, only update\r\n             * the affected entry (which should also prevent this error)\r\n             * Error when you create an entry with duplicate id\r\n             */\r\n            () => chrome.runtime.lastError);\r\n        }\r\n    }\r\n\r\n    static async update() {\r\n        if (!await Permissions.contains([\"contextMenus\"])) { return null; }\r\n\r\n        await browser.contextMenus.removeAll();\r\n        return ContextMenu.build();\r\n    }\r\n}\r\n\r\nContextMenu.queryLinks = {\r\n    \"context_steam_store\": \"https://store.steampowered.com/search/?term=__query__\",\r\n    \"context_steam_market\": \"https://steamcommunity.com/market/search?q=__query__\",\r\n    \"context_itad\": \"https://isthereanydeal.com/search/?q=__query__\",\r\n    \"context_bartervg\": \"https://barter.vg/search?q=__query__\",\r\n    \"context_steamdb\": \"https://steamdb.info/search/?q=__query__\",\r\n    \"context_steamdb_instant\": \"https://steamdb.info/instantsearch/?query=__query__\",\r\n    \"context_steam_keys\": \"https://store.steampowered.com/account/registerkey?key=__query__\"\r\n};\r\n\r\nexport {ContextMenu};\r\n","import {SyncedStorage} from \"../../modulesCore\";\r\nimport {BackgroundSimple} from \"../BackgroundSimple\";\r\n\r\nclass UserNotesAdapter {\r\n\r\n    static getAdapter() {\r\n\r\n        if (typeof UserNotesAdapter._adapter === \"undefined\") {\r\n\r\n            let Adapter = UserNotesAdapter.adapters[SyncedStorage.get(\"user_notes_adapter\")];\r\n\r\n            if (typeof Adapter === \"undefined\") {\r\n                SyncedStorage.remove(\"user_notes_adapter\");\r\n                Adapter = UserNotesAdapter.adapters[SyncedStorage.defaults.user_notes_adapter];\r\n            }\r\n\r\n            UserNotesAdapter._adapter = new Adapter();\r\n        }\r\n\r\n        return UserNotesAdapter._adapter;\r\n    }\r\n\r\n    static async changeAdapter(toType) {\r\n\r\n        const currentAdapter = UserNotesAdapter.getAdapter();\r\n        const newAdapter = new UserNotesAdapter.adapters[toType]();\r\n\r\n        await newAdapter.import(await currentAdapter.export());\r\n        await currentAdapter.clear();\r\n\r\n        UserNotesAdapter._adapter = newAdapter;\r\n        return UserNotesAdapter._adapter;\r\n    }\r\n}\r\n\r\nclass OutOfCapacityError extends Error {\r\n    constructor(ratio, ...params) {\r\n        super(...params);\r\n\r\n        this.name = this.constructor.name;\r\n\r\n        this.ratio = ratio;\r\n    }\r\n}\r\n\r\nclass CapacityInfo {\r\n    constructor(closeToFull = false, utilization = null) {\r\n        this.closeToFull = closeToFull;\r\n        this.utilization = utilization;\r\n    }\r\n}\r\n\r\nclass SyncedStorageAdapter {\r\n\r\n    constructor() {\r\n        this._notes = SyncedStorage.get(\"user_notes\");\r\n    }\r\n\r\n    get(appid) {\r\n        return this._notes[appid] || null;\r\n    }\r\n\r\n    async set(appid, note) {\r\n\r\n        const oldNote = this._notes[appid];\r\n        this._notes[appid] = note;\r\n\r\n        const storageUsage = this._getNotesSize() / SyncedStorage.QUOTA_BYTES_PER_ITEM;\r\n        if (storageUsage > 1) {\r\n            this._notes[appid] = oldNote;\r\n            throw new OutOfCapacityError(storageUsage, \"Can't set this user note, out of capacity\");\r\n        }\r\n\r\n        await SyncedStorage.set(\"user_notes\", this._notes);\r\n\r\n        return new CapacityInfo(storageUsage > 0.85, storageUsage);\r\n    }\r\n\r\n    delete(appid) {\r\n        delete this._notes[appid];\r\n        return SyncedStorage.set(\"user_notes\", this._notes);\r\n    }\r\n\r\n    export() {\r\n        return this._notes;\r\n    }\r\n\r\n    import(notes) {\r\n\r\n        const storageUsage = this._getNotesSize(notes) / SyncedStorage.QUOTA_BYTES_PER_ITEM;\r\n        if (storageUsage > 1) {\r\n            throw new OutOfCapacityError(storageUsage, \"Import to synced storage failed, too much data for this adapter\");\r\n        }\r\n\r\n        this._notes = notes;\r\n        return SyncedStorage.set(\"user_notes\", this._notes);\r\n    }\r\n\r\n    clear() {\r\n        return SyncedStorage.remove(\"user_notes\");\r\n    }\r\n\r\n    _getNotesSize(notes = this._notes) {\r\n        return \"user_notes\".length + JSON.stringify(notes).length;\r\n    }\r\n}\r\n\r\nclass IdbAdapter {\r\n\r\n    get(appid) {\r\n        return BackgroundSimple.action(\"notes.get\", appid);\r\n    }\r\n\r\n    set(appid, note) {\r\n        return BackgroundSimple.action(\"notes.set\", appid, note);\r\n    }\r\n\r\n    delete(appid) {\r\n        return BackgroundSimple.action(\"notes.delete\", appid);\r\n    }\r\n\r\n    export() {\r\n        return BackgroundSimple.action(\"notes.getall\");\r\n    }\r\n\r\n    import(notes) {\r\n        return BackgroundSimple.action(\"notes.setall\", notes);\r\n    }\r\n\r\n    clear() {\r\n        return BackgroundSimple.action(\"notes.clear\");\r\n    }\r\n}\r\n\r\n/*\r\n * TODO Implement\r\n * class ItadAdapter extends IdbAdapter {}\r\n */\r\n\r\nUserNotesAdapter.adapters = Object.freeze({\r\n    \"synced_storage\": SyncedStorageAdapter,\r\n    \"idb\": IdbAdapter,\r\n    // \"itad\": ItadAdapter,\r\n});\r\n\r\nexport {CapacityInfo, OutOfCapacityError, UserNotesAdapter};\r\n","import {ChangelogBuilder} from \"./Modules/ChangelogBuilder\";\r\nimport {CustomLinks} from \"./Modules/CustomLinks\";\r\nimport {Fader} from \"./Modules/Fader\";\r\nimport {ITADConnectionManager} from \"./Modules/ITADConnectionManager\";\r\nimport {LocaleCreditsBuilder} from \"./Modules/LocaleCreditsBuilder\";\r\nimport {OptionsBuilder} from \"./Modules/OptionsBuilder\";\r\nimport {OptionsTranslator} from \"./Modules/OptionsTranslator\";\r\nimport {Region} from \"./Modules/Region\";\r\nimport {SaveIndicator} from \"./Modules/SaveIndicator\";\r\nimport {Sidebar} from \"./Modules/Sidebar\";\r\nimport {\r\n    Downloader, ExtensionResources, HTML, Info,\r\n    Localization, PermissionOptions, Permissions, SyncedStorage\r\n} from \"../modulesCore\";\r\nimport {StoreList} from \"./Modules/Data/StoreList\";\r\nimport {ContextMenu} from \"../Background/Modules/ContextMenu\";\r\nimport {UserNotesAdapter} from \"../Core/Storage/UserNotesAdapter\";\r\nimport {BackgroundSimple} from \"../Core/BackgroundSimple\";\r\n\r\n// TODO this needs to be refactored and cleaned up\r\n\r\nconst Options = (() => {\r\n    const self = {};\r\n\r\n    let profileLinkImagesSelect;\r\n\r\n    function loadStores() {\r\n        const storesNode = document.querySelector(\".js-store-stores\");\r\n        const stores = SyncedStorage.get(\"stores\");\r\n\r\n        let html = \"\";\r\n\r\n        for (const store of StoreList) {\r\n            const id = store.id;\r\n            html += `<div class=\"option option--store\">\r\n                        <input type=\"checkbox\" id=\"${id}\"${(stores.length === 0 || stores.indexOf(id) !== -1) ? \" checked\" : \"\"}>\r\n                        <label for=\"${id}\">${store.title}</label>\r\n                    </div>`;\r\n        }\r\n\r\n        HTML.inner(storesNode, html);\r\n    }\r\n\r\n    function loadProfileLinkImages() {\r\n\r\n        const icons = document.querySelectorAll(\".es_sites_icons\");\r\n        switch (profileLinkImagesSelect.value) {\r\n            case \"color\": {\r\n                icons.forEach(icon => {\r\n                    icon.classList.toggle(\"es_gray\", false);\r\n                    icon.style.display = \"\";\r\n                });\r\n                break;\r\n            }\r\n            case \"gray\": {\r\n                icons.forEach(icon => {\r\n                    icon.classList.toggle(\"es_gray\", true);\r\n                    icon.style.display = \"\";\r\n                });\r\n                break;\r\n            }\r\n            case \"none\": {\r\n                icons.forEach(icon => { icon.style.display = \"none\"; });\r\n            }\r\n        }\r\n    }\r\n\r\n    function toggleSubOptions(parentOption, value) {\r\n        let nxt = parentOption.nextElementSibling;\r\n        while (nxt && nxt.classList.contains(\"js-sub-option\")) {\r\n            nxt.classList.toggle(\"is-disabled\", value);\r\n            nxt = nxt.nextElementSibling;\r\n        }\r\n    }\r\n\r\n    // Restores select box state to saved value from SyncStorage.\r\n    let changelogLoaded;\r\n\r\n    function loadOptions() {\r\n\r\n        // Set the value or state for each input\r\n        const nodes = document.querySelectorAll(\"[data-setting]\");\r\n        for (const node of nodes) {\r\n            const setting = node.dataset.setting;\r\n            let value = SyncedStorage.get(setting);\r\n\r\n            if (node.type && node.type === \"checkbox\") {\r\n                node.checked = value;\r\n\r\n                const parentOption = node.closest(\".parent_option\");\r\n                if (parentOption) {\r\n                    if (node.id === \"showallstores\") { value = !value; }\r\n\r\n                    toggleSubOptions(parentOption, !value);\r\n                }\r\n            } else if (value) {\r\n                node.value = value;\r\n            }\r\n        }\r\n\r\n        document.querySelector(\".js-region-select\")\r\n            .classList.toggle(\"is-hidden\", SyncedStorage.get(\"showregionalprice\") === \"off\");\r\n\r\n        document.querySelector(\".js-region-world\")\r\n            .classList.toggle(\"is-hidden\", SyncedStorage.get(\"showregionalprice\") !== \"mouse\");\r\n\r\n        const language = SyncedStorage.get(\"language\");\r\n        if (language !== \"schinese\" && language !== \"tchinese\") {\r\n            const n = document.getElementById(\"profile_steamrepcn\");\r\n            if (n) {\r\n\r\n                // Hide SteamRepCN option if language isn't Chinese\r\n                n.parentNode.style.display = \"none\";\r\n            }\r\n        }\r\n\r\n        if (!changelogLoaded) {\r\n            (new ChangelogBuilder()).build();\r\n            changelogLoaded = true;\r\n        }\r\n\r\n        loadProfileLinkImages();\r\n        loadStores();\r\n\r\n        Region.populate();\r\n        self.customLinks.forEach(option => option.populate());\r\n    }\r\n\r\n    function importSettings({\"target\": input}) {\r\n        const reader = new FileReader();\r\n        reader.addEventListener(\"load\", () => {\r\n            let importedSettings;\r\n            try {\r\n                importedSettings = JSON.parse(reader.result);\r\n            } catch (err) {\r\n                console.group(\"Import\");\r\n                console.error(\"Failed to read settings file\");\r\n                console.error(err);\r\n                console.groupEnd();\r\n\r\n                // TODO do not use alert\r\n                // eslint-disable-next-line no-alert\r\n                window.alert(Localization.str.options.settings_mngmt.import_fail);\r\n                return;\r\n            }\r\n\r\n            delete importedSettings.version;\r\n\r\n            try {\r\n                SyncedStorage.import(importedSettings);\r\n            } catch (err) {\r\n                console.group(\"Import\");\r\n                console.error(\"Failed to write settings to storage\");\r\n                console.error(err);\r\n                console.groupEnd();\r\n\r\n                // TODO do not use alert\r\n                // eslint-disable-next-line no-alert\r\n                window.alert(Localization.str.options.settings_mngmt.import_fail);\r\n                return;\r\n            }\r\n\r\n            // TODO do not use alert\r\n            // eslint-disable-next-line no-alert\r\n            window.alert(Localization.str.options.settings_mngmt.import_success);\r\n            window.location.reload();\r\n        });\r\n        reader.readAsText(input.files[0]);\r\n    }\r\n\r\n    function exportSettings() {\r\n        Downloader.download(new Blob([SyncedStorage.toJson()]), `AugmentedSteam_v${Info.version}.json`);\r\n    }\r\n\r\n    function clearSettings() {\r\n        // TODO do not use confirm\r\n        // eslint-disable-next-line no-alert\r\n        if (!window.confirm(Localization.str.options.clear)) { return; }\r\n        SyncedStorage.clear(false);\r\n\r\n        SyncedStorage.then(loadOptions);\r\n\r\n        const node = document.querySelector(\".js-options-reset\");\r\n        if (node) {\r\n            Fader.fadeInFadeOut(node);\r\n        }\r\n    }\r\n\r\n    async function saveOption(option) {\r\n\r\n        SaveIndicator.saving();\r\n\r\n        let value;\r\n\r\n        if (option === \"stores\") {\r\n\r\n            value = [];\r\n            const nodes = document.querySelectorAll(\".js-store-stores input[type=checkbox]\");\r\n            for (const node of nodes) {\r\n                if (node.checked) {\r\n                    value.push(node.id);\r\n                }\r\n            }\r\n\r\n        } else {\r\n\r\n            const node = document.querySelector(`[data-setting='${option}']`);\r\n            if (!node) { return; }\r\n\r\n            if (node.type && node.type === \"checkbox\") {\r\n                value = node.checked;\r\n            } else {\r\n                value = node.value;\r\n            }\r\n\r\n            if (option === \"quickinv_diff\") {\r\n                value = parseFloat(value.trim()).toFixed(2);\r\n            }\r\n\r\n            if (PermissionOptions[option]) {\r\n                try {\r\n                    let success;\r\n                    if (value) {\r\n                        success = await Permissions.requestOption(option);\r\n                    } else {\r\n                        success = await Permissions.removeOption(option);\r\n                    }\r\n\r\n                    if (!success) {\r\n                        throw new Error(\"Could not grant / remove the permissions\");\r\n                    }\r\n\r\n                    if (option.startsWith(\"context_\")) {\r\n                        ContextMenu.update();\r\n                    }\r\n                } catch (err) {\r\n                    console.error(err);\r\n\r\n                    // Don't save option\r\n                    if (node.type && node.type === \"checkbox\") {\r\n                        node.checked = !value;\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        switch (option) {\r\n            case \"user_notes_adapter\":\r\n                await UserNotesAdapter.changeAdapter(value);\r\n                break;\r\n            case \"override_price\":\r\n                await BackgroundSimple.action(\"clearrates\");\r\n                break;\r\n        }\r\n\r\n        SyncedStorage.set(option, value);\r\n        SaveIndicator.saved();\r\n    }\r\n\r\n    function saveOptionFromEvent(e) {\r\n        if (!e.target || !e.target.closest) { return; } // \"blur\" fires when the window loses focus\r\n        const node = e.target.closest(\"[data-setting]\");\r\n        if (!node) {\r\n            if (e.target.closest(\".js-store-stores\")) {\r\n                saveOption(\"stores\");\r\n            }\r\n            return;\r\n        }\r\n        saveOption(node.dataset.setting);\r\n    }\r\n\r\n    function setValue(selector, value) {\r\n        const node = document.querySelector(selector);\r\n        node.value = value;\r\n        const setting = node.closest(\"[data-setting]\");\r\n        if (setting) {\r\n            saveOption(setting.dataset.setting);\r\n        }\r\n    }\r\n\r\n    function addCurrencies(currencies) {\r\n        const select = document.getElementById(\"override_price\");\r\n\r\n        currencies\r\n            .map(cu => cu.abbr)\r\n            .filter(cu => cu !== \"USD\") // already in HTML\r\n            .sort()\r\n            .forEach(currency => {\r\n                const el = document.createElement(\"option\");\r\n                el.value = currency;\r\n                el.innerText = currency;\r\n                select.appendChild(el);\r\n            });\r\n    }\r\n\r\n    self.init = async() => {\r\n        await SyncedStorage;\r\n\r\n        const currency = ExtensionResources.getJSON(\"json/currency.json\").then(addCurrencies);\r\n        await Promise.all([Localization, currency]);\r\n        const Defaults = SyncedStorage.defaults;\r\n        self.customLinks = [];\r\n        for (const container of document.querySelectorAll(\".js-customlinks\")) {\r\n            self.customLinks.push(new CustomLinks(container));\r\n        }\r\n\r\n        Region.init();\r\n        self.customLinks.forEach(option => option.init());\r\n\r\n        OptionsBuilder.build();\r\n\r\n        profileLinkImagesSelect = document.querySelector(\"select[data-setting='show_profile_link_images']\");\r\n        profileLinkImagesSelect.addEventListener(\"change\", loadProfileLinkImages);\r\n\r\n        loadOptions();\r\n\r\n        await OptionsTranslator.translate();\r\n        Sidebar.create();\r\n\r\n        await (new ITADConnectionManager()).run();\r\n\r\n        (new LocaleCreditsBuilder()).build();\r\n\r\n        function addHandlerToSetDefaultColor(key) {\r\n            document.getElementById(`${key}_default`)\r\n                .addEventListener(\"click\", () => { setValue(`#${key}_color`, Defaults[`${key}_color`]); });\r\n        }\r\n\r\n        [\"highlight_owned\",\r\n            \"highlight_wishlist\",\r\n            \"highlight_coupon\",\r\n            \"highlight_inv_gift\",\r\n            \"highlight_inv_guestpass\",\r\n            \"highlight_notinterested\",\r\n            \"highlight_waitlist\",\r\n            \"highlight_collection\",\r\n            \"tag_owned\",\r\n            \"tag_wishlist\",\r\n            \"tag_coupon\",\r\n            \"tag_inv_gift\",\r\n            \"tag_inv_guestpass\",\r\n            \"tag_notinterested\",\r\n            \"tag_collection\",\r\n            \"tag_waitlist\"].forEach(addHandlerToSetDefaultColor);\r\n\r\n        document.getElementById(\"spamcommentregex_default\")\r\n            .addEventListener(\"click\", () => setValue(\"#spamcommentregex\", \"[\\\\u2500-\\\\u25FF]\"));\r\n        document.getElementById(\"quickinv_default\")\r\n            .addEventListener(\"click\", () => setValue(\"#quickinv_diff\", \"-0.01\"));\r\n\r\n        document.getElementById(\"quickinv_diff\").addEventListener(\"blur\", () => {\r\n            if (isNaN(parseFloat(document.getElementById(\"quickinv_diff\").value))) {\r\n                setValue(\"#quickinv_diff\", \"-0.01\");\r\n            }\r\n        });\r\n\r\n        document.querySelector(\"select[data-setting='showregionalprice']\").addEventListener(\"change\", e => {\r\n            const node = e.target;\r\n\r\n            document.querySelector(\".js-region-select\")\r\n                .classList.toggle(\"is-hidden\", node.value === \"off\");\r\n            document.querySelector(\".js-region-world\")\r\n                .classList.toggle(\"is-hidden\", node.value !== \"mouse\");\r\n        });\r\n\r\n        document.querySelectorAll(\".parent_option\").forEach(parentOption => {\r\n            parentOption.querySelector(\"input\").addEventListener(\"change\", () => {\r\n                toggleSubOptions(parentOption, parentOption.checked);\r\n            });\r\n        });\r\n\r\n        const importInput = document.getElementById(\"import_input\");\r\n\r\n        importInput.addEventListener(\"change\", importSettings, false);\r\n        document.getElementById(\"import\").addEventListener(\"click\", () => { importInput.click(); });\r\n        document.getElementById(\"export\").addEventListener(\"click\", exportSettings);\r\n        document.querySelector(\".js-reset\").addEventListener(\"click\", clearSettings);\r\n\r\n        document.addEventListener(\"change\", saveOptionFromEvent);\r\n        document.addEventListener(\"blur\", saveOptionFromEvent);\r\n        document.addEventListener(\"select\", saveOptionFromEvent);\r\n    };\r\n\r\n    return self;\r\n})();\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", Options.init);\r\n","\r\nclass Downloader {\r\n\r\n    static download(content, filename) {\r\n        const a = document.createElement(\"a\");\r\n        a.href = typeof content === \"string\" ? content : URL.createObjectURL(content);\r\n        a.download = filename;\r\n\r\n        // Explicitly dispatching the click event (instead of just a.click()) will make it work in FF\r\n        a.dispatchEvent(new MouseEvent(\"click\"));\r\n    }\r\n}\r\n\r\nexport {Downloader};\r\n","import {HTML} from \"../../Core/Html/Html\";\r\nimport OptionsSetup from \"./Data/OptionsSetup\";\r\nimport {OptionsTranslator} from \"./OptionsTranslator\";\r\n\r\nclass OptionsBuilder {\r\n\r\n    static _buildCheckboxes() {\r\n\r\n        const nodes = document.querySelectorAll(\"div[data-dynamic]\");\r\n        for (const node of nodes) {\r\n            const setting = node.dataset.dynamic;\r\n            const locale = OptionsTranslator.getTranslation(OptionsSetup[setting]) || OptionsSetup[setting];\r\n\r\n            node.classList.add(\"option\");\r\n\r\n            let button = \"\";\r\n            if (node.dataset.dynamicColor) {\r\n                button = `<div class=\"option__buttons\">\r\n                              <input type=\"color\" id=\"${setting}_color\" data-setting=\"${setting}_color\">\r\n                              <button id=\"${setting}_default\">${OptionsTranslator.getTranslation(\"theworddefault\")}</button>\r\n                          </div>`;\r\n            }\r\n\r\n            HTML.inner(node, `\r\n                <input type=\"checkbox\" id=\"${setting}\" data-setting=\"${setting}\">\r\n                <label class='option__label' for=\"${setting}\">${locale}</label>\r\n                ${button}`);\r\n        }\r\n\r\n    }\r\n\r\n    static _buildSelect() {\r\n\r\n        const nodes = document.querySelectorAll(\"div[data-dynamic-select]\");\r\n        for (const node of nodes) {\r\n            const setting = node.dataset.dynamicSelect;\r\n\r\n            const locale = OptionsTranslator.getTranslation(OptionsSetup[setting][0]);\r\n            const values = OptionsSetup[setting][1];\r\n\r\n            let optionsHtml = \"\";\r\n            for (const [optionValue, optionLocale] of values) {\r\n                optionsHtml += `<option value=\"${optionValue}\">${OptionsTranslator.getTranslation(optionLocale)}</option>`;\r\n            }\r\n\r\n            node.classList.add(\"option\");\r\n            HTML.inner(node, `\r\n                <label class='option__label' for=\"${setting}\">${locale}</label>\r\n                <select id=\"${setting}\" data-setting=\"${setting}\">${optionsHtml}</select>`);\r\n        }\r\n    }\r\n\r\n    static _buildWrapped() {\r\n\r\n        const nodes = document.querySelectorAll(\"div[data-dynamic-wrap]\");\r\n        for (const node of nodes) {\r\n            const setting = node.dataset.dynamicWrap;\r\n            node.classList.add(\"option\");\r\n            HTML.inner(node, `\r\n                    <input type=\"checkbox\" id=\"${setting}\" data-setting=\"${setting}\">\r\n                    <label class='option__label' for=\"${setting}\">${node.innerHTML}</label>\r\n                `);\r\n        }\r\n    }\r\n\r\n    static build() {\r\n        this._buildCheckboxes();\r\n        this._buildSelect();\r\n        this._buildWrapped();\r\n    }\r\n\r\n}\r\n\r\nexport {OptionsBuilder};\r\n"],"names":["ExtensionResources","static","pathname","browser","runtime","getURL","fetch","get","then","r","json","text","HTML","str","map","replace","m","html","template","document","createElement","innerHTML","DOMPurify","sanitize","content","fragment","firstElementChild","node","_node","console","warn","querySelector","Element","_getNode","outerHTML","wrapper","startEl","endEl","_startEl","_endEl","parentElement","lastElementChild","wrappedNodes","cur","nextElementSibling","push","_wrapper","element","replaceWith","append","position","insertAdjacentHTML","adjacent","ChangelogBuilder","async","data","getJSON","version","logHtml","Object","entries","inner","Error","CookieStorage","name","defaultValue","_name","trim","cache","has","val","ttl","_val","set","encodeURIComponent","cookie","delete","Map","key","split","kv","decodeURIComponent","init","ContextType","freeze","currentContext","extension","getBackgroundPage","bgPage","window","BACKGROUND","OPTIONS","CONTENT_SCRIPT","Environment","Language","this","_currentSteamLanguage","script","querySelectorAll","language","URL","src","searchParams","isContentScript","languages","array","includes","getCurrentSteamLanguage","BackgroundSimple","message","sendMessage","requested","params","length","Storage","prototype","hasOwnProperty","call","defaults","value","_adapter","remove","prefix","keys","filter","k","startsWith","force","tmp","persistent","reduce","acc","option","clear","import","area","storage","sync","caches","onChanged","addListener","changes","eventArea","assign","onDone","onCatch","promise","_initialized","Promise","resolve","JSON","stringify","getManifest","SyncedStorage","local","QUOTA_BYTES_PER_ITEM","Localization","code","_promise","currentSteamLanguage","storedSteamLanguage","deepAssign","target","source","action","getLanguageCode","codes","all","lc","loadLocalization","english","path","reverse","current","pop","LocalStorage","super","migrate","migrationDone","type","location","hostname","localStorage","getItem","parse","err","error","removeItem","Timer","constructor","duration","_id","setTimeout","onSuccess","onFail","clearTimeout","ResettableTimer","reset","running","_running","TimeUtils","Math","trunc","Date","now","ctxPermissions","PermissionOptions","Permissions","permissionList","permissions","contains","request","contextMenus","removeAll","permission","onAdded","onRemoved","p","optionToRemove","unusedPermissions","_getUnusedPermissions","used","Set","setup","add","unused","Array","from","values","Fader","property","initialValue","finalValue","durationMs","style","transition","timer","applyCSSTransition","fadeInDuration","fadeOutDuration","idleDuration","controlId","toString","dataset","fadeControl","fadeIn","fadeOut","SaveIndicator","saving","saved","_currentSaves","classList","displayTime","CustomLinks","container","_container","_type","_template","options","icon","addEventListener","closest","_save","_create","populate","links","link","cloneNode","checked","enabled","url","_read","customLinks","row","show","ITADConnectionManager","itadStatus","itadAction","_itadStatus","_itadAction","connect","textContent","connected","disconnected","disconnect","toggle","_clickHandler","LocaleCreditsBuilder","_total","_deepCount","obj","cnt","lang","locale","credits","LocaleCredits","coverage","_computeCoverage","toFixed","OptionsTranslator","translation","getString","nodes","getTranslation","localeText","localeHtml","langTrl","toLowerCase","title","thewordoptions","_localizeText","_localizeHtml","_localizeLanguageOptions","CountryList","Region","e","_removeHandler","_changeFlag","_addRegionHtml","loadDefault","_clear","selectnode","className","country","cc","selected","countryClass","beforeEnd","countries","Sidebar","topOffset","scrollY","getBoundingClientRect","top","scrollTo","contentNode","sidebarNode","currentSelected","currentHighlight","_handleCategoryClick","_handleSectionClick","category","contentId","id","newPage","currentPage","group","hasSections","_scrollTo","section","_contentNodes","_timer","resettableTimer","rect","bottom","innerHeight","_highlight","categories","sidebarEl","localeKey","contentEl","multiClass","sectionsNode","sections","forEach","sectionMenu","innerText","groupNode","_handleClick","_scrollHandler","StoreList","ContextMenu","info","queryLinks","menuItemId","query","selectionText","steamKeys","match","isArray","join","tabs","create","chrome","lastError","build","UserNotesAdapter","Adapter","adapters","user_notes_adapter","toType","currentAdapter","getAdapter","newAdapter","export","OutOfCapacityError","ratio","CapacityInfo","closeToFull","utilization","_notes","appid","note","oldNote","storageUsage","_getNotesSize","notes","Options","self","profileLinkImagesSelect","changelogLoaded","loadProfileLinkImages","icons","display","toggleSubOptions","parentOption","nxt","loadOptions","setting","n","getElementById","parentNode","storesNode","stores","store","indexOf","loadStores","importSettings","input","reader","FileReader","importedSettings","result","groupEnd","alert","settings_mngmt","import_fail","import_success","reload","readAsText","files","exportSettings","filename","a","href","createObjectURL","download","dispatchEvent","MouseEvent","Blob","toJson","clearSettings","confirm","fadeInFadeOut","saveOption","parseFloat","success","requestOption","removeOption","update","changeAdapter","saveOptionFromEvent","setValue","selector","addCurrencies","currencies","select","cu","abbr","sort","currency","el","appendChild","Defaults","dynamic","OptionsSetup","button","dynamicColor","dynamicSelect","optionsHtml","optionValue","optionLocale","dynamicWrap","_buildCheckboxes","_buildSelect","_buildWrapped","translate","run","isNaN","importInput","click"],"sourceRoot":""}