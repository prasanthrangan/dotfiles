"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[835],{12344:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var n=a(67294),c=a.n(n),o=a(65858),r=a(73012),l=a(87577),s=a(20657),i=a(6581),m=a(70369),g=a(19565),u=a(42273),d=a(59482),h=a(72907),E=a(1663),v=a(19480),y=a(49207),p=a(29255),_=a(51574),N=a(42922),f=a(31595),C=a(46145),D=a(21770),b=a(28760),L=a(94880),S=a(9339);const k={ConcertCard:"F7MwywVorrNKOgt7CEGy",date:"r4aK7GGCTY1vrPuSoGy6",dateMonth:"RX2kdQC6Fgc9h04mEgXx",metadata:"JpGXFGtOfmKH5mKCOMQw",title:"pN88b8jrYtBCrYGu35Al",locationData:"amTa2euxioUd0vU2jMf5",icon:"fIWvfaTkx3r3we4DA4NJ",location:"kDBnDrmS9eTQb2_g4Vku",fullDate:"T4LL7qOCu_01Szrx8Vnm",image:"Ko142eYEnV1xtSP5Vjk3"},w=c().memo((e=>{const{entity:t,onClick:a,openingDate:n,closingDate:o,concertsCount:r}=e,l=t.artists[0],i=(0,S.ij)(t);return c().createElement(D.oM,{onClick:a,className:k.ConcertCard,component:"div"},l.imageUri?c().createElement(L.Z,null,c().createElement("div",{"data-testid":"image-container",className:k.image,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${l.imageUri})`}})):null,c().createElement("time",{className:k.date,dateTime:t.date.isoString},c().createElement(b.Dy,{as:"h5",variant:"minuetBold",className:k.dateMonth},n.getMonth()===o.getMonth()?`${(0,S.lJ)(n)} ${n.getDate()}-${o.getDate()}`:`${(0,S.lJ)(n)} ${n.getDate()} - ${(0,S.lJ)(o)} ${o.getDate()}`)),c().createElement("div",{className:k.metadata,dir:"auto"},c().createElement(b.Dy,{as:"h2",variant:"cello",weight:"bold",className:k.title},i),c().createElement("div",{className:k.locationData},c().createElement(b.Dy,{as:"h2",className:k.concertsCount,variant:"mesto","data-testid":"concerts-count"},`${s.ag.get("concerts.count",r)}`))))}));var I=a(32668),T=a(10586),U=a(10149),M=a(82716),K=a(85105),J=a(67892);const G={concertsModal:"_HSbKteV9dfeHwGxcNg_",concertsContainer:"aWBUVnORYXxsyYkhLwA9",closeIconContainer:"my32elFymTSFRhPKDaLo",artistContainer:"YAGZg56IvTunyhaur40H",artistImage:"vmevmDz8WM9VvMmgoaWe",artistInfoContainer:"ac36K8GtTBXhfFPRfGTo",artistName:"hz2yJw4parzL0WK0rMng",row:"p_yAxEy29Xzm0fTvIg8T",date:"wC2qUh2SJBX1UEe9aQtV",dateMonth:"sUzcAnZ86exG3LZrvpf2",dateDay:"Ou1Z3dcAWteEuTiYJlkB",eventInfo:"EtOrJwt_4yhkrHWbxXy4",concertTitle:"M680KWddHfIaTZCTyULM",concertDate:"NjDfI7zPhvTXV8SjKcqq",concertVenue:"OEdqJZzUG2K9iXIn9RtC"},P=e=>{const{concert:t}=e,{isoString:a}=t.date,n=new Date(Date.parse(a)),o="ONLINE"===t.category,r=t.venue.name,l=t.venue.location.name,s=o?r:`${r}, ${l}`;return c().createElement(J.r,{key:t.id,to:`/concert/${t.id}`,className:G.row},c().createElement("time",{className:G.date,dateTime:a},c().createElement(b.Dy,{as:"h5",variant:"minuetBold",className:G.dateMonth},(0,S.lJ)(n)),c().createElement(b.Dy,{as:"h1",variant:"cello",className:G.dateDay},n.getDate())),c().createElement("div",{className:G.eventInfo},c().createElement(b.Dy,{as:"div",variant:"violaBold",className:G.concertTitle,"data-testid":"event-title"},(0,S.Yl)(t)),c().createElement(b.Dy,{as:"div",variant:"viola",className:G.concertDate},`${(0,S.cd)(n)} • ${(0,S.b8)(n)}`),c().createElement(b.Dy,{as:"div",variant:"viola",className:G.concertVenue,"data-testid":"event-venue"},s)))},V=c().memo((({concerts:e,onClose:t,open:a,location:n})=>{if(0===e.length)return null;const o=e[0].artists[0];return c().createElement(K.Z,{contentLabel:s.ag.get("concerts.label"),isOpen:a,className:G.concertsModal,onRequestClose:t},c().createElement("section",{className:G.concertsContainer},c().createElement("div",{className:G.closeIconContainer},c().createElement(x,{"aria-label":s.ag.get("close"),iconOnly:U.k,buttonSize:"sm",onClick:t})),c().createElement("div",{className:G.artistContainer},c().createElement(M.Ee,{height:"48",width:"48",className:G.artistImage,src:o.imageUri}),c().createElement("div",{className:G.artistInfoContainer},c().createElement(b.Dy,{as:"h3",variant:"cello",className:G.artistName,"data-testid":"event-venue"},o.name),c().createElement(b.Dy,{as:"h3",variant:"mesto",className:G.concertsCount,"data-testid":"event-venue"},`${s.ag.get("concerts.count_near_location",e.length,n)}`))),e.map((e=>c().createElement(P,{key:e.uri,concert:e})))))}));var x=(0,T.ZP)(D.oM).withConfig({displayName:"GroupedConcerts___StyledButtonTertiary",componentId:"sc-1c9dnr3-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const z="wIVpEJ_zYWGyFUrvX08g",F="hSZRbryPAMeTRaXuUSlM",O="NrsEgNsURvcsSkUnT8yN",R={get Online(){return s.ag.get("concerts_upcoming_virtual_events")},get Recommended(){return s.ag.get("concerts_recommended_for_you")},get Popular(){return s.ag.get("concerts_popular_near_you")},get Playlists(){return s.ag.get("playlists")}},$=r.jN0,q=e=>{const{collection:t,concertMetadata:a,handleLocationChange:n,shouldCombineRecs:o,setShowGroupedConcerts:r,setGroupedConcerts:l}=e,i=(null==t?void 0:t.items)||[],m=null==t?void 0:t.isFetching,u=a.userLocation.name||s.ag.get("concerts.default_location"),d=e=>{if(!e.concerts||!e.concerts.length)return null;const t=e.concerts[0];return e.concerts.length>1?c().createElement(w,{key:t.uri,entity:t,openingDate:new Date(e.openingDate),closingDate:new Date(e.closingDate),concertsCount:e.concerts.length,onClick:()=>{l(e.concerts),r(!0)}}):c().createElement(C.k,{key:t.uri,entity:t,isVirtual:o?"ONLINE"===t.category:"online"===e.source,shouldCombineRecs:o})};if(m)return c().createElement(E.h,{hasError:!1,errorMessage:s.ag.get("error.request-browse-concerts-failure")});return c().createElement("div",{className:O},c().createElement("div",{className:z,"data-testid":"location-selector"},c().createElement(I.Z,{handleLocationChange:n,locationStr:u})),(()=>{if(!i.length)return c().createElement(g.u,{title:s.ag.get("concerts.error.no_concerts_found_title"),message:s.ag.get("concerts.error.no_concerts_found_message",u),renderInline:!0});const e=i.reduce(((e,t)=>("recommendation"===t.source?e.Recommended.push(t):"popular"===t.source?e.Popular.push(t):"online"===t.source&&e.Online.push(t),e)),{Online:[],Recommended:[],Popular:[]});return Object.keys(e).map(((t,a)=>{const n=e[t];return 0===n.length?null:c().createElement("div",{key:t,className:z},c().createElement(N.ZP,{value:"headered-grid",index:a},c().createElement(v.P,{total:n.length,title:R[t],showAll:!0},n.map(d))))}))})())},X=c().memo((()=>{const e=(0,o.I0)(),t=(0,l.W6)(y.AW),{isAnonymous:a}=(0,o.v9)(p.Gg),r=(0,o.v9)((e=>e.concerts.collection)),g=(0,o.v9)((e=>e.concerts)),E=g.userLocation.name||s.ag.get("concerts.default_location"),v=g.userLocation.geonameId;(0,n.useEffect)((()=>{e((0,i.AJ)(null!=v?v:null,a))}),[e,a,v]);const N=(0,f.Y)($),[C,D]=(0,n.useState)(!1),[b,L]=(0,n.useState)([]);return c().createElement("section",{className:F},c().createElement(m.$,null,`${s.ag.get("concerts_shows_in")} ${E}`),c().createElement(u.gF,{size:u.fR.SMALL,backgroundColor:$},c().createElement(u.sP,null,c().createElement(u.xd,null,s.ag.get("concerts.label"))),c().createElement(d.W,null,c().createElement(h.i,{text:s.ag.get("concerts.label")}))),c().createElement(_.I,{backgroundColor:N}),c().createElement(q,{collection:r,concertMetadata:g,handleLocationChange:t=>{t&&t.geonameId&&(e((0,i.kz)(t)),e((0,i.AJ)(t.geonameId,a)))},shouldCombineRecs:t,setShowGroupedConcerts:D,setGroupedConcerts:L}),c().createElement(V,{location:E,concerts:b,onClose:()=>D(!1),open:C}))})),Y=e=>c().createElement(n.Suspense,{fallback:null},c().createElement(X,e)),Z=Y},46145:(e,t,a)=>{a.d(t,{k:()=>C});var n=a(67294),c=a.n(n),o=a(9414),r=a(87722),l=a(28760),s=a(67892),i=a(94880),m=a(43315),g=a(9339);const u="wedRUk4eiBo9n9vqXLhU",d="HYVIJaYYiCTgSCHie70L",h="InXSbaoh8emJn09fWs3U",E="SPbe_Q1wtiZQCmo0QKUy",v="TRp4tgG7_cymGIXDevIP",y="tC1Y_nwyyly7cpIGqF5K",p="gY_xUHOSpAn6TPdU23t7",_="l93AfoV_qHnMQSQBB5GK",N="MTTf1Lotynwu3QKhr9uY",f="EkGb0ZzhswreSvpZoioY",C=c().memo((e=>{const{entity:t,isVirtual:a,shouldCombineRecs:n}=e,{venue:{name:C,location:{name:D}}}=t,b=t.artists[0],L=(0,g.ij)(t),S=new Date(t.date.isoString),k=a?o.F:r.n;return c().createElement(s.r,{to:`/concert/${t.id}`,className:u},b.imageUri?c().createElement(i.Z,null,c().createElement("div",{"data-testid":"image-container",className:f,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${b.imageUri})`}})):null,c().createElement("time",{className:d,dateTime:t.date.isoString},c().createElement(l.Dy,{as:"h5",variant:"minuetBold",className:h},`${(0,g.lJ)(S)} ${S.getDate()}`)),c().createElement("div",{className:E,dir:"auto"},c().createElement(l.Dy,{as:"h2",className:N,variant:"minuetBold"},(0,m.FO)(S)," • ",(0,g.b8)(S)),c().createElement(l.Dy,{as:"h2",variant:"cello",weight:"bold",className:v},L),c().createElement("div",{className:y},n?c().createElement(k,{className:p,"aria-label":a?"Virtual Event":"In-Person Event",iconSize:16}):null,c().createElement(l.Dy,{as:"h2",className:_,variant:"mesto","data-testid":"location-name"},a?C:`${C}, ${D}`))))}))},32668:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(67294),c=a.n(n),o=a(94184),r=a.n(o),l=a(76),s=a(7438),i=a(28760),m=a(66668),g=a(20657),u=a(98742),d=a(26529),h=a(19719),E=a(29854);const v={locationContainer:"mVOFnq7zSPRV_LEgGpDs",locationName:"C27SqjLS1_s0rqa7OD7c",clearSuggestions:"hdK8yppl_sXZMSQmtZtV",hide:"r81fr26QaEERPXCPrPVm",changeLocation:"zwc2XkLWpR92crAJXL21",changeLocationDropdown:"eIoX7T2txqK2JqzJ7cli",changeLocationInputLabel:"Uxx05DSAKPDiUaYLo6Ew",changeLocationInput:"gTFbh_EVVEzUrviFjNKF",searchInputSearchIcon:"pyzKam6u5Chz83qdtWo6",changeLocationLabel:"xVCe2YqliS5UBuqjBTDK",icon:"aZ5OJAP9JwXgm4pJq7UH",changeLocationList:"H1g1Ro1PNCH7OgfgaHkN",changeLocationError:"SjJTvKcJyhdrzQP74cfK",changeLocationLink:"KsT9JzIhvL6lWg8uKQf5",changeLocationItem:"VrqtBC4aYTinEAL4iLO7",button:"f0SQFZDLh_a6sga5nqr0",locationLink:"HEKoKqT_pboxiT4uXfxf"},y="location_no_results",p="location_fetch_error",_={[y]:()=>g.ag.get("concert.error.no_locations_found_subtitle"),[p]:()=>g.ag.get("concert.error.general_error_title")},N=e=>{const t=c().createRef(),a=c().createRef(),[o,N]=(0,n.useState)(""),[f,C]=(0,n.useState)(-1),[D,b]=(0,n.useState)([]),[L,S]=(0,n.useState)(null),{placeholder:k,onSelectLocation:w,hideLocationSelector:I}=e,T=(0,E.D)((()=>{h.LH.fetchLocationQuery(d.b.getInstance(),o).then((e=>{const{body:{results:t=[]}={}}=e;b(t),t.length?S(null):S(y)}),(()=>{b([]),S(p)}))}))(250),U=e=>{N(e),C(-1),b([]),S(null),e&&e.length>1&&T(e)};let M=r()(v.clearSuggestions,v.hide);return(D&&D.length||L===y)&&(M=v.clearSuggestions),c().createElement("div",{className:v.changeLocation,"data-interaction-context":"location-selector"},c().createElement("div",{className:v.changeLocationDropdown,onKeyDown:e=>{const n=38,c=40,o=27,r=9,l=e.which;let s=f;switch([o,c,n,r].indexOf(l)>-1&&e.preventDefault(),l){default:return;case o:return void w(null);case n:s=Math.max(f-1,-1);break;case c:case r:s=Math.min(f+1,D.length-1);break;case 13:w(D[f])}if(s<0)t.current.focus();else{const e=a.current.childNodes[s];e&&e.focus()}C(s)},role:"searchbox",onBlur:e=>{e.relatedTarget||(U(""),I())}},c().createElement("div",{className:v.changeLocationForm},c().createElement("div",{className:v.changeLocationLabel},c().createElement(s.j,{className:v.icon,iconSize:16}),c().createElement("input",{className:v.changeLocationInput,type:"search",id:"change-location-input",placeholder:k,value:o,onChange:e=>U(e.target.value),ref:t,"aria-label":k,autoFocus:!0}),c().createElement("button",{className:M,"aria-label":g.ag.get("search.a11y.clear-input"),onClick:()=>U("")},c().createElement(u.T,{size:16})))),c().createElement("ol",{className:v.changeLocationList,ref:a},L&&c().createElement(i.Dy,{as:"li",variant:"ballad",className:v.changeLocationError},c().createElement(m.l,{iconSize:16}),_[L]()),D&&D.length&&D.map(((e,t)=>c().createElement(i.Dy,{as:"li",variant:"ballad",weight:"book",key:t,className:v.changeLocationItem,tabIndex:t+1},c().createElement(l.rU,{to:"#",className:v.changeLocationLink,onClick:()=>w(e),role:"button"},e.location))))||null)))},f=e=>{const{handleLocationChange:t,locationStr:a}=e,[o,r]=(0,n.useState)(!1);return c().createElement("div",{className:v.locationContainer},c().createElement(i.Dy,{as:"h1",variant:"alto"},g.ag.get("concerts_shows_in")),c().createElement("span",null,o&&c().createElement(N,{placeholder:g.ag.get("concerts.input.search_placeholder"),onSelectLocation:e=>{t(e),r(!1)},hideLocationSelector:()=>r(!1)}),!o&&c().createElement(i.Dy,{as:"h2",variant:"alto",className:v.locationName,dir:"auto",onClick:r,role:"button"},a)))}},9339:(e,t,a)=>{a.d(t,{Ms:()=>c,NL:()=>l,O1:()=>i,Yl:()=>u,b8:()=>o,cd:()=>s,ij:()=>d,lJ:()=>r});var n=a(20657);const c=e=>n.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}),o=e=>n.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),r=e=>n.ag.formatDate(e,{month:"short"}).toUpperCase(),l=e=>n.ag.formatDate(e,{month:"short",day:"numeric"}).toUpperCase(),s=e=>n.ag.formatDate(e,{weekday:"short"}),i=e=>e<new Date,m={row:{1:e=>n.ag.get("concert.header.entity_title_1",...e),2:e=>n.ag.get("concert.header.entity_title_2",...e),3:e=>n.ag.get("concert.header.entity_title_3",...e),4:e=>n.ag.get("concert.header.entity_title_4",...e),more:e=>n.ag.get("concert.header.entity_title_more",...e)},entity:{1:e=>n.ag.get("concert.header.upcoming_concert_title_1",...e),2:e=>n.ag.get("concert.header.upcoming_concert_title_2",...e),3:e=>n.ag.get("concert.header.upcoming_concert_title_3",...e),4:e=>n.ag.get("concert.header.upcoming_concert_title_4",...e),more:e=>n.ag.get("concert.header.upcoming_concert_title_more",...e)}},g=(e,t)=>{const a=m[t],n=(e=>{try{var t;return!e.title||!e.festival&&null!==(t=e.artists)&&void 0!==t&&t.length?{artists:e.artists.map((e=>e.name||e.profile.name))}:{title:e.title}}catch(e){return null}})(e);if(n){if(n.title)return n.title;if(n.artists)return n.artists.length>4?a.more(n.artists):a[n.artists.length](n.artists)}return""},u=e=>g(e,"row"),d=e=>g(e,"entity")}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map