"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[878],{34813:(e,t,n)=>{n.d(t,{v:()=>h});var a=n(6479),i=n.n(a),l=n(67154),r=n.n(l),s=n(67294),o=n.n(s),d=n(94184),c=n.n(d),u=n(2603),m=n(24209),k=n(38910),v=n(20657),p=n(83692),y=n(1496),S=n(45287),b=n(63962);const g="I3oc8sxg8Duq4kYUGnMo",E="LEZf9K5hG4hfCKfgr5Xo",N=["uri"],f=e=>o().createElement(u.e,r()({semanticColor:"textPositive"},e)),h=e=>{let{uri:t}=e,n=i()(e,N);const{isEnhanced:a,toggleIsEnhanced:l}=(0,S.U)(t),{spec:s,logger:d}=(0,y.fU)(k.createDesktopEnhanceButtonEventFactory,{data:{uri:t}}),u=o().createElement(p.w,{label:a?v.ag.get("web-player.enhance.button_aria_label_enhanced"):v.ag.get("web-player.enhance.button_aria_label_not_enhanced")},o().createElement(m.P,r()({buttonSize:"sm",className:c()(g,{[E]:a})},n,{iconLeading:a?f:void 0,onClick:()=>{d.logInteraction(a?s.hitUnenhanceContext({contextToBeUnenhanced:t}):s.hitEnhanceContext({contextToBeEnhanced:t})),l()}}),a?v.ag.get("web-player.enhance.button_text_enhanced"):v.ag.get("web-player.enhance.button_text_not_enhanced")));return a?u:o().createElement(b.T,{id:"enhance-button",bodyText:v.ag.get("web-player.enhance.onboarding.enhance-playlist")},u)}},63962:(e,t,n)=>{n.d(t,{T:()=>v});var a=n(67294),i=n.n(a),l=n(73935),r=n(55914),s=n(28760),o=n(73012),d=n(99450),c=n(32648),u=n(23248);const m="iW5kFTiudWn9ItsTvZmz",k="OfNgl_iK7pi63fAi8USM",v=function({id:e,title:t,bodyText:n,buttonText:v,shouldScrollIntoView:p,children:y}){var S,b,g,E,N,f,h,T,F;const[C,R]=(0,u.z)(`onboarding-dismissed:${e}`,!1),{scrollNodeRef:I}=(0,a.useContext)(c.VX),[w,L]=(0,a.useState)(null),[D,A]=(0,a.useState)(null),U=(0,a.useRef)(!1);(0,a.useEffect)((()=>{p&&D&&!U.current&&(U.current=!0,D.scrollIntoView({behavior:"smooth",block:"center"}))}),[p,D]);const P=(0,a.useCallback)((()=>R(!0)),[R]);(0,a.useEffect)((()=>{if(C)return()=>{};const e=e=>{"Escape"===e.key&&P()},t=e=>{e.target instanceof Node&&(null==D||!D.contains(e.target))&&P()};return window.addEventListener("keydown",e,!0),window.addEventListener("click",t,!0),()=>{window.removeEventListener("keydown",e,!0),window.removeEventListener("click",t,!0)}}),[C,P,D]);const x=null===(S=I.current)||void 0===S?void 0:S.getBoundingClientRect(),O=null==w?void 0:w.getBoundingClientRect();return i().createElement(i().Fragment,null,i().createElement("span",{ref:L},y),!C&&O&&(0,l.createPortal)(i().createElement("div",{className:m,style:{top:(null!==(b=null==O?void 0:O.top)&&void 0!==b?b:0)-((null!==(g=null==x?void 0:x.top)&&void 0!==g?g:0)-(null!==(E=null===(N=I.current)||void 0===N?void 0:N.scrollTop)&&void 0!==E?E:0)),left:(null!==(f=null==O?void 0:O.left)&&void 0!==f?f:0)-((null!==(h=null==x?void 0:x.left)&&void 0!==h?h:0)-(null!==(T=null===(F=I.current)||void 0===F?void 0:F.scrollLeft)&&void 0!==T?T:0)),width:null==O?void 0:O.width,height:null==O?void 0:O.height},ref:A},i().createElement(r.J,{popoverTitle:t,arrow:r.J.bottom,colorSet:"announcement",className:k},i().createElement(s.Dy,{as:"p",paddingBottom:v&&o.g4V},n),v&&i().createElement(d.D,{buttonSize:"sm",colorSet:"invertedLight",onClick:P},v))),I.current||document.body))}},40786:(e,t,n)=>{n.d(t,{s:()=>T});var a=n(67294),i=n.n(a),l=n(87577),r=n(20657),s=n(13020),o=n(37338),d=n(42273),c=n(59482),u=n(72907),m=n(67892),k=n(55120),v=n(2751),p=n(24172),y=n(49207),S=n(55911),b=n(18261),g=n(58548),E=n(46457);function N(e){return e.user||null}function f(e){return!!e}function h(e,t=!1){return{id:e.username,uri:e.uri,name:e.username,displayName:e.displayName||void 0,images:e.images,isMadeFor:t}}const T=function({metadata:e,isPlaying:t,togglePlay:n,backgroundColor:T}){const{uri:F,name:C,description:R,images:I,totalLength:w,totalLikes:L,duration:D,owner:A,isOwnedBySelf:U,isCollaborative:P,formatListData:x,madeFor:O,collaborators:_}=e,M=(null==x?void 0:x.attributes)||{},B=M.header_image_url_desktop||M.image_url||null,V=null!==B?[{url:B,width:null,height:null}]:[],j=(0,l.W6)(y.G8),Z=(0,l.W6)(y.bM),Q=j&&U,z=(0,a.useMemo)((()=>function(e,t,n=[],a){return e?[h(e,!0)]:n.length>1&&a?n.map(N).filter(f).map((e=>h(e))):[h(t)]}(O,A,null==_?void 0:_.items,Z)),[O,A,null==_?void 0:_.items,Z]),G=(0,a.useContext)(p.zy),K=(0,a.useContext)(E.S7),W=(0,a.useCallback)((()=>{K({type:"open",uri:F})}),[K,F]),X=(0,a.useCallback)((e=>{G({type:"open",playlistDetails:{name:C,description:R,image:I[0],uri:F},focusedElement:e})}),[G,C,R,I,F]),q=(0,a.useCallback)((()=>{G({type:"openWithImagePicker",playlistDetails:{name:C,description:R,image:I[0],uri:F}})}),[G,C,R,I,F]),J=Z&&e.permissions?null!==(H=e.permissions)&&void 0!==H&&H.isPrivate?r.ag.get("private_playlist"):r.ag.get("public_playlist"):P?r.ag.get("sidebar.collaborative_playlist"):r.ag.get("playlist");var H;return i().createElement(d.gF,{backgroundColor:T,backgroundImages:V},i().createElement(c.W,null,i().createElement(k.$,{size:S.qE.sm,onClick:n,isPlaying:t,uri:F}),i().createElement(u.i,{text:C,dragUri:F,dragLabel:C})),B?null:i().createElement(b._,{menu:i().createElement(s.X,{uri:F})},i().createElement("div",{className:v.Z.playlistImageContainer},i().createElement(o.T,{canEdit:Q,name:C,images:I,onClick:q,placeholderType:"playlist",dragUri:F}))),i().createElement(d.sP,null,i().createElement(d.dy,{small:!0,uppercase:!0},J),i().createElement(b._,{menu:i().createElement(s.X,{uri:F})},i().createElement(d.xd,{canEdit:Q,onClick:()=>X(p.w.TITLE),dragUri:F,dragLabel:C,ariaLabel:r.ag.get("playlist.edit-details.button",C)},C)),R&&i().createElement(d.dy,{bold:!1,gray:!0,canEdit:Q,onClick:e=>(e=>{e.target.href||X(p.w.DESCRIPTION)})(e)},i().createElement(g.kf,{paragraphClassName:v.Z.playlistDescription,source:R,LinkComponent:m.r})),i().createElement(d.QS,{creators:z,onPiledCreatorsClick:W,totalTracks:w,totalLikes:L||0,durationMilliseconds:null==D?void 0:D.milliseconds,isEstimatedDuration:null==D?void 0:D.isEstimate,newEntries:parseInt(M.new_entries_count||"0",10)})))}},78154:(e,t,n)=>{n.r(t),n.d(t,{default:()=>At});var a=n(67294),i=n.n(a),l=n(65858),r=n(52883),s=n(69518),o=n.n(s),d=n(28760),c=n(87577),u=n(20657),m=n(42038),k=n(83056);const v=(e,t,n)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(n),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),p=({clickTracking:e,clickThrough:t,thirdPartyImpression:n,impression:r,logoUrl:s,advertiserName:o,creativeId:c,lineItemId:m})=>{const p=(0,l.I0)(),[y,S]=(0,a.useState)(!1);return(0,a.useEffect)((()=>(p((0,k.Vw)()),p((0,k.kh)(v("event_viewed",c,m))),()=>{p((0,k.AG)())})),[p,c,m]),i().createElement("div",{className:"sponsor-container"},i().createElement(d.Dy,{variant:"minuet",className:"sponsor-text","data-ta-id":"sponsor-text"},u.ag.get("playlist.presented_by",o)),i().createElement("div",{className:"sponsor-logo"},i().createElement("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{p((0,k.kh)(v("event_clicked",c,m))),S(!0)}},i().createElement("img",{draggable:!1,className:"sponsor-logo__image",src:s,alt:o,"data-ta-id":"sponsor-logo"})),i().createElement("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),n&&i().createElement("img",{className:"sponsor-logo__3p-imp-pixel",src:n,alt:""}),y&&i().createElement("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})))},y=({playlistUri:e})=>{const t=(0,l.I0)(),n=(0,l.v9)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,a.useEffect)((()=>{n||t((0,k.fd)(e))}),[t,e,n]),n?i().createElement("div",null,i().createElement(p,n)):null},S=({playlistUri:e})=>{const t=(0,l.I0)(),n=(0,l.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,l.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,a.useEffect)((()=>{n||t((0,k.z8)())}),[t,n]);const s=r||n&&((e,t)=>{const n=Date.now()/1e3,a=e.split(":"),i=a[a.length-1];return t.some((({playlistId:e,endTime:t,startTime:a})=>e===i&&n>=a&&n<(t||n+1)))})(e,n);return s?i().createElement(y,{playlistUri:e}):null};var b=n(90110),g=n(95661),E=n(13020),N=n(20534),f=n(70369),h=n(19565),T=n(98778),F=n(61048),C=n(66668),R=n(99450),I=n(4383);const w="hOOwEKqNuXrNvOCB1SgZ",L="csEdkIN9z2LjJIuZraqz",D=({uri:e})=>{const[t,n]=(0,I.Z)(e),l=(0,r.k6)(),s=(0,a.useCallback)((()=>{n(!1),l.replace("/collection/playlists")}),[l,n]);return i().createElement("div",{className:w},i().createElement(C.l,{iconSize:64}),i().createElement("div",{className:L},i().createElement(d.Dy,{as:"p",variant:"canon"},u.ag.get("forbidden-page.title")),i().createElement(d.Dy,{as:"p",variant:"mesto"},u.ag.get("forbidden-page.description"))),t&&i().createElement(R.D,{colorSet:"invertedLight",onClick:s},u.ag.get("remove_from_your_library")))};var A=n(84200),U=n(1663),P=n(55120),x=n(2751),O=n(1838),_=n(35213),M=n(22423),B=n(78462),V=n(34813),j=n(45287),Z=n(99191),Q=n(1169),z=n(56802),G=n(4236),K=n(49207),W=n(29255),X=n(30947),q=n(11414),J=n(55911),H=n(20246),$=n(18061),Y=n(32648),ee=n(43620),te=n(50062),ne=n(84242),ae=n(72138),ie=n(73893),le=n(97194),re=n(28248),se=n(42922),oe=n(28018),de=n(49961);const ce=new Set(B.RJ),ue=new Set([]),me={column:null,order:re.kn.NONE},ke=i().memo((({ariaLabel:e,nrTracks:t,playlistUri:n,rankType:l,scrollToUid:r,usePlayContextItem:s,tracklistDomRef:o})=>{const d=(0,a.useContext)(ae.ZF),{filter:c,setFilter:u}=(0,a.useContext)(M.fo),m=(0,a.useRef)(null),[k,v]=(0,a.useState)(t),p=(0,a.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,oe.r)(n,p);const{sortState:y,setSortState:S}=(0,a.useContext)(B.Gb),b=(0,a.useCallback)((e=>{S((0,O.VK)(e,y))}),[y,S]);(0,a.useEffect)((()=>{m.current&&m.current.update()}),[y,c]),(0,a.useEffect)((()=>{S(me),u("")}),[n,u,S]),(0,a.useEffect)((()=>{m.current&&r&&m.current.scrollToItem({uid:r})}),[r]),(0,a.useEffect)((()=>{m.current&&""===c&&m.current.scrollToFirstSelected()}),[c,k]);const g=(0,a.useCallback)((async(e,t)=>{const a=await d.getContents(n,{offset:e,limit:t,sort:(0,O._j)(y),filter:c,decorateFormatListData:!0});return a.totalLength!==k&&v(a.totalLength),a.items}),[n,d,k,y,c]),E="plays"===l,N=(0,a.useCallback)(((e,t)=>{var a,l,r;const o=(0,de.X)(null===(a=e.album)||void 0===a?void 0:a.images,{desiredSize:40,desiredLabel:"small"});return i().createElement(re.h_,{key:t+e.uri,index:t,contextUri:n,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==o?void 0:o.url)||"",statusChange:null===(l=e.formatListAttributes)||void 0===l?void 0:l.status,showPlayCount:E,playCount:parseInt((null===(r=e.formatListAttributes)||void 0===r?void 0:r.rank)||"0",10),usePlayContextItem:s})}),[n,E,s]),f=(0,a.useMemo)((()=>E?[re.QD.INDEX,re.QD.TITLE,re.QD.PLAYS,re.QD.ALBUM,re.QD.DURATION]:[re.QD.INDEX,re.QD.TITLE,re.QD.ALBUM,re.QD.DURATION]),[E]),h=(0,a.useCallback)((e=>e.uri),[]),T=(0,a.useCallback)((e=>e.id),[]);return i().createElement(se.ZP,{value:"chart-tracklist"},i().createElement(re.Pv,{key:n,ariaLabel:e,hasHeaderRow:!0,columns:f,sortableColumns:d.getCapabilities().canSort?ce:ue,sortState:y,onSort:b,renderRow:N,resolveUri:h,resolveUid:T,nrTracks:k,fetchTracks:g,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:o}))}));var ve=n(67154),pe=n.n(ve),ye=n(6479),Se=n.n(ye),be=n(77082),ge=n(83692),Ee=n(51627);const Ne="X1lXSiVj0pzhQCUo_72A",fe=["uri","label"],he=e=>{let{uri:t,label:n}=e,a=Se()(e,fe);const{onCopyLink:l}=(0,Ee.l)({uri:t,permissionLevel:"CONTRIBUTOR"});return i().createElement(ge.w,{label:n},i().createElement(be.t,pe()({},a,{className:Ne,onClick:l,iconSize:32})))};var Te=n(40786),Fe=n(94184),Ce=n.n(Fe),Re=n(10149),Ie=n(728),we=n(61633),Le=n(3775);n(98984);const De={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"querySearch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"5"}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"album"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"episode"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcast"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}}]},Ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"querySearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"album"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]}}]}}]}}]}}]},Ue={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"querySearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artist"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"following"}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"album"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]};var Pe=n(7438),xe=n(64005);const Oe={filterInputContainer:"WIBrW3xa1aqQaLWZhp5U",filterInput:"l42JW4EP_5CU1Ba7jYIc",overlay:"yGtsjz2AjzhRMTphe2BO",searchIconContainer:"TuU4JSqLFdjOeTaHaDmA",searchIcon:"zOwN1vkkgX9JIvE81_B2",clearButton:"eWEdt6BMCWITt5najIg_"},_e=i().memo((({placeholder:e,onChange:t=(()=>{}),onFocus:n=(()=>{})})=>{const[l,r]=(0,a.useState)(""),s=(0,a.useRef)(null),o=(0,xe.y)((e=>{t(e)}),200),c=(0,a.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),m=(0,a.useCallback)((()=>{s.current&&s.current.focus(),r(""),t("")}),[r,t]),k=(0,a.useCallback)((e=>{"Escape"===e.key&&l&&m()}),[l,m]);return i().createElement("div",{className:Oe.filterInputContainer,role:"search"},i().createElement(d.Dy,{as:"input",variant:"mesto",ref:s,className:Ce()(Oe.filterInput),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:k,onFocus:n,value:l}),i().createElement("div",{className:Oe.overlay},i().createElement("span",{className:Oe.searchIconContainer},i().createElement(Pe.j,{iconSize:16,className:Oe.searchIcon,"aria-hidden":"true"})),l&&i().createElement("button",{className:Oe.clearButton,onClick:m,"aria-label":u.ag.get("search.a11y.clear-input")},i().createElement(Re.k,{iconSize:16,className:Oe.filterInputIcon}))))}));var Me=n(59713),Be=n.n(Me),Ve=n(7073),je=n(42781);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ze=e=>{var t;return{uid:e.uid,uri:e.track.uri,name:e.track.name,isPlayable:e.track.playability.playable,isMOGEFRestricted:e.track.contentRating.label===Ve.KS.NineteenPlus,isExplicit:e.track.contentRating.label===Ve.KS.Explicit,album:{id:e.track.album.id,name:e.track.album.name,imgUrl:(null===(t=e.track.album.coverArt)||void 0===t?void 0:t.sources[0].url)||"",uri:e.track.album.uri},artists:e.track.artists.items.map((e=>({id:e.id,uri:e.uri,name:e.profile.name})))}},Ge=e=>({uid:e.uid,uri:e.episode.uri,name:e.episode.name,isPlayable:e.episode.playability.playable,isMOGEFRestricted:e.episode.contentRating.label===Ve.KS.NineteenPlus,isExplicit:e.episode.contentRating.label===Ve.KS.Explicit,imgUrl:e.episode.coverArt.sources[0].url,podcast:{id:e.episode.podcast.id,uri:e.episode.podcast.uri,name:e.episode.podcast.name}}),Ke=({renderRow:e,searchResults:t})=>i().createElement(re.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:re.hU,nrTracks:t.length,tracks:t,resolveUri:e=>e.uri,columns:[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),We=({renderRow:e,searchResults:t})=>i().createElement(re.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:re.hU,nrTracks:t.length,tracks:t,resolveUri:e=>e.uri,columns:[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD]}),Xe=({renderRow:e,searchResults:t})=>{const n=t.filter((e=>void 0!==e.album)),a=t.filter((e=>e.uri.includes("album")));return i().createElement("div",null,i().createElement(d.Dy,{as:"p",variant:"cello",className:x.Z.artistResultListTitle},u.ag.get("playlist.curation.popular_songs")),i().createElement(re.Pv,{ariaLabel:u.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:re.hU,nrTracks:n.length,tracks:n,resolveUri:e=>e.uri,columns:[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD]}),i().createElement(d.Dy,{as:"p",variant:"cello",className:x.Z.artistResultListTitle},u.ag.get("playlist.curation.albums")),i().createElement(re.Pv,{ariaLabel:u.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:re.hU,nrTracks:a.length,tracks:a,resolveUri:e=>e.uri,columns:[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD]}))},qe=({renderRow:e,searchResults:t})=>i().createElement(re.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:re.hU,nrTracks:t.length,tracks:t,resolveUri:e=>e.uri,columns:[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD]}),Je=({renderRow:e,searchResults:t})=>i().createElement(re.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:re.hU,nrTracks:t.length,tracks:t,resolveUri:e=>e.uri,columns:[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD]}),He=({renderRow:e,searchResults:t})=>i().createElement(re.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:re.hU,nrTracks:t.length,tracks:t,resolveUri:e=>e.uri,columns:[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD]});var $e=n(7739);const Ye={artistIcon:"Gt26Myd3dsGrVxW9ArZW",artistImagePlaceholder:"MLeLx_C7OnluWx8e9S88",podcastIcon:"T6tkS1BFfNkJ4BNUf9Br",albumIcon:"p8hNoO_LkxYLrEJ2cCSF",searchResultTitle:"FETh66aSunr0whiLsmk4",searchResultContainer:"KAuXIg8XQPSRMRqTjvAD",rowContent:"NB2fhkFoxu_ZCQlzHhha",searchResultTitleContainer:"saXvuHxalPYz3i36v1Ve",seeMoreButton:"DhMJGiOreiPrq04sm2AF",seeMoreRowButton:"gkgL9fB_pyDL75m9HKdu"},et=({searchResult:e,index:t,isRTL:n,onClick:a})=>{var l;const r=null===(l=e.coverArt)||void 0===l?void 0:l.sources[0].url;return i().createElement($e.RX,{className:Ye.searchResultContainer,rowIndex:t,"aria-selected":!1},i().createElement("div",{"aria-label":`${u.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:Ye.seeMoreRowButton,onClick:a},i().createElement($e.id,{columnIndex:0,className:Ye.rowContent},void 0!==r?i().createElement("img",{className:Ye.albumIcon,src:e.coverArt.sources[0].url,alt:e.name}):null,i().createElement("div",{className:Ye.searchResultTitleContainer},i().createElement(d.Dy,{as:"p",className:Ye.searchResultTitle,variant:"ballad"},e.name),i().createElement(d.Dy,{as:"p",variant:"mesto",semanticColor:"textSubdued"},u.ag.get("album")))),i().createElement($e.id,{columnIndex:1}),i().createElement($e.id,{columnIndex:2},i().createElement("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Ye.seeMoreButton,onClick:a},n?i().createElement(we.e,{className:Ye.icon}):i().createElement(Ie.V,{className:Ye.icon})))))};var tt=n(5843);const nt=({size:e})=>i().createElement("div",{className:Ye.artistImagePlaceholder},i().createElement(tt.a,{iconSize:e})),at=({searchResult:e,index:t,isRTL:n,onClick:a})=>{var l;const r=null===(l=e.visuals.avatarImage)||void 0===l?void 0:l.sources[0].url;return i().createElement($e.RX,{className:Ye.searchResultContainer,rowIndex:t,"aria-selected":!1},i().createElement("div",{"aria-label":`${u.ag.get("artist-page.tracks.seemore")} ${e.profile.name}`,className:Ye.seeMoreRowButton,onClick:a,"data-testid":"playlist-inline-curation-artist"},i().createElement($e.id,{columnIndex:0,className:Ye.rowContent},void 0!==r?i().createElement("img",{className:Ye.artistIcon,src:r,alt:e.profile.name}):i().createElement(nt,{size:16}),i().createElement("div",{className:Ye.searchResultTitleContainer},i().createElement(d.Dy,{as:"p",className:Ye.searchResultTitle,variant:"ballad"},e.profile.name),i().createElement(d.Dy,{as:"p",variant:"mesto",semanticColor:"textSubdued"},u.ag.get("artist")))),i().createElement($e.id,{columnIndex:1}),i().createElement($e.id,{columnIndex:2},i().createElement("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.profile.name}`,className:Ye.seeMoreButton,onClick:a},n?i().createElement(we.e,{className:Ye.icon}):i().createElement(Ie.V,{className:Ye.icon})))))},it=({episode:{uid:e,uri:t,name:n,imgUrl:a,podcast:l,isPlayable:r,isMOGEFRestricted:s,isExplicit:o},contextUri:d,index:c,usePlayContextItem:u})=>i().createElement(re.YK,{uid:e,uri:t,isPlayable:r,isMOGEFRestricted:s,isExplicit:o,contextUri:d,name:n,imgUrl:a,index:c,podcast:l,usePlayContextItem:u}),lt=({label:e,index:t,isRTL:n,onClick:a})=>i().createElement($e.RX,{className:Ye.searchResultContainer,rowIndex:t,"aria-selected":!1},i().createElement("div",{"aria-label":e,className:Ye.seeMoreRowButton,onClick:a},i().createElement($e.id,{columnIndex:0,className:Ye.rowContent},i().createElement(d.Dy,{as:"p",className:Ye.searchResultTitle,variant:"ballad"},e)),i().createElement($e.id,{columnIndex:1}),i().createElement($e.id,{columnIndex:2},i().createElement("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:Ye.seeMoreButton,onClick:a},n?i().createElement(we.e,{className:Ye.icon}):i().createElement(Ie.V,{className:Ye.icon}))))),rt=({track:{uid:e,uri:t,album:n,name:a,artists:l,isPlayable:r,isExplicit:s,isMOGEFRestricted:o},contextUri:d,index:c,usePlayContextItem:u})=>i().createElement(re.cp,{uid:e,uri:t,isPlayable:r,isMOGEFRestricted:o,isExplicit:s,contextUri:d,name:a,imgUrl:n.imgUrl,index:c,album:n,artists:l,usePlayContextItem:u});function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){Be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let dt;!function(e){e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS"}(dt||(dt={}));const ct=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e=ot(ot({},e),{},{breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}):"NAV_TO_ENTITY"===t.type?e=ot(ot({},e),{},{breadcrumbs:[...e.breadcrumbs,t.level]}):("NAV_TO_RESULTS"===t.type?e=ot(ot({},e),{},{breadcrumbs:[...e.breadcrumbs,t.level]}):"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:dt.SEARCH,term:t.term,title:""}]}),e),ut=({resultList:e,level:t,isRTL:n,playlistUri:l,navToResults:r,navToEntity:s,term:c})=>{var m;let k=e;const v=(e=>e.filter((({uri:e})=>o().isTrack(e)||o().isEpisode(e))).map((({uri:e,uid:t})=>({type:o().isTrack(e)?je.p.TRACK:je.p.EPISODE,uri:e,uid:t,provider:null}))))(e),{usePlayContextItem:p}=(0,ne.n)({uri:`${l.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(c)}:${null!==(m=null==t?void 0:t.navType)&&void 0!==m?m:0}`,pages:[{items:v}]},{featureIdentifier:"search"}),y=(0,a.useCallback)(((e,t)=>e?void 0!==e.profile?i().createElement(at,{isRTL:n,index:t,key:e.uri,searchResult:e,onClick:()=>{s({navType:dt.ARTIST,uri:e.uri,title:e.profile.name})}}):void 0!==e.podcast?i().createElement(it,{key:e.uri,index:t,episode:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p}):void 0!==e.album?i().createElement(rt,{key:e.uri,index:t,track:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p}):e.isSeeAllXRow?i().createElement(lt,{isRTL:n,index:t,label:e.label,key:e.uri,onClick:()=>{r({navType:e.type,term:c,title:e.label})}}):e.uri.includes("album")?i().createElement(et,{index:t,key:e.uri,isRTL:n,searchResult:e,onClick:()=>{s({navType:dt.ALBUM,uri:e.uri,title:e.name})}}):null:null),[n,s,r,l,c,p]);if(""===c)return i().createElement("div",{className:x.Z.emptySearchTermContainer});if(!e||0===(null==e?void 0:e.length))return i().createElement("div",{className:x.Z.emptyStateContainer},i().createElement(d.Dy,{as:"h1",variant:"canon"},u.ag.get("search.empty-results-title",c)),i().createElement(d.Dy,{as:"p",variant:"mesto"},u.ag.get("search.empty-results-text")));if((null==t?void 0:t.navType)===dt.SEARCH){const t=[{type:dt.ARTISTRESULTS,label:u.ag.get("playlist.curation.see_all_artists"),isSeeAllXRow:!0,uri:"spotify:internal:recs:see-all-artists"},{type:dt.ALBUMRESULTS,label:u.ag.get("playlist.curation.see_all_album"),isSeeAllXRow:!0,uri:"spotify:internal:recs:see-all-albums"},{type:dt.TRACKRESULTS,label:u.ag.get("playlist.curation.see_all_songs"),isSeeAllXRow:!0,uri:"spotify:internal:recs:see-all-songs"}];return k=[...e,...t],i().createElement(Ke,{renderRow:y,searchResults:k})}return(null==t?void 0:t.navType)===dt.ALBUM?i().createElement(We,{renderRow:y,searchResults:k}):(null==t?void 0:t.navType)===dt.ARTIST?i().createElement(Xe,{renderRow:y,searchResults:k}):(null==t?void 0:t.navType)===dt.ALBUMRESULTS?i().createElement(qe,{renderRow:y,searchResults:k}):(null==t?void 0:t.navType)===dt.TRACKRESULTS?i().createElement(Je,{renderRow:y,searchResults:k}):(null==t?void 0:t.navType)===dt.ARTISTRESULTS?i().createElement(He,{renderRow:y,searchResults:k}):null},mt=({playlistUri:e,onCurationModeChange:t})=>{const[n,r]=(0,a.useState)([]),[s,c]=(0,a.useState)(),m=(0,l.v9)((e=>e.ui.textDirection.isRTL)),{level:k,changeTerm:v,goBack:p,navToEntity:y,navToResults:S,term:b}=(()=>{const[e,t]=(0,a.useReducer)(ct,{term:"",breadcrumbs:[]}),{breadcrumbs:n,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:n[n.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:g}=(0,a.useContext)(Le.Ax),E=(0,a.useCallback)((async e=>{const t=await g(De,{term:e});return(null==t?void 0:t.data.search)||null}),[g]),N=(0,a.useCallback)((async e=>{const t=await g(Ae,{uri:e,offset:0,limit:100});return(null==t?void 0:t.data.album)||null}),[g]),f=(0,a.useCallback)((async e=>{const t=await g(Ue,{uri:e,offset:0,limit:100});return(null==t?void 0:t.data.artist)||null}),[g]);return(0,a.useEffect)((()=>{let e=!0;return(async()=>{var t,n,a;if(k)switch(k.navType){case dt.SEARCH:try{if(!s||s.query!==b&&""!==b){const t=await E(b);e&&c(t)}else""===b&&r([])}catch{r([])}if(s){const e=(e=>{var t,n;const a=null!==(t=null==e||null===(n=e.topResults)||void 0===n?void 0:n.items)&&void 0!==t?t:[];return a.length?a.reduce(((t,n)=>{const a=n.uri,i=o().from(a);if(a&&i)switch(o().from(a)&&o().from(a).type){case o().Type.ALBUM:{var l;const n=((e,t)=>t.find((t=>t.uri===e)))(a,(null==e||null===(l=e.albums)||void 0===l?void 0:l.items)||[]);n&&t.push(n);break}case o().Type.ARTIST:{var r;const n=((e,t)=>t.find((t=>t.uri===e)))(a,(null==e||null===(r=e.artists)||void 0===r?void 0:r.items)||[]);n&&t.push(n);break}case o().Type.TRACK:{var s;const n=((e,t)=>t.find((t=>t.track.uri===e)))(a,(null==e||null===(s=e.tracks)||void 0===s?void 0:s.items)||[]);n&&t.push(ze(n));break}case o().Type.EPISODE:{var d;const n=((e,t)=>t.find((t=>t.episode.uri===e)))(a,(null==e||null===(d=e.episodes)||void 0===d?void 0:d.items)||[]);n&&t.push(Ge(n));break}}return t}),[]):[]})(s);r(e)}break;case dt.ARTISTRESULTS:r(null==s||null===(t=s.artists)||void 0===t?void 0:t.items);break;case dt.ALBUMRESULTS:r(null==s||null===(n=s.albums)||void 0===n?void 0:n.items);break;case dt.TRACKRESULTS:{var i;const e=null==s||null===(i=s.tracks)||void 0===i?void 0:i.items;null!=e&&e.length&&r(e.map((e=>ze(e))));break}case dt.EPISODERESULTS:{var l;const e=null==s||null===(l=s.episodes)||void 0===l?void 0:l.items;null!=e&&e.length&&r(e.map((e=>Ge(e))));break}case dt.ALBUM:try{const t=await N(k.uri);e&&r((e=>{const t={uri:e.uri,id:e.id,name:e.name,coverArt:e.coverArt};return e.tracks.items.map((e=>Qe(Qe({},e),{},{track:Qe(Qe({},e.track),{},{album:t})})))})(t).map((e=>ze(e))))}catch{r([])}break;case dt.ARTIST:try{const t=await f(k.uri);e&&r((a=t).discography?[...a.discography.topTracks.items.map((e=>ze(e))),...a.discography.popularReleases.items.map((e=>{const{uri:t,name:n,coverArt:{sources:a}}=e.releases.items[0];return{uri:t,name:n,coverArt:{sources:a}}}))]:[])}catch{r([])}}})(),()=>{e=!1}}),[k,E,N,f,b,s]),i().createElement(i().Fragment,null,i().createElement("section",{className:x.Z.playlistInlineCurationSection},i().createElement("div",{className:x.Z.playlistInlineCurationWrapper},i().createElement(d.Dy,{as:"h1",className:x.Z.playlistInlineCurationTitle,variant:"canon"},u.ag.get("playlist.curation.title")),i().createElement(a.Suspense,{fallback:null},i().createElement(_e,{placeholder:u.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{t(!0)},onChange:e=>{v(e)}}))),i().createElement("button",{className:x.Z.playlistInlineCurationCloseButton,onClick:()=>t(!1)},i().createElement(Re.k,{className:x.Z.closeIcon,"aria-label":u.ag.get("close")}))),null!==k&&k.navType!==dt.SEARCH?i().createElement("button",{className:x.Z.playlistInlineCurationBackButton,onClick:()=>p()},m?i().createElement(Ie.V,{"aria-label":u.ag.get("navbar.go-back"),className:Ce()([x.Z.icon,x.Z.iconRight])}):i().createElement(we.e,{"aria-label":u.ag.get("navbar.go-back"),className:Ce()([x.Z.icon,x.Z.iconLeft])}),i().createElement(d.Dy,{as:"p",variant:"cello"},k.title)):null,i().createElement("div",{className:x.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results"},i().createElement(ut,{playlistUri:e,term:b,level:k,resultList:n,navToEntity:y,navToResults:S,isRTL:m})))};var kt=n(35308),vt=n(82760);const pt="multiUserAttributionDisplayNamesV2";var yt=n(59916);function St(e){return(0,yt.MW)(e)||(0,yt.JF)(e)}const bt=new Set(B.zq),gt=new Set([]),Et=i().memo((({ariaLabel:e,nrTracks:t,playlistUri:n,playlistName:r,isCollaborative:s,isMixedMedia:d,isLive:c,isBlend:k,hasDateAdded:v,canEdit:p,scrollToUid:y,feedbackPath:S,deleteFeedbackPath:b,usePlayContextItem:g,tracklistRef:E,tracklistDomRef:N,nrCollaborators:f=1,canRemove:h})=>{const T=(0,a.useContext)(ae.ZF),{filter:F}=(0,a.useContext)(M.fo),{sortState:C,setSortState:R}=(0,a.useContext)(B.Gb),[I,w]=(0,a.useState)(t),L=(0,a.useRef)((()=>{})),[D,A]=(0,a.useState)([]),U=(0,a.useRef)({}),P=(0,l.I0)(),x=(0,a.useCallback)((()=>{null!=E&&E.current&&E.current.update()}),[E]);(0,oe.r)(n,x);const _=(0,a.useCallback)((e=>{R((0,O.VK)(e,C))}),[C,R]),V=(0,a.useCallback)((e=>{L.current(),T.remove(n,e)}),[T,n]),j=(0,a.useCallback)(((e,t,n=!1)=>{h&&(L.current=t,e.length>1&&!n?A(e):V(e))}),[h,V]);(0,a.useEffect)((()=>{null!=E&&E.current&&E.current.update()}),[C,F,E]),(0,a.useEffect)((()=>{null!=E&&E.current&&y&&E.current.scrollToItem({uid:y})}),[y,E]),(0,a.useEffect)((()=>{null!=E&&E.current&&""===F&&E.current.scrollToFirstSelected()}),[F,I,E]);const Q=(0,a.useCallback)((async(e,t)=>{const a=await T.getContents(n,{offset:e,limit:t,sort:(0,O._j)(C),filter:F,decorateFormatListData:!!S||c||k}),i=a.items.filter(((t,n)=>null!==t||(U.current[n+e]=!0,!1))),l=Object.keys(U.current).length;return a.totalLength-l!==I&&w(a.totalLength-l),i}),[n,T,I,C,F,S,c,k]),z=(0,a.useCallback)(((e,t,a)=>{if(null==E||!E.current)return;const i=E.current.getRows();i[t].id&&(a===vt.W.Before?T.move(n,e,{before:i[t].id}):T.move(n,e,{after:i[t].id}))}),[n,T,E]),G=(0,a.useCallback)(((e,t,a)=>{if(null==E||!E.current)return;const i=E.current.getRows();i[t].id&&(a===vt.W.Before?P((0,m.jV)(n,e,{before:i[t].id})):P((0,m.jV)(n,e,{after:i[t].id})))}),[n,P,E]),K=(0,a.useCallback)(((e,t)=>{var a,l,u,m,v,y;let E,N;const F=!!(0,yt.JF)(e)&&e.podcastSubscription.isUserSubscribed;if((0,yt.JF)(e))E=e.show,N=e.images.concat(e.show.images);else if((0,yt.MW)(e)){var R;E=e.album,N=null===(R=e.album)||void 0===R?void 0:R.images}const I=(0,de.X)(N,{desiredSize:40,desiredLabel:"small"});let w=[];p&&C.order===re.kn.NONE&&(w=[Z.aN[o().Type.TRACK],Z.aN[o().Type.LOCAL],Z.aN[o().Type.EPISODE]]);const L="1"===(null==e||null===(a=e.formatListAttributes)||void 0===a?void 0:a["dislike-feedback-selected"]);let D=!1;(0,yt.JF)(e)&&e.podcastSubscription.isPaywalled&&!F?D=!0:St(e)&&(D=e.isPlayable&&!L);const A=k&&((e,t)=>{var n,a,i,l;const r=[];if(!t)return r;const s=t[pt]?pt:"multiUserAttributionDisplayNames",d=null==t||null===(n=t[s])||void 0===n?void 0:n.split(","),c=null==t||null===(a=t.multiUserAttributionImages)||void 0===a?void 0:a.split(",");if(!d||!c)return r;const u=(null==t||null===(i=t.multiUserAttributionUsernamesV2)||void 0===i?void 0:i.split(","))||[],m=(null==t||null===(l=t.multiUserAttributionType)||void 0===l?void 0:l.split(","))||[],k=d.length;for(let e=0;e<k;e++){const t=u[e],n=t&&o().profileURI(t).toURI();r.push({username:t,uri:n,displayName:d[e],images:(v=c[e],v.length>1?[{url:v}]:[]),recsplanation:m[e]})}var v;return r.sort(((t,n)=>t.username?t.username===(null==e?void 0:e.username)?-1:n.username===(null==e?void 0:e.username)?1:0:0))})(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[];return i().createElement(re.dx,{key:t+e.uri,index:t,playIndex:null!==(l=e.playIndex)&&void 0!==l?l:void 0,contextUri:n,uri:e.uri,uid:null!==(u=e.uid)&&void 0!==u?u:void 0,id:e.id,isPlayable:D,duration_ms:St(e)?e.duration.milliseconds:0,isPaywalled:!!(0,yt.JF)(e)&&e.podcastSubscription.isPaywalled,isUserSubscribed:F,name:St(e)?e.name:"",artists:(0,yt.MW)(e)?e.artists:void 0,albumOrShow:E,isExplicit:(0,yt.MW)(e)&&e.isExplicit,isCollaborative:s,nrCollaborators:f,isMixedMedia:d,isLocal:(0,yt.MW)(e)&&e.isLocal,addedBy:A,hasDecoratedAddedBy:T.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,yt.JF)(e)&&e.release.date||"",isMOGEFRestricted:(0,yt.MW)(e)&&e.is19PlusOnly,type:e.type,imgUrl:(null==I?void 0:I.url)||"",onMove:z,onInsert:G,usePlayContextItem:g,allowedDropTypes:w,feedbackPath:S,feedbackUri:null==e||null===(m=e.formatListAttributes)||void 0===m?void 0:m.feedback_uri,deleteFeedbackPath:b,isDisliked:L,playlistName:r,isLive:c,isBlend:k,ticketingSiteURL:null==e||null===(v=e.formatListAttributes)||void 0===v?void 0:v.ticketingSite,eventDate:null==e||null===(y=e.formatListAttributes)||void 0===y?void 0:y.eventDate,canRemove:h})}),[p,h,C,n,s,f,d,T,z,G,g,S,b,r,c,k]);return i().createElement(i().Fragment,null,i().createElement(se.ZP,{value:"playlist-tracklist"},i().createElement(re.Pv,{testID:"playlist-tracklist",key:n,ariaLabel:e,hasHeaderRow:!0,columns:(0,O.RG)(s,d,v,c,k,f),sortableColumns:T.getCapabilities().canSort?bt:gt,sortState:C,onSort:_,onRemove:j,renderRow:K,resolveUri:e=>e.uri,resolveUid:e=>e.id,nrTracks:I,fetchTracks:Q,limit:100,canFetchAllTracks:T.getCapabilities().canFetchAllTracks,outerRef:E,outerDomRef:N})),i().createElement(kt.h,{title:u.ag.get("playlist.remove_from_playlist",r),isOpen:D.length>0,tracks:D,onClose:e=>{e.stopPropagation(),A([])},onRemove:V}))}));var Nt=n(21770),ft=n(42714),ht=n(27826),Tt=n(61634);function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Rt=i().memo((({playlistUri:e,playlistLength:t})=>{const{tracks:n,refresh:l}=((e,t=10)=>{const n=2*t,i=3*t,l=(0,a.useRef)(0),[r,s]=(0,a.useState)(e),[o,d]=(0,a.useState)([]),c=(0,a.useRef)([]),u=(0,a.useContext)(ft.Z);(0,a.useEffect)((()=>{const t=u.getEvents(),n=t=>{t.data.uri===e&&d((e=>e.filter((e=>t.data.items.every((t=>t.uri!==e.uri))))))};return t.addListener(Tt.XL.OPERATION_COMPLETE,n),()=>{t.removeListener(Tt.XL.OPERATION_COMPLETE,n)}}),[u,e]),(0,a.useEffect)((()=>(d([]),s(e),c.current=[],l.current=l.current+1,()=>{l.current=l.current+1})),[e]),(0,a.useEffect)((()=>{if(o.length<n){const e=Math.min(n,i-o.length),t=l.current;u.getRecommendedTracks(r,c.current,e).then((n=>{if(t!==l.current)return;const a=n.map((e=>(null==e?void 0:e.uri)&&ht.o.from(e.uri).id)).filter((e=>null!==e));n.length<e&&c.current.length?c.current=[]:c.current=[...c.current,...a],d((e=>[...e,...n]))}))}}),[n,i,u,r,o.length]);const m=(0,a.useCallback)((()=>{d((e=>e.slice(t)))}),[t]);return{tracks:o.slice(0,t),_bufferedTracks:o.slice(t),refresh:m}})(e),r=!t||0===t,{usePlayContextItem:s}=(0,ne.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:n.map((e=>Ct(Ct({},e),{},{provider:null,type:je.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),o=(0,a.useCallback)(((t,n)=>i().createElement(re.cp,{key:t.uri,index:n,imgUrl:t.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:t.uri,isPlayable:!t.isMOGEFRestricted,name:t.name,artists:t.artists,album:Ct(Ct({},t.album),{},{imgUrl:t.album.imageUrl}),isExplicit:t.explicit,isMOGEFRestricted:t.isMOGEFRestricted,usePlayContextItem:s})),[e,s]),c=(0,a.useMemo)((()=>[re.QD.TITLE,re.QD.ALBUM,re.QD.ADD]),[]),m=(0,a.useCallback)((e=>e.uri),[]),k=(0,a.useCallback)((e=>e.id),[]),v=(0,a.useMemo)((()=>n.slice(0,Math.min(n.length,10))),[n]);return n.length>0?i().createElement("div",{className:x.Z.recommendedTrackList},i().createElement("div",{className:x.Z.top},i().createElement("div",{className:x.Z.header},i().createElement(d.Dy,{variant:"canon",className:x.Z.title},u.ag.get("playlist.extender.recommended.title")),i().createElement(d.Dy,{variant:"mesto",className:x.Z.subtitle},r?u.ag.get("playlist.extender.title.in.playlist"):u.ag.get("playlist.extender.songs.in.playlist")))),n.length?i().createElement(i().Fragment,null,i().createElement(re.Pv,{ariaLabel:u.ag.get("playlist.extender.recommended.title"),key:`${e}-recommended`,nrTracks:Math.min(n.length,10),rowPlaceholder:re.hU,tracks:v,renderRow:o,resolveUri:m,resolveUid:k,columns:c}),i().createElement(Nt.oM,{className:x.Z.refreshButton,onClick:l},u.ag.get("playlist.extender.refresh"))):null):null})),It=i().lazy((()=>Promise.all([n.e(814),n.e(682)]).then(n.bind(n,96838)))),wt=(e,t,n,a,i,l,r)=>e?B.RJ:(0,O.RG)(t,n,a,i,l,r),Lt=i().memo((({metadata:e,capabilities:t})=>{var n;const{uri:s,name:k,images:v,totalLength:p,isOwnedBySelf:y,isCollaborative:C,hasEpisodes:R,hasSpotifyTracks:w,canAdd:L,canRemove:D,canPlay:U,formatListData:j,hasDateAdded:ae,collaborators:le}=e,re="chart"===(null==j?void 0:j.type),se="live-streams"===(null==j?void 0:j.type),oe=["blend","celebrity-blend","friends-mix"].indexOf((null==j?void 0:j.type)||"")>-1,de=!!R,ce=(null==j?void 0:j.attributes)||{},ue=ce.header_image_url_desktop||ce.image_url||null,me=L&&D,{inlineCurationModeIsOn:ve,handleInlineCurationModeChange:pe}=((e,t)=>{const n=(0,c.W6)(K.pg),[i,l]=(0,a.useState)(e&&0===t&&n),{scrollNodeChildRef:r}=(0,a.useContext)(Y.VX),s=(0,a.useRef)(i);return(0,a.useEffect)((()=>{const e=!s.current;var t;r&&e&&i&&(null===(t=r.current)||void 0===t||t.scrollIntoView({block:"end",behavior:"smooth"})),s.current=i}),[r,i]),{inlineCurationModeIsOn:i,handleInlineCurationModeChange:e=>{l(e)}}})(me,p),ye=t.canFilter&&p>0,Se=t.canSort&&p>0,{filterBoxApiRef:be,filterBoxDomRef:ge,tracklistDomRef:Ee,handleKeyDown:Ne}=(0,Q.Q)(),fe=(0,G.k)(),Fe=fe&&p>0,{productState:Ce}=(0,l.v9)(W.Gg),Re=!!Ce&&parseInt(Ce.ads,10)>0,Ie=(0,l.I0)(),we=(0,r.k6)(),Le="POP"!==we.action?new URLSearchParams(we.location.search).get("uid"):null,[De,Ae]=(0,I.Z)(s),Ue=(0,z.o)(),{filter:Pe}=(0,a.useContext)(M.fo),{sortState:xe}=(0,a.useContext)(B.Gb),Oe=(0,a.useRef)(null),[_e]=v,Me=(0,ee.Z)(null!==ue?ue:(null==_e?void 0:_e.url)||null),{isPlaying:Be,togglePlay:Ve,usePlayContextItem:je}=(0,ne.n)((0,ie.U)(s,(0,O._j)(xe),Pe),{featureIdentifier:"playlist"}),Ze=(0,a.useCallback)((()=>Ve()),[Ve]),Qe=(0,a.useCallback)((async()=>{Ue({targetUri:s,intent:De?"unsave":"save",type:"click"});try{await Ae(!De)}catch{}}),[Ue,s,De,Ae]),ze=(0,a.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>o().from(e))).filter((e=>o().isTrack(e)||o().isEpisode(e)||o().isLocalTrack(e)));if(t.length>0&&L){var n,a,i;const e=t.map((e=>e.toURI())),l=null===(n=Oe.current)||void 0===n||null===(a=n.getSelected())||void 0===a||null===(i=a.slice(-1))||void 0===i?void 0:i[0],r={after:(null==l?void 0:l.uid)||"end"};Ie((0,m.jV)(s,e,r))}}),[L,Ie,s]);(0,te.aw)(ze);const Ge=(0,a.useCallback)(((e,t)=>{const n=[...t[Z.aN[o().Type.TRACK]]||[],...t[Z.aN[o().Type.LOCAL]]||[],...t[Z.aN[o().Type.EPISODE]]||[],...t[Z.aN[o().Type.ALBUM]]||[]];n.length>0&&(Ie((0,m.jV)(s,n)),Ue({targetUri:s,intent:"add",type:"drop"}))}),[Ie,Ue,s]);return i().createElement(a.Suspense,{fallback:null},i().createElement(f.$,null,u.ag.get("playlist.page-title",k)),i().createElement(N.Z,{types:[Z.aN[o().Type.TRACK],Z.aN[o().Type.LOCAL],Z.aN[o().Type.EPISODE],Z.aN[o().Type.ALBUM]],onDrop:Ge},i().createElement("section",{role:"presentation",className:x.Z.playlist,"data-testid":"playlist-page","data-test-uri":s,onKeyDown:Ne},i().createElement(Te.s,{metadata:e,isPlaying:Be,togglePlay:Ze,backgroundColor:Me}),i().createElement("div",{className:x.Z.playlistContent},i().createElement(X.o,{backgroundColor:Me},i().createElement(X.F,null,U?i().createElement(P.$,{onClick:Ze,isPlaying:Be,size:J.qE.lg,uri:s,ariaPlayLabel:u.ag.get("playlist.a11y.play",k),ariaPauseLabel:u.ag.get("playlist.a11y.pause",k)}):null,y&&w&&i().createElement($.F,{property:K.Up,renderNewExperience:()=>i().createElement(V.v,{uri:s})}),y?null:i().createElement(T.r,null,i().createElement(q.H,{isAdded:!!De,onClick:Qe,size:q.q.md})),Fe?i().createElement(b.o,{uri:s,isFollowing:!!De,onFollow:Qe,size:b.q.md}):null,i().createElement($.F,{property:K.bM,renderNewExperience:()=>{var t;return null!==(t=e.permissions)&&void 0!==t&&t.canAdministratePermissions?i().createElement(he,{label:u.ag.get("permissions.invite-collaborators",k),uri:s}):null}}),i().createElement(H.y,{menu:i().createElement(E.X,{uri:s})},i().createElement(g.z,{label:u.ag.get("more.label.context",k)})),ye&&Se&&i().createElement("div",{className:x.Z.searchBoxContainer},i().createElement(a.Suspense,{fallback:null},i().createElement(F.K,{placeholder:u.ag.get("playlist.search_in_playlist"),filterBoxApiRef:be,outerRef:ge})),i().createElement(_.l,{columns:wt(re,C,de,ae,se,oe,null!==(n=null==le?void 0:le.count)&&void 0!==n?n:1)})))),i().createElement("div",{className:"contentSpacing"},Re?i().createElement(S,{playlistUri:s}):null,p>0?i().createElement(a.Suspense,{fallback:null},re?i().createElement(ke,{key:s,ariaLabel:k,nrTracks:p,playlistUri:s,rankType:ce.rank_type||"",scrollToUid:Le,usePlayContextItem:je,tracklistDomRef:Ee}):i().createElement(Et,{key:s,ariaLabel:k,nrTracks:p,playlistUri:s,playlistName:k,hasDateAdded:ae,isCollaborative:C,isMixedMedia:de,isLive:se,isBlend:oe,canEdit:me,scrollToUid:Le,feedbackPath:ce["dislike-endpoint"],deleteFeedbackPath:ce["delete-endpoint"],usePlayContextItem:je,tracklistRef:Oe,tracklistDomRef:Ee,nrCollaborators:null==le?void 0:le.count,canRemove:D})):i().createElement(a.Suspense,{fallback:null},i().createElement($.F,{property:K.pg,renderNewExperience:()=>null,renderOldExperience:()=>i().createElement(h.u,{message:u.ag.get("playlist.empty_state_subtitle"),title:u.ag.get("playlist.empty_state_title"),linkTo:"/browse/newreleases",linkTitle:u.ag.get("browse.new-releases"),renderInline:!0},i().createElement(A.Z,null))})),y?i().createElement(a.Suspense,{fallback:null},i().createElement($.F,{property:K.pg,renderNewExperience:()=>ve?i().createElement(mt,{playlistUri:s,onCurationModeChange:pe}):i().createElement("button",{className:x.Z.seeMore,onClick:()=>{pe(!0)}},i().createElement(d.Dy,{as:"div",variant:"minuetBold"},u.ag.get("playlist.curation.find_more"))),renderOldExperience:()=>null})):null,y&&!ve&&fe?i().createElement(Rt,{playlistUri:s,playlistLength:e.totalLength}):null)))))})),Dt=i().memo((()=>{const{playlistId:e}=(0,r.UO)(),{search:t}=(0,r.TH)(),n=(0,c.W6)(K.bM),s=(0,a.useContext)(ae.ZF).getCapabilities(),d=o().playlistV2URI((e||"").split("&")[0]).toURI(),{isAnonymous:m}=(0,l.v9)(W.Gg),{isEnhanced:k}=(0,j.U)(d);(0,a.useEffect)((()=>{const e=new URLSearchParams(t).get("prid");if(!m&&e){const t=`https://spclient.wg.spotify.com/algotorial-sharing-service/v1/shared?playlistId=${d}&sharedEntityUri=${e}`;(0,le.k)().request(t,{method:"POST",authorize:!0,allowOffline:!0})}}),[d,m,t]);const v=(0,ae.ET)(d,{decorateFormatListData:!0,withSync:!0,hydrateCollaboratorsWithMembers:n});if(!v)return i().createElement(U.h,{hasError:!1,errorMessage:u.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline});if(v.permissions&&!v.permissions.canView)return i().createElement(D,{uri:d});const p=i().createElement(B.kz,{uri:d},i().createElement(M.hz,{uri:d},i().createElement(Lt,{metadata:v,capabilities:s})));return i().createElement($.F,{property:K.Up,renderNewExperience:()=>k?i().createElement(B.kz,{uri:d},i().createElement(It,{metadata:v,capabilities:s})):p,renderOldExperience:()=>p})})),At=Dt}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map