"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[59,396],{87581:(e,t,r)=>{r.d(t,{Q:()=>d});var n=r(67154),o=r.n(n),s=r(67294),i=r.n(s),a=r(94184),p=r.n(a);const c="_pMNGOs2KBLWGpGmunYI";function d(e){return i().createElement("section",o()({},e,{className:p()(c,e.className)}))}},14784:(e,t,r)=>{r.r(t),r.d(t,{ALL_EPISODE_SPONSORS_TESTID:()=>b,AllEpisodeSponsors:()=>E,allEpisodeSponsorsPath:()=>O.e,default:()=>S});var n=r(67154),o=r.n(n),s=r(67294),i=r.n(s),a=r(52883),p=r(46886),c=r(28975),d=r(87581),u=r(77186);var l=r(88396),f=r(99922),O=r(61737);const b="all-episode-sponsors";function E({EpisodeSponsorsWrapper:e=l.EpisodeSponsorsWrapper}){const{[c.hd]:t}=(0,a.UO)(),r=(0,u.P)(),n=(0,f.o)();return r.location.state?i().createElement(d.Q,{"data-testid":b},i().createElement(e,o()({},n,{numberOfSponsorsToDisplay:1/0,reason:"Episode page See All"}))):i().createElement(p.AP,{to:(0,c.lc)(t)})}const S=E},88396:(e,t,r)=>{r.r(t),r.d(t,{EPISODE_SPONSORS_SHELF_TESTID:()=>h,EpisodeSponsorsWrapper:()=>j,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>w,default:()=>T});var n=r(67154),o=r.n(n),s=r(59713),i=r.n(s),a=r(67294),p=r.n(a),c=r(1486),d=r(27716);const u=(0,a.lazy)((()=>Promise.all([r.e(814),r.e(258)]).then(r.bind(r,87258))));function l({fetchedEpisodeSponsorsData:e,fireTrackingEvent:t,numberOfSponsorsToDisplay:r,firedViewedEvents:n,version:s,reason:i,uri:l}){const{displayedEpisodeSponsorsData:f}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:t}){return(0,a.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,t)})),[e,t])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:r}),O=(0,d.s4)(),b=(0,a.useMemo)((()=>f.map(((e,r)=>p().createElement(u,o()({key:`${e.metadata.lineitem_id}-${r}`,fireTrackingEvent:t,firedViewedEvents:n,version:s,onClick:async function(){return O.send((0,c.$)({uri:l,reason:i,lineitem_id:f.map((e=>e.metadata.lineitemId)),ui_navigate:f.map((({clickthrough:e},t)=>r===t?e:"")),navigate_to_external_uri:f.map(((e,t)=>r===t))}))}},e))))),[f,t,n,s,i,l,O]);return{displayedEpisodeSponsorsData:f,displayedSponsors:b}}var f=r(69518),O=r.n(f);var b=r(52883);var E=r(18693);function S({firedViewedEvents:e}){var t;const r=(0,a.useRef)();return{firedViewedEvents:r.current=null!==(t=null!=e?e:r.current)&&void 0!==t?t:new Set}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m({uri:e,getEpisodeSponsors:t,fireTrackingEvent:r,numberOfSponsorsToDisplay:n,version:o,reason:s}){const{state:i}=(0,b.TH)(),{episodeBase62Id:p}=function({uri:e,episodeBase62Id:t}){return{episodeBase62Id:(0,a.useMemo)((()=>{var r;return t||(null===(r=O().from(e))||void 0===r?void 0:r.getBase62Id())}),[e,t])}}(v(v({},i),{},{uri:e})),{fetchedEpisodeSponsorsData:c}=(0,E.m)(v(v({},i),{},{episodeBase62Id:p,getEpisodeSponsors:t,version:o})),{firedViewedEvents:d}=S(v({},i));return v(v({uri:e,episodeBase62Id:p,fetchedEpisodeSponsorsData:c},l({fetchedEpisodeSponsorsData:c,fireTrackingEvent:r,numberOfSponsorsToDisplay:n,firedViewedEvents:d,version:o,reason:s,uri:e})),{},{firedViewedEvents:d,reason:s})}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const P=(0,a.lazy)((()=>r.e(479).then(r.bind(r,27479)))),h="episode-sponsors-shelf",w="see-all-episode-sponsors";function j(e){const{numberOfSponsorsToDisplay:t}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),r=m(g(g({},e),{},{numberOfSponsorsToDisplay:t}));return r.episodeBase62Id&&r.displayedSponsors.length?p().createElement(a.Suspense,{fallback:!0},p().createElement(P,o()({},e,{numberOfSponsorsToDisplay:t,state:r}))):null}const T=j},18693:(e,t,r)=>{r.d(t,{F:()=>i,m:()=>a});var n=r(67294),o=r(64005),s=r(31604);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:t,fetchedEpisodeSponsorsData:a=[],version:p}){const[c,d]=(0,n.useState)(a),u=(0,n.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const n=null!=t?t:(await Promise.resolve().then(r.bind(r,11401))).getEpisodeSponsors;d(await n(e,{version:p}))}catch(e){d([])}}),[e,t,p]),l=(0,o.y)(u,i);return(0,n.useEffect)((function(){a.length||l()}),[l,a.length]),(0,s.H)(l),{fetchedEpisodeSponsorsData:c}}},99922:(e,t,r)=>{r.d(t,{o:()=>s});var n=r(87577),o=r(49207);function s(){return{version:(0,n.W6)(o.GE)?2:1}}},31604:(e,t,r)=>{r.d(t,{H:()=>c});var n=r(67294),o=r(87577),s=r(49207),i=r(40080),a=r(8341),p=r(89952);function c(e){const t=(0,o.W6)(s.oF),r=(0,a.Y)((e=>{var t,r;const n=null!==(t=null==e?void 0:e.item)&&void 0!==t?t:void 0;return(0,p.k6)(n)&&n.isPodcastAd&&null!==(r=n.id)&&void 0!==r?r:void 0})),c=(0,i.D)(r);(0,n.useEffect)((function(){r!==c&&Boolean(r)&&setTimeout(e,t)}),[e,r,c,t])}},77186:(e,t,r)=>{r.d(t,{P:()=>c});var n=r(59713),o=r.n(n),s=r(67294),i=r(52883);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(){const e=(0,i.k6)(),{listen:t,location:r}=e;return(0,s.useEffect)((function(){return t(((e,t)=>{"POP"===t&&(e.state=p(p(p({},void 0),r.state),e.state))}))})),e}}}]);
//# sourceMappingURL=xpui-routes-all-episode-sponsors.js.map