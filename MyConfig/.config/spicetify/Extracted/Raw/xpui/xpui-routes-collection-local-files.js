"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[379],{63506:(e,t,l)=>{l.r(t),l.d(t,{default:()=>V});var a=l(59713),r=l.n(a),n=l(67294),i=l.n(n),s=l(73012),c=l(3927),o=l(20657),u=l(19565),m=l(42273),g=l(59482),d=l(72907),E=l(61048),f=l(1663),y=l(55120),p=l(1838),b=l(35213),x=l(22423),h=l(28248),v=l(78462),P=l(40122),k=l(1169),C=l(30947),O=l(55911),D=l(31595),S=l(72131),w=l(66393),I=l(23248),R=l(84242),T=l(37763),j=l.n(T),A=l(18261),U=l(87257),N=l(42922),_=l(84788),z=l(26921),B=l(27481),H=l(96525),L=l(82760),M=l(83384);const F=i().memo((({uri:e,uid:t,name:l,duration_ms:a,artists:r,album:s,is19PlusOnly:c,isExplicit:u,isPlayable:m,index:g,contextUri:d,imgUrl:E,usePlayContextItem:f})=>{const{filter:y}=(0,n.useContext)(x.fo),{isActive:p,isPlaying:b,triggerPlay:h,togglePlay:v}=f({uid:t,uri:e,index:g}),P=(0,H.P)(),{badges:k,hasBadges:C}=(0,_.r)({isExplicit:u}),O=(null==r?void 0:r.map((e=>e.name)).join(o.ag.getSeparator()))||"";return i().createElement(N.ZP,{value:"row",index:g},i().createElement(A._,{menu:i().createElement(z.N,{uri:e,uid:t,contextUri:d})},i().createElement(L.c,{uri:e,contextUri:d,isActive:p,index:g,onTriggerPlay:()=>{h()},ariaRowIndex:g+1,isPlayable:m,ageRestricted:c,dragMetadata:{name:l,createdBy:O}},i().createElement(B.Dd,{ariaColIndex:0},i().createElement(B.Du,{uri:e,playAriaLabel:o.ag.get("tracklist.a11y.play",l,O),isPlaying:b,isActive:p,onClick:()=>{v()}},i().createElement(B.km,null,g+1))),i().createElement(B.vZ,{ariaColIndex:1},i().createElement(B.lD,{src:E}),i().createElement(B.vm,null,i().createElement(B.Wh,{titleText:l},i().createElement(j(),{searchWords:[y],textToHighlight:l,findChunks:P,highlightClassName:M.Z.filterHighlight})),C&&i().createElement(B.g3,null,k.explicit?i().createElement(U.N,null):null),i().createElement(B.K9,null,r&&i().createElement(H.o,{nonInteractive:!0,artists:r,filter:y})))),i().createElement(B.UA,{ariaColIndex:2},(null==s?void 0:s.name)&&i().createElement(B.BM,{nonInteractive:!0,uri:null==s?void 0:s.uri,name:null==s?void 0:s.name},i().createElement(j(),{searchWords:[y],textToHighlight:null==s?void 0:s.name,findChunks:P,highlightClassName:M.Z.filterHighlight}))),i().createElement(B.mU,{ariaColIndex:3},i().createElement(B.A$,{duration:a}),i().createElement(B.Zv,{menu:i().createElement(z.N,{uri:e,uid:t,contextUri:d}),label:o.ag.get("more.label.track",l,O)})))))}),((e,t)=>e.uri===t.uri&&e.index===t.index));var K=l(49961);const Q=new Set(v.MI),Z=i().memo((({uri:e,tracks:t,columns:l,sortState:a,handleSort:r,usePlayContextItem:s,tracklistDomRef:c})=>{const u=(0,n.useRef)(null),m=(0,n.useCallback)(((t,l)=>{var a;const r=(0,K.X)(null===(a=t.album)||void 0===a?void 0:a.images,{desiredSize:40,desiredLabel:"small"});return i().createElement(F,{key:t.uid,index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:(null==r?void 0:r.url)||"",usePlayContextItem:s})}),[e,s]);return i().createElement(i().Fragment,null,i().createElement(N.ZP,{value:"playlist-tracklist"},i().createElement(h.Pv,{key:e,ariaLabel:o.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:Q,sortState:a,onSort:r,renderRow:m,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:c})))})),q="uCHqQ74vvHOnctGg0X0B",W="feuNq1FTxMbdeOTuFgpA";function G(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,a)}return l}function X(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?G(Object(l),!0).forEach((function(t){r()(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):G(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}const Y=[h.QD.INDEX,h.QD.TITLE,h.QD.ALBUM,h.QD.DURATION],$=()=>{const{filter:e}=(0,n.useContext)(x.fo),{sortState:t,setSortState:l}=(0,n.useContext)(v.Gb),a=(0,n.useContext)(w.t),[r]=(0,I.z)(P.LOCAL_STORAGE_KEY,!1),[h,T]=(0,n.useState)(),j=(0,D.Y)(s.Fzl),{filterBoxApiRef:A,filterBoxDomRef:U,tracklistDomRef:N,handleKeyDown:_}=(0,k.Q)(),z=(0,n.useCallback)((e=>{l((0,p.VK)(e,t))}),[t,l]),B=(0,n.useCallback)((async()=>{const l=await a.getTracks((0,p._j)(t),e);T(l)}),[a,t,e]);(0,n.useEffect)((()=>{B()}),[B]);const{isPlaying:H,togglePlay:L,usePlayContextItem:M}=(0,R.n)({uri:S.b,pages:[{items:(null!=h?h:[]).map((e=>X(X({},e),{},{provider:null})))}]},{featureIdentifier:"local_files"});return h?e||h.length&&r?i().createElement("div",{role:"presentation",className:q,onKeyDown:_},i().createElement(m.gF,{backgroundColor:j},i().createElement(g.W,null,i().createElement(y.$,{size:O.qE.sm,onClick:()=>L(),isPlaying:H,uri:S.b}),i().createElement(d.i,{text:o.ag.get("local-files")})),i().createElement(m.sP,null,i().createElement(m.xd,null,o.ag.get("local-files")),i().createElement(m.T0,null,o.ag.get("local-files.description")))),i().createElement(C.o,{backgroundColor:j},i().createElement(C.F,null,i().createElement(y.$,{size:O.qE.xl,onClick:()=>L(),isPlaying:H,uri:S.b}),i().createElement("div",{className:W},i().createElement(n.Suspense,{fallback:null},i().createElement(E.K,{placeholder:o.ag.get("playlist.search_in_playlist"),filterBoxApiRef:A,outerRef:U})),i().createElement(b.l,{columns:v.MI})))),i().createElement("div",{className:"contentSpacing"},i().createElement(Z,{tracks:h,uri:S.b,columns:Y,handleSort:z,sortState:t,usePlayContextItem:M,tracklistDomRef:N}))):i().createElement(u.u,{linkTo:"/preferences",linkTitle:o.ag.get("local-files.empty-button"),message:o.ag.get("local-files.empty-description"),title:o.ag.get("local-files.empty-header")},i().createElement(c.Y,{iconSize:64})):i().createElement(f.h,{hasError:!1,errorMessage:o.ag.get("error.request-artist-failure")})},V=()=>i().createElement(v.kz,{uri:"spotify:internal:local-files"},i().createElement(x.hz,{uri:"spotify:internal:local-files"},i().createElement($,null)))}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map